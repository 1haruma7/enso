var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var l=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var ee=Array.isArray;function te(){}var S={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function re(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function ie(e,t){return re(e.type,t,e.props)}function ae(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function oe(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var se=/\/+/g;function ce(e,t){return typeof e==`object`&&e&&e.key!=null?oe(``+e.key):t.toString(36)}function le(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(te,te):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function C(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,C(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+ce(e,0):a,ee(o)?(i=``,c!=null&&(i=c.replace(se,`$&/`)+`/`),C(o,r,i,``,function(e){return e})):o!=null&&(ae(o)&&(o=ie(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(se,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(ee(e))for(var u=0;u<e.length;u++)a=e[u],s=l+ce(a,u),c+=C(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+ce(a,u++),c+=C(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return C(le(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function ue(e,t,n){if(e==null)return e;var r=[],i=0;return C(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function de(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var w=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},T={map:ue,forEach:function(e,t,n){ue(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ue(e,function(){t++}),t},toArray:function(e){return ue(e,function(e){return e})||[]},only:function(e){if(!ae(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=T,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!ne.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return re(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)ne.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return re(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=ae,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:de}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(te,w)}catch(e){w(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),S.T=t}},e.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},e.use=function(e){return S.H.use(e)},e.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},e.useCallback=function(e,t){return S.H.useCallback(e,t)},e.useContext=function(e){return S.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return S.H.useEffect(e,t)},e.useEffectEvent=function(e){return S.H.useEffectEvent(e)},e.useId=function(){return S.H.useId()},e.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return S.H.useMemo(e,t)},e.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},e.useRef=function(e){return S.H.useRef(e)},e.useState=function(e){return S.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return S.H.useTransition()},e.version=`19.2.0`})),u=o(((e,t)=>{t.exports=l()})),d=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,ee||(ee=!0,ae());else{var t=n(l);t!==null&&ce(x,t.startTime-e)}}var ee=!1,te=-1,S=5,ne=-1;function re(){return g?!0:!(e.unstable_now()-ne<S)}function ie(){if(g=!1,ee){var t=e.unstable_now();ne=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(te),te=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&re());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&ce(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?ae():ee=!1}}}var ae;if(typeof y==`function`)ae=function(){y(ie)};else if(typeof MessageChannel<`u`){var oe=new MessageChannel,se=oe.port2;oe.port1.onmessage=ie,ae=function(){se.postMessage(null)}}else ae=function(){_(ie,0)};function ce(t,n){te=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(te),te=-1):h=!0,ce(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,ee||(ee=!0,ae()))),r},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),f=o(((e,t)=>{t.exports=d()})),p=o((e=>{var t=u();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.0`})),m=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=p()})),h=o((e=>{var t=f(),n=u(),r=m();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function d(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),ee=Symbol.for(`react.consumer`),te=Symbol.for(`react.context`),S=Symbol.for(`react.forward_ref`),ne=Symbol.for(`react.suspense`),re=Symbol.for(`react.suspense_list`),ie=Symbol.for(`react.memo`),ae=Symbol.for(`react.lazy`),oe=Symbol.for(`react.activity`),se=Symbol.for(`react.memo_cache_sentinel`),ce=Symbol.iterator;function le(e){return typeof e!=`object`||!e?null:(e=ce&&e[ce]||e[`@@iterator`],typeof e==`function`?e:null)}var C=Symbol.for(`react.client.reference`);function ue(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===C?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case ne:return`Suspense`;case re:return`SuspenseList`;case oe:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case te:return e.displayName||`Context`;case ee:return(e._context.displayName||`Context`)+`.Consumer`;case S:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case ie:return t=e.displayName||null,t===null?ue(e.type)||`Memo`:t;case ae:t=e._payload,e=e._init;try{return ue(e(t))}catch{}}return null}var de=Array.isArray,w=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},pe=[],me=-1;function he(e){return{current:e}}function ge(e){0>me||(e.current=pe[me],pe[me]=null,me--)}function E(e,t){me++,pe[me]=e.current,e.current=t}var _e=he(null),ve=he(null),ye=he(null),be=he(null);function xe(e,t){switch(E(ye,t),E(ve,e),E(_e,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?af(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=af(t),e=sf(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}ge(_e),E(_e,e)}function Se(){ge(_e),ge(ve),ge(ye)}function Ce(e){e.memoizedState!==null&&E(be,e);var t=_e.current,n=sf(t,e.type);t!==n&&(E(ve,e),E(_e,n))}function we(e){ve.current===e&&(ge(_e),ge(ve)),be.current===e&&(ge(be),hp._currentValue=fe)}var Te,Ee;function De(e){if(Te===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Te=t&&t[1]||``,Ee=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+Te+e+Ee}var Oe=!1;function ke(e,t){if(!e||Oe)return``;Oe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{Oe=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?De(n):``}function Ae(e,t){switch(e.tag){case 26:case 27:case 5:return De(e.type);case 16:return De(`Lazy`);case 13:return e.child!==t&&t!==null?De(`Suspense Fallback`):De(`Suspense`);case 19:return De(`SuspenseList`);case 0:case 15:return ke(e.type,!1);case 11:return ke(e.type.render,!1);case 1:return ke(e.type,!0);case 31:return De(`Activity`);default:return``}}function je(e){try{var t=``,n=null;do t+=Ae(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Me=Object.prototype.hasOwnProperty,Ne=t.unstable_scheduleCallback,Pe=t.unstable_cancelCallback,Fe=t.unstable_shouldYield,Ie=t.unstable_requestPaint,D=t.unstable_now,Le=t.unstable_getCurrentPriorityLevel,Re=t.unstable_ImmediatePriority,ze=t.unstable_UserBlockingPriority,Be=t.unstable_NormalPriority,Ve=t.unstable_LowPriority,He=t.unstable_IdlePriority,Ue=t.log,We=t.unstable_setDisableYieldValue,Ge=null,Ke=null;function qe(e){if(typeof Ue==`function`&&We(e),Ke&&typeof Ke.setStrictMode==`function`)try{Ke.setStrictMode(Ge,e)}catch{}}var Je=Math.clz32?Math.clz32:Xe,O=Math.log,Ye=Math.LN2;function Xe(e){return e>>>=0,e===0?32:31-(O(e)/Ye|0)|0}var Ze=256,Qe=262144,$e=4194304;function et(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function tt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=et(n))):i=et(o):i=et(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=et(n))):i=et(o)):i=et(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function nt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function rt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function it(){var e=$e;return $e<<=1,!($e&62914560)&&($e=4194304),e}function at(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ot(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function st(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Je(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&ct(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function ct(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Je(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function lt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Je(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function ut(e,t){var n=t&-t;return n=n&42?1:dt(n),(n&(e.suspendedLanes|t))===0?n:0}function dt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ft(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function pt(){var e=T.p;return e===0?(e=window.event,e===void 0?32:jp(e.type)):e}function mt(e,t){var n=T.p;try{return T.p=e,t()}finally{T.p=n}}var ht=Math.random().toString(36).slice(2),k=`__reactFiber$`+ht,gt=`__reactProps$`+ht,_t=`__reactContainer$`+ht,vt=`__reactEvents$`+ht,yt=`__reactListeners$`+ht,bt=`__reactHandles$`+ht,xt=`__reactResources$`+ht,St=`__reactMarker$`+ht;function Ct(e){delete e[k],delete e[gt],delete e[vt],delete e[yt],delete e[bt]}function wt(e){var t=e[k];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_t]||n[k]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Of(e);e!==null;){if(n=e[k])return n;e=Of(e)}return t}e=n,n=e.parentNode}return null}function Tt(e){if(e=e[k]||e[_t]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Et(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Dt(e){var t=e[xt];return t||=e[xt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function Ot(e){e[St]=!0}var kt=new Set,At={};function jt(e,t){Mt(e,t),Mt(e+`Capture`,t)}function Mt(e,t){for(At[e]=t,e=0;e<t.length;e++)kt.add(t[e])}var Nt=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Pt={},Ft={};function It(e){return Me.call(Ft,e)?!0:Me.call(Pt,e)?!1:Nt.test(e)?Ft[e]=!0:(Pt[e]=!0,!1)}function Lt(e,t,n){if(It(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Rt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function zt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function Bt(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Vt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Ht(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ut(e){if(!e._valueTracker){var t=Vt(e)?`checked`:`value`;e._valueTracker=Ht(e,t,``+e[t])}}function Wt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Vt(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Gt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var Kt=/[\n"\\]/g;function qt(e){return e.replace(Kt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function A(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+Bt(t)):e.value!==``+Bt(t)&&(e.value=``+Bt(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Yt(e,o,Bt(n)):Yt(e,o,Bt(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+Bt(s):e.removeAttribute(`name`)}function Jt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Ut(e);return}n=n==null?``:``+Bt(n),t=t==null?n:``+Bt(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Ut(e)}function Yt(e,t,n){t===`number`&&Gt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+Bt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Zt(e,t,n){if(t!=null&&(t=``+Bt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+Bt(n)}function Qt(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(de(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=Bt(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Ut(e)}function $t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var en=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function tn(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||en.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function nn(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&tn(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&tn(e,o,t[o])}function rn(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var an=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),on=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sn(e){return on.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function cn(){}var ln=null;function un(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dn=null,fn=null;function pn(e){var t=Tt(e);if(t&&(e=t.stateNode)){var n=e[gt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(A(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+qt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[gt]||null;if(!a)throw Error(i(90));A(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Wt(r)}break a;case`textarea`:Zt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Xt(e,!!n.multiple,t,!1)}}}var mn=!1;function hn(e,t,n){if(mn)return e(t,n);mn=!0;try{return e(t)}finally{if(mn=!1,(dn!==null||fn!==null)&&(Fu(),dn&&(t=dn,e=fn,fn=dn=null,pn(t),e)))for(t=0;t<e.length;t++)pn(e[t])}}function gn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[gt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var _n=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),vn=!1;if(_n)try{var yn={};Object.defineProperty(yn,`passive`,{get:function(){vn=!0}}),window.addEventListener(`test`,yn,yn),window.removeEventListener(`test`,yn,yn)}catch{vn=!1}var bn=null,xn=null,Sn=null;function Cn(){if(Sn)return Sn;var e,t=xn,n=t.length,r,i=`value`in bn?bn.value:bn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Sn=i.slice(e,1<r?1-r:void 0)}function wn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tn(){return!0}function En(){return!1}function Dn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?Tn:En,this.isPropagationStopped=En,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=Tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=Tn)},persist:function(){},isPersistent:Tn}),t}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kn=Dn(On),An=h({},On,{view:0,detail:0}),jn=Dn(An),Mn,Nn,Pn,Fn=h({},An,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Pn&&(Pn&&e.type===`mousemove`?(Mn=e.screenX-Pn.screenX,Nn=e.screenY-Pn.screenY):Nn=Mn=0,Pn=e),Mn)},movementY:function(e){return`movementY`in e?e.movementY:Nn}}),In=Dn(Fn),Ln=h({},Fn,{dataTransfer:0}),Rn=Dn(Ln),zn=h({},An,{relatedTarget:0}),Bn=Dn(zn),Vn=h({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),Hn=Dn(Vn),Un=h({},On,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}}),Wn=Dn(Un),Gn=h({},On,{data:0}),Kn=Dn(Gn),qn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Jn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Yn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yn[e])?!!t[e]:!1}function Zn(){return Xn}var Qn=h({},An,{key:function(e){if(e.key){var t=qn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=wn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Jn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(e){return e.type===`keypress`?wn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?wn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}}),j=Dn(Qn),$n=h({},Fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),er=Dn($n),tr=h({},An,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),M=Dn(tr),nr=h({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Dn(nr),P=h({},Fn,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Dn(P),I=h({},On,{newState:0,oldState:0}),rr=Dn(I),ir=[9,13,27,32],ar=_n&&`CompositionEvent`in window,or=null;_n&&`documentMode`in document&&(or=document.documentMode);var sr=_n&&`TextEvent`in window&&!or,cr=_n&&(!ar||or&&8<or&&11>=or),lr=` `,ur=!1;function dr(e,t){switch(e){case`keyup`:return ir.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function fr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var pr=!1;function mr(e,t){switch(e){case`compositionend`:return fr(t);case`keypress`:return t.which===32?(ur=!0,lr):null;case`textInput`:return e=t.data,e===lr&&ur?null:e;default:return null}}function L(e,t){if(pr)return e===`compositionend`||!ar&&dr(e,t)?(e=Cn(),Sn=xn=bn=null,pr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return cr&&t.locale!==`ko`?null:t.data;default:return null}}var hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!hr[e.type]:t===`textarea`}function _r(e,t,n,r){dn?fn?fn.push(r):fn=[r]:dn=r,t=Ud(t,`onChange`),0<t.length&&(n=new kn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var vr=null,yr=null;function br(e){Id(e,0)}function xr(e){var t=Et(e);if(Wt(t))return e}function Sr(e,t){if(e===`change`)return t}var Cr=!1;if(_n){var R;if(_n){var wr=`oninput`in document;if(!wr){var Tr=document.createElement(`div`);Tr.setAttribute(`oninput`,`return;`),wr=typeof Tr.oninput==`function`}R=wr}else R=!1;Cr=R&&(!document.documentMode||9<document.documentMode)}function Er(){vr&&(vr.detachEvent(`onpropertychange`,Dr),yr=vr=null)}function Dr(e){if(e.propertyName===`value`&&xr(yr)){var t=[];_r(t,yr,e,un(e)),hn(br,t)}}function Or(e,t,n){e===`focusin`?(Er(),vr=t,yr=n,vr.attachEvent(`onpropertychange`,Dr)):e===`focusout`&&Er()}function kr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return xr(yr)}function Ar(e,t){if(e===`click`)return xr(t)}function jr(e,t){if(e===`input`||e===`change`)return xr(t)}function Mr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Nr=typeof Object.is==`function`?Object.is:Mr;function Pr(e,t){if(Nr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Me.call(t,i)||!Nr(e[i],t[i]))return!1}return!0}function Fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function z(e,t){var n=Fr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Fr(n)}}function Ir(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ir(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Gt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gt(e.document)}return t}function Rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var zr=_n&&`documentMode`in document&&11>=document.documentMode,Br=null,Vr=null,Hr=null,Ur=!1;function Wr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ur||Br==null||Br!==Gt(r)||(r=Br,`selectionStart`in r&&Rr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hr&&Pr(Hr,r)||(Hr=r,r=Ud(Vr,`onSelect`),0<r.length&&(t=new kn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Br)))}function B(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Gr={animationend:B(`Animation`,`AnimationEnd`),animationiteration:B(`Animation`,`AnimationIteration`),animationstart:B(`Animation`,`AnimationStart`),transitionrun:B(`Transition`,`TransitionRun`),transitionstart:B(`Transition`,`TransitionStart`),transitioncancel:B(`Transition`,`TransitionCancel`),transitionend:B(`Transition`,`TransitionEnd`)},Kr={},qr={};_n&&(qr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),`TransitionEvent`in window||delete Gr.transitionend.transition);function Jr(e){if(Kr[e])return Kr[e];if(!Gr[e])return e;var t=Gr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qr)return Kr[e]=t[n];return e}var Yr=Jr(`animationend`),Xr=Jr(`animationiteration`),Zr=Jr(`animationstart`),Qr=Jr(`transitionrun`),$r=Jr(`transitionstart`),ei=Jr(`transitioncancel`),ti=Jr(`transitionend`),ni=new Map,ri=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);ri.push(`scrollEnd`);function ii(e,t){ni.set(e,t),jt(t,[e])}var ai=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},oi=[],si=0,ci=0;function li(){for(var e=si,t=ci=si=0;t<e;){var n=oi[t];oi[t++]=null;var r=oi[t];oi[t++]=null;var i=oi[t];oi[t++]=null;var a=oi[t];if(oi[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&pi(n,i,a)}}function ui(e,t,n,r){oi[si++]=e,oi[si++]=t,oi[si++]=n,oi[si++]=r,ci|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function di(e,t,n,r){return ui(e,t,n,r),mi(e)}function fi(e,t){return ui(e,null,null,t),mi(e)}function pi(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Je(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function mi(e){if(50<Eu)throw Eu=0,Du=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var hi={};function gi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(e,t,n,r){return new gi(e,t,n,r)}function vi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yi(e,t){var n=e.alternate;return n===null?(n=_i(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function bi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function xi(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)vi(e)&&(s=1);else if(typeof e==`string`)s=op(e,n,_e.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case oe:return e=_i(31,n,t,a),e.elementType=oe,e.lanes=o,e;case y:return Si(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=_i(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case ne:return e=_i(13,n,t,a),e.elementType=ne,e.lanes=o,e;case re:return e=_i(19,n,t,a),e.elementType=re,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case te:s=10;break a;case ee:s=9;break a;case S:s=11;break a;case ie:s=14;break a;case ae:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=_i(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function Si(e,t,n,r){return e=_i(7,e,r,t),e.lanes=n,e}function Ci(e,t,n){return e=_i(6,e,null,t),e.lanes=n,e}function wi(e){var t=_i(18,null,null,0);return t.stateNode=e,t}function Ti(e,t,n){return t=_i(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ei=new WeakMap;function Di(e,t){if(typeof e==`object`&&e){var n=Ei.get(e);return n===void 0?(t={value:e,source:t,stack:je(t)},Ei.set(e,t),t):n}return{value:e,source:t,stack:je(t)}}var Oi=[],ki=0,Ai=null,ji=0,Mi=[],Ni=0,Pi=null,Fi=1,Ii=``;function Li(e,t){Oi[ki++]=ji,Oi[ki++]=Ai,Ai=e,ji=t}function Ri(e,t,n){Mi[Ni++]=Fi,Mi[Ni++]=Ii,Mi[Ni++]=Pi,Pi=e;var r=Fi;e=Ii;var i=32-Je(r)-1;r&=~(1<<i),n+=1;var a=32-Je(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fi=1<<32-Je(t)+i|n<<i|r,Ii=a+e}else Fi=1<<a|n<<i|r,Ii=e}function zi(e){e.return!==null&&(Li(e,1),Ri(e,1,0))}function Bi(e){for(;e===Ai;)Ai=Oi[--ki],Oi[ki]=null,ji=Oi[--ki],Oi[ki]=null;for(;e===Pi;)Pi=Mi[--Ni],Mi[Ni]=null,Ii=Mi[--Ni],Mi[Ni]=null,Fi=Mi[--Ni],Mi[Ni]=null}function Vi(e,t){Mi[Ni++]=Fi,Mi[Ni++]=Ii,Mi[Ni++]=Pi,Fi=t.id,Ii=t.overflow,Pi=e}var Hi=null,Ui=null,V=!1,Wi=null,Gi=!1,Ki=Error(i(519));function qi(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``));throw $i(Di(t,e)),Ki}function Ji(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[k]=e,t[gt]=r,n){case`dialog`:X(`cancel`,t),X(`close`,t);break;case`iframe`:case`object`:case`embed`:X(`load`,t);break;case`video`:case`audio`:for(n=0;n<Pd.length;n++)X(Pd[n],t);break;case`source`:X(`error`,t);break;case`img`:case`image`:case`link`:X(`error`,t),X(`load`,t);break;case`details`:X(`toggle`,t);break;case`input`:X(`invalid`,t),Jt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:X(`invalid`,t);break;case`textarea`:X(`invalid`,t),Qt(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Yd(t.textContent,n)?(r.popover!=null&&(X(`beforetoggle`,t),X(`toggle`,t)),r.onScroll!=null&&X(`scroll`,t),r.onScrollEnd!=null&&X(`scrollend`,t),r.onClick!=null&&(t.onclick=cn),t=!0):t=!1,t||qi(e,!0)}function Yi(e){for(Hi=e.return;Hi;)switch(Hi.tag){case 5:case 31:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:Hi=Hi.return}}function Xi(e){if(e!==Hi)return!1;if(!V)return Yi(e),V=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||cf(e.type,e.memoizedProps)),n=!n),n&&Ui&&qi(e),Yi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Ui=Df(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Ui=Df(e)}else t===27?(t=Ui,hf(e.type)?(e=Ef,Ef=null,Ui=e):Ui=t):Ui=Hi?Tf(e.stateNode.nextSibling):null;return!0}function Zi(){Ui=Hi=null,V=!1}function Qi(){var e=Wi;return e!==null&&(fu===null?fu=e:fu.push.apply(fu,e),Wi=null),e}function $i(e){Wi===null?Wi=[e]:Wi.push(e)}var ea=he(null),ta=null,na=null;function ra(e,t,n){E(ea,t._currentValue),t._currentValue=n}function ia(e){e._currentValue=ea.current,ge(ea)}function aa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function oa(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),aa(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),aa(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function sa(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Nr(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===be.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[hp]:e.push(hp))}a=a.return}e!==null&&oa(t,e,n,r),t.flags|=262144}function ca(e){for(e=e.firstContext;e!==null;){if(!Nr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function la(e){ta=e,na=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ua(e){return fa(ta,e)}function da(e,t){return ta===null&&la(e),fa(e,t)}function fa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},na===null){if(e===null)throw Error(i(308));na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else na=na.next=t;return n}var pa=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ma=t.unstable_scheduleCallback,ha=t.unstable_NormalPriority,ga={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _a(){return{controller:new pa,data:new Map,refCount:0}}function va(e){e.refCount--,e.refCount===0&&ma(ha,function(){e.controller.abort()})}var ya=null,ba=0,xa=0,Sa=null;function Ca(e,t){if(ya===null){var n=ya=[];ba=0,xa=Ed(),Sa={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return ba++,t.then(wa,wa),t}function wa(){if(--ba===0&&ya!==null){Sa!==null&&(Sa.status=`fulfilled`);var e=ya;ya=null,xa=0,Sa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ta(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var Ea=w.S;w.S=function(e,t){hu=D(),typeof t==`object`&&t&&typeof t.then==`function`&&Ca(e,t),Ea!==null&&Ea(e,t)};var Da=he(null);function Oa(){var e=Da.current;return e===null?Ql.pooledCache:e}function ka(e,t){t===null?E(Da,Da.current):E(Da,t.pool)}function Aa(){var e=Oa();return e===null?null:{parent:ga._currentValue,pool:e}}var ja=Error(i(460)),Ma=Error(i(474)),Na=Error(i(542)),Pa={then:function(){}};function Fa(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Ia(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(cn,cn),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ba(e),e;default:if(typeof t.status==`string`)t.then(cn,cn);else{if(e=Ql,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ba(e),e}throw Ra=t,ja}}function La(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Ra=e,ja):e}}var Ra=null;function za(){if(Ra===null)throw Error(i(459));var e=Ra;return Ra=null,e}function Ba(e){if(e===ja||e===Na)throw Error(i(483))}var Va=null,Ha=0;function Ua(e){var t=Ha;return Ha+=1,Va===null&&(Va=[]),Ia(Va,e,t)}function Wa(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ga(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Ka(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=yi(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=Ci(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===ae&&La(i)===t.type)?(t=a(t,n.props),Wa(t,n),t.return=e,t):(t=xi(n.type,n.key,n.props,null,e.mode,r),Wa(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Ti(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=Si(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=Ci(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=xi(t.type,t.key,t.props,null,e.mode,n),Wa(n,t),n.return=e,n;case v:return t=Ti(t,e.mode,n),t.return=e,t;case ae:return t=La(t),f(e,t,n)}if(de(t)||le(t))return t=Si(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Ua(t),n);if(t.$$typeof===te)return f(e,da(e,t),n);Ga(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case ae:return n=La(n),p(e,t,n,r)}if(de(n)||le(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Ua(n),r);if(n.$$typeof===te)return p(e,t,da(e,n),r);Ga(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case ae:return r=La(r),m(e,t,n,r,i)}if(de(r)||le(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Ua(r),i);if(r.$$typeof===te)return m(e,t,n,da(t,r),i);Ga(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),V&&Li(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return V&&Li(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),V&&Li(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),V&&Li(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return V&&Li(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),V&&Li(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===ae&&La(l)===r.type){n(e,r.sibling),c=a(r,o.props),Wa(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=Si(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=xi(o.type,o.key,o.props,null,e.mode,c),Wa(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=Ti(o,e.mode,c),c.return=e,e=c}return s(e);case ae:return o=La(o),b(e,r,o,c)}if(de(o))return h(e,r,o,c);if(le(o)){if(l=le(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Ua(o),c);if(o.$$typeof===te)return b(e,r,da(e,o),c);Ga(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=Ci(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Ha=0;var i=b(e,t,n,r);return Va=null,i}catch(t){if(t===ja||t===Na)throw t;var a=_i(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var qa=Ka(!0),Ja=Ka(!1),Ya=!1;function Xa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function H(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Za(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Qa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=mi(e),pi(e,null,n),t}return ui(e,r,t,n),mi(e)}function $a(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lt(e,n)}}function eo(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var to=!1;function no(){if(to){var e=Sa;if(e!==null)throw e}}function ro(e,t,n,r){to=!1;var i=e.updateQueue;Ya=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(J&f)===f:(r&f)===f){f!==0&&f===xa&&(to=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:Ya=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),ou|=o,e.lanes=o,e.memoizedState=d}}function io(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function ao(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)io(n[e],t)}var oo=he(null),so=he(0);function co(e,t){e=iu,E(so,e),E(oo,t),iu=e|t.baseLanes}function lo(){E(so,iu),E(oo,oo.current)}function uo(){iu=so.current,ge(oo),ge(so)}var fo=he(null),po=null;function mo(e){var t=e.alternate;E(yo,yo.current&1),E(fo,e),po===null&&(t===null||oo.current!==null||t.memoizedState!==null)&&(po=e)}function ho(e){E(yo,yo.current),E(fo,e),po===null&&(po=e)}function go(e){e.tag===22?(E(yo,yo.current),E(fo,e),po===null&&(po=e)):_o(e)}function _o(){E(yo,yo.current),E(fo,fo.current)}function vo(e){ge(fo),po===e&&(po=null),ge(yo)}var yo=he(0);function bo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Sf(n)||Cf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xo=0,U=null,W=null,So=null,Co=!1,wo=!1,To=!1,Eo=0,Do=0,Oo=null,ko=0;function Ao(){throw Error(i(321))}function jo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nr(e[n],t[n]))return!1;return!0}function Mo(e,t,n,r,i,a){return xo=a,U=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,w.H=e===null||e.memoizedState===null?Xs:Zs,To=!1,a=n(r,i),To=!1,wo&&(a=Po(t,n,r,i)),No(e),a}function No(e){w.H=Ys;var t=W!==null&&W.next!==null;if(xo=0,So=W=U=null,Co=!1,Do=0,Oo=null,t)throw Error(i(300));e===null||mc||(e=e.dependencies,e!==null&&ca(e)&&(mc=!0))}function Po(e,t,n,r){U=e;var a=0;do{if(wo&&(Oo=null),Do=0,wo=!1,25<=a)throw Error(i(301));if(a+=1,So=W=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}w.H=Qs,o=t(n,r)}while(wo);return o}function Fo(){var e=w.H,t=e.useState()[0];return t=typeof t.then==`function`?Vo(t):t,e=e.useState()[0],(W===null?null:W.memoizedState)!==e&&(U.flags|=1024),t}function G(){var e=Eo!==0;return Eo=0,e}function Io(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Lo(e){if(Co){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Co=!1}xo=0,So=W=U=null,wo=!1,Do=Eo=0,Oo=null}function Ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return So===null?U.memoizedState=So=e:So=So.next=e,So}function zo(){if(W===null){var e=U.alternate;e=e===null?null:e.memoizedState}else e=W.next;var t=So===null?U.memoizedState:So.next;if(t!==null)So=t,W=e;else{if(e===null)throw U.alternate===null?Error(i(467)):Error(i(310));W=e,e={memoizedState:W.memoizedState,baseState:W.baseState,baseQueue:W.baseQueue,queue:W.queue,next:null},So===null?U.memoizedState=So=e:So=So.next=e}return So}function Bo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vo(e){var t=Do;return Do+=1,Oo===null&&(Oo=[]),e=Ia(Oo,e,t),t=U,(So===null?t.memoizedState:So.next)===null&&(t=t.alternate,w.H=t===null||t.memoizedState===null?Xs:Zs),e}function Ho(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Vo(e);if(e.$$typeof===te)return ua(e)}throw Error(i(438,String(e)))}function Uo(e){var t=null,n=U.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=U.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Bo(),U.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=se;return t.index++,n}function Wo(e,t){return typeof t==`function`?t(e):t}function Go(e){var t=zo();return Ko(t,W,e)}function Ko(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(xo&f)===f:(J&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===xa&&(d=!0);else if((xo&p)===p){u=u.next,p===xa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,U.lanes|=p,ou|=p;f=u.action,To&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,U.lanes|=f,ou|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Nr(o,e.memoizedState)&&(mc=!0,d&&(n=Sa,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function qo(e){var t=zo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Nr(o,t.memoizedState)||(mc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Jo(e,t,n){var r=U,a=zo(),o=V;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Nr((W||a).memoizedState,n);if(s&&(a.memoizedState=n,mc=!0),a=a.queue,xs(Zo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||So!==null&&So.memoizedState.tag&1){if(r.flags|=2048,gs(9,{destroy:void 0},Xo.bind(null,r,a,n,t),null),Ql===null)throw Error(i(349));o||xo&127||Yo(r,t,n)}return n}function Yo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=U.updateQueue,t===null?(t=Bo(),U.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Xo(e,t,n,r){t.value=n,t.getSnapshot=r,Qo(t)&&$o(e)}function Zo(e,t,n){return n(function(){Qo(t)&&$o(e)})}function Qo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nr(e,n)}catch{return!0}}function $o(e){var t=fi(e,2);t!==null&&Au(t,e,2)}function es(e){var t=Ro();if(typeof e==`function`){var n=e;if(e=n(),To){qe(!0);try{n()}finally{qe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:e},t}function ts(e,t,n,r){return e.baseState=n,Ko(e,W,typeof r==`function`?r:Wo)}function ns(e,t,n,r,a){if(Ks(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};w.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,rs(t,o)):(o.next=n.next,t.pending=n.next=o)}}function rs(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=w.T,o={};w.T=o;try{var s=n(i,r),c=w.S;c!==null&&c(o,s),os(e,t,s)}catch(n){cs(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),w.T=a}}else try{a=n(i,r),os(e,t,a)}catch(n){cs(e,t,n)}}function os(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){ss(e,t,n)},function(n){return cs(e,t,n)}):ss(e,t,n)}function ss(e,t,n){t.status=`fulfilled`,t.value=n,ls(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,rs(e,n)))}function cs(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,ls(t),t=t.next;while(t!==r)}e.action=null}function ls(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function us(e,t){return t}function ds(e,t){if(V){var n=Ql.formState;if(n!==null){a:{var r=U;if(V){if(Ui){b:{for(var i=Ui,a=Gi;i.nodeType!==8;){if(!a){i=null;break b}if(i=Tf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Ui=Tf(i.nextSibling),r=i.data===`F!`;break a}}qi(r)}r=!1}r&&(t=n[0])}}return n=Ro(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:t},n.queue=r,n=Us.bind(null,U,r),r.dispatch=n,r=es(!1),a=Gs.bind(null,U,!1,r.queue),r=Ro(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=ns.bind(null,U,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function fs(e){var t=zo();return ps(t,W,e)}function ps(e,t,n){if(t=Ko(e,t,us)[0],e=Go(Wo)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Vo(t)}catch(e){throw e===ja?Na:e}else r=t;t=zo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(U.flags|=2048,gs(9,{destroy:void 0},ms.bind(null,i,n),null)),[r,a,e]}function ms(e,t){e.action=t}function hs(e){var t=zo(),n=W;if(n!==null)return ps(t,n,e);zo(),t=t.memoizedState,n=zo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function gs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=U.updateQueue,t===null&&(t=Bo(),U.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function _s(){return zo().memoizedState}function vs(e,t,n,r){var i=Ro();U.flags|=e,i.memoizedState=gs(1|t,{destroy:void 0},n,r===void 0?null:r)}function ys(e,t,n,r){var i=zo();r=r===void 0?null:r;var a=i.memoizedState.inst;W!==null&&r!==null&&jo(r,W.memoizedState.deps)?i.memoizedState=gs(t,a,n,r):(U.flags|=e,i.memoizedState=gs(1|t,a,n,r))}function bs(e,t){vs(8390656,8,e,t)}function xs(e,t){ys(2048,8,e,t)}function Ss(e){U.flags|=4;var t=U.updateQueue;if(t===null)t=Bo(),U.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Cs(e){var t=zo().memoizedState;return Ss({ref:t,nextImpl:e}),function(){if(K&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function ws(e,t){return ys(4,2,e,t)}function Ts(e,t){return ys(4,4,e,t)}function Es(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ds(e,t,n){n=n==null?null:n.concat([e]),ys(4,4,Es.bind(null,t,e),n)}function Os(){}function ks(e,t){var n=zo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&jo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function As(e,t){var n=zo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&jo(t,r[1]))return r[0];if(r=e(),To){qe(!0);try{e()}finally{qe(!1)}}return n.memoizedState=[r,t],r}function js(e,t,n){return n===void 0||xo&1073741824&&!(J&261930)?e.memoizedState=t:(e.memoizedState=n,e=ku(),U.lanes|=e,ou|=e,n)}function Ms(e,t,n,r){return Nr(n,t)?n:oo.current===null?!(xo&42)||xo&1073741824&&!(J&261930)?(mc=!0,e.memoizedState=n):(e=ku(),U.lanes|=e,ou|=e,t):(e=js(e,n,r),Nr(e,t)||(mc=!0),e)}function Ns(e,t,n,r,i){var a=T.p;T.p=a!==0&&8>a?a:8;var o=w.T,s={};w.T=s,Gs(e,!1,t,n);try{var c=i(),l=w.S;if(l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`){var u=Ta(c,r);Ws(e,t,u,Ou(e))}else Ws(e,t,r,Ou(e))}catch(n){Ws(e,t,{then:function(){},status:`rejected`,reason:n},Ou())}finally{T.p=a,o!==null&&s.types!==null&&(o.types=s.types),w.T=o}}function Ps(){}function Fs(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Is(e).queue;Ns(e,a,t,fe,n===null?Ps:function(){return Ls(e),n(r)})}function Is(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:fe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ls(e){var t=Is(e);t.next===null&&(t=e.alternate.memoizedState),Ws(e,t.next.queue,{},Ou())}function Rs(){return ua(hp)}function zs(){return zo().memoizedState}function Bs(){return zo().memoizedState}function Vs(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ou();e=Za(n);var r=Qa(t,e,n);r!==null&&(Au(r,t,n),$a(r,t,n)),t={cache:_a()},e.payload=t;return}t=t.return}}function Hs(e,t,n){var r=Ou();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ks(e)?qs(t,n):(n=di(e,t,n,r),n!==null&&(Au(n,e,r),Js(n,t,r)))}function Us(e,t,n){var r=Ou();Ws(e,t,n,r)}function Ws(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))qs(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Nr(s,o))return ui(e,t,i,0),Ql===null&&li(),!1}catch{}if(n=di(e,t,i,r),n!==null)return Au(n,e,r),Js(n,t,r),!0}return!1}function Gs(e,t,n,r){if(r={lane:2,revertLane:Ed(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ks(e)){if(t)throw Error(i(479))}else t=di(e,n,r,2),t!==null&&Au(t,e,2)}function Ks(e){var t=e.alternate;return e===U||t!==null&&t===U}function qs(e,t){wo=Co=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Js(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lt(e,n)}}var Ys={readContext:ua,use:Ho,useCallback:Ao,useContext:Ao,useEffect:Ao,useImperativeHandle:Ao,useLayoutEffect:Ao,useInsertionEffect:Ao,useMemo:Ao,useReducer:Ao,useRef:Ao,useState:Ao,useDebugValue:Ao,useDeferredValue:Ao,useTransition:Ao,useSyncExternalStore:Ao,useId:Ao,useHostTransitionStatus:Ao,useFormState:Ao,useActionState:Ao,useOptimistic:Ao,useMemoCache:Ao,useCacheRefresh:Ao};Ys.useEffectEvent=Ao;var Xs={readContext:ua,use:Ho,useCallback:function(e,t){return Ro().memoizedState=[e,t===void 0?null:t],e},useContext:ua,useEffect:bs,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),vs(4194308,4,Es.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vs(4194308,4,e,t)},useInsertionEffect:function(e,t){vs(4,2,e,t)},useMemo:function(e,t){var n=Ro();t=t===void 0?null:t;var r=e();if(To){qe(!0);try{e()}finally{qe(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Ro();if(n!==void 0){var i=n(t);if(To){qe(!0);try{n(t)}finally{qe(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Hs.bind(null,U,e),[r.memoizedState,e]},useRef:function(e){var t=Ro();return e={current:e},t.memoizedState=e},useState:function(e){e=es(e);var t=e.queue,n=Us.bind(null,U,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Os,useDeferredValue:function(e,t){var n=Ro();return js(n,e,t)},useTransition:function(){var e=es(!1);return e=Ns.bind(null,U,e.queue,!0,!1),Ro().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=U,a=Ro();if(V){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Ql===null)throw Error(i(349));J&127||Yo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,bs(Zo.bind(null,r,o,e),[e]),r.flags|=2048,gs(9,{destroy:void 0},Xo.bind(null,r,o,n,t),null),n},useId:function(){var e=Ro(),t=Ql.identifierPrefix;if(V){var n=Ii,r=Fi;n=(r&~(1<<32-Je(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=Eo++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=ko++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Rs,useFormState:ds,useActionState:ds,useOptimistic:function(e){var t=Ro();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Gs.bind(null,U,!0,n),n.dispatch=t,[e,t]},useMemoCache:Uo,useCacheRefresh:function(){return Ro().memoizedState=Vs.bind(null,U)},useEffectEvent:function(e){var t=Ro(),n={impl:e};return t.memoizedState=n,function(){if(K&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},Zs={readContext:ua,use:Ho,useCallback:ks,useContext:ua,useEffect:xs,useImperativeHandle:Ds,useInsertionEffect:ws,useLayoutEffect:Ts,useMemo:As,useReducer:Go,useRef:_s,useState:function(){return Go(Wo)},useDebugValue:Os,useDeferredValue:function(e,t){var n=zo();return Ms(n,W.memoizedState,e,t)},useTransition:function(){var e=Go(Wo)[0],t=zo().memoizedState;return[typeof e==`boolean`?e:Vo(e),t]},useSyncExternalStore:Jo,useId:zs,useHostTransitionStatus:Rs,useFormState:fs,useActionState:fs,useOptimistic:function(e,t){var n=zo();return ts(n,W,e,t)},useMemoCache:Uo,useCacheRefresh:Bs};Zs.useEffectEvent=Cs;var Qs={readContext:ua,use:Ho,useCallback:ks,useContext:ua,useEffect:xs,useImperativeHandle:Ds,useInsertionEffect:ws,useLayoutEffect:Ts,useMemo:As,useReducer:qo,useRef:_s,useState:function(){return qo(Wo)},useDebugValue:Os,useDeferredValue:function(e,t){var n=zo();return W===null?js(n,e,t):Ms(n,W.memoizedState,e,t)},useTransition:function(){var e=qo(Wo)[0],t=zo().memoizedState;return[typeof e==`boolean`?e:Vo(e),t]},useSyncExternalStore:Jo,useId:zs,useHostTransitionStatus:Rs,useFormState:hs,useActionState:hs,useOptimistic:function(e,t){var n=zo();return W===null?(n.baseState=e,[e,n.queue.dispatch]):ts(n,W,e,t)},useMemoCache:Uo,useCacheRefresh:Bs};Qs.useEffectEvent=Cs;function $s(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ec={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ou(),i=Za(r);i.payload=t,n!=null&&(i.callback=n),t=Qa(e,i,r),t!==null&&(Au(t,e,r),$a(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ou(),i=Za(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Qa(e,i,r),t!==null&&(Au(t,e,r),$a(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ou(),r=Za(n);r.tag=2,t!=null&&(r.callback=t),t=Qa(e,r,n),t!==null&&(Au(t,e,n),$a(t,e,n))}};function tc(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Pr(n,r)||!Pr(i,a):!0}function nc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ec.enqueueReplaceState(t,t.state,null)}function rc(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function ic(e){ai(e)}function ac(e){console.error(e)}function oc(e){ai(e)}function sc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function cc(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function lc(e,t,n){return n=Za(n),n.tag=3,n.payload={element:null},n.callback=function(){sc(e,t)},n}function uc(e){return e=Za(e),e.tag=3,e}function dc(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){cc(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){cc(t,n,r),typeof i!=`function`&&(vu===null?vu=new Set([this]):vu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function fc(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&sa(t,n,a,!0),n=fo.current,n!==null){switch(n.tag){case 31:case 13:return po===null?Hu():n.alternate===null&&au===0&&(au=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Pa?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),od(e,r,a)),!1;case 22:return n.flags|=65536,r===Pa?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),od(e,r,a)),!1}throw Error(i(435,n.tag))}return od(e,r,a),Hu(),!1}if(V)return t=fo.current,t===null?(r!==Ki&&(t=Error(i(423),{cause:r}),$i(Di(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=Di(r,n),a=lc(e.stateNode,r,a),eo(e,a),au!==4&&(au=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Ki&&(e=Error(i(422),{cause:r}),$i(Di(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=Di(o,n),du===null?du=[o]:du.push(o),au!==4&&(au=2),t===null)return!0;r=Di(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=lc(n.stateNode,r,e),eo(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(vu===null||!vu.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=uc(a),dc(a,e,n,r),eo(n,a),!1}n=n.return}while(n!==null);return!1}var pc=Error(i(461)),mc=!1;function hc(e,t,n,r){t.child=e===null?Ja(t,null,n,r):qa(t,e.child,n,r)}function gc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return la(t),r=Mo(e,t,n,o,a,i),s=G(),e!==null&&!mc?(Io(e,t,i),Bc(e,t,i)):(V&&s&&zi(t),t.flags|=1,hc(e,t,r,i),t.child)}function _c(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!vi(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,vc(e,t,a,r,i)):(e=xi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Vc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Pr:n,n(o,r)&&e.ref===t.ref)return Bc(e,t,i)}return t.flags|=1,e=yi(a,r),e.ref=t.ref,e.return=t,t.child=e}function vc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Pr(a,r)&&e.ref===t.ref)if(mc=!1,t.pendingProps=r=a,Vc(e,i))e.flags&131072&&(mc=!0);else return t.lanes=e.lanes,Bc(e,t,i)}return Ec(e,t,n,r,i)}function yc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return xc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ka(t,a===null?null:a.cachePool),a===null?lo():co(t,a),go(t);else return r=t.lanes=536870912,xc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&ka(t,null),lo(),_o(t)):(ka(t,a.cachePool),co(t,a),_o(t),t.memoizedState=null);return hc(e,t,i,n),t.child}function bc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function xc(e,t,n,r,i){var a=Oa();return a=a===null?null:{parent:ga._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&ka(t,null),lo(),go(t),e!==null&&sa(e,t,r,!0),t.childLanes=i,null}function Sc(e,t){return t=Fc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Cc(e,t,n){return qa(t,e.child,null,n),e=Sc(t,t.pendingProps),e.flags|=2,vo(t),t.memoizedState=null,e}function wc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(V){if(r.mode===`hidden`)return e=Sc(t,r),t.lanes=536870912,bc(null,e);if(ho(t),(e=Ui)?(e=xf(e,Gi),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Pi===null?null:{id:Fi,overflow:Ii},retryLane:536870912,hydrationErrors:null},n=wi(e),n.return=t,t.child=n,Hi=t,Ui=null)):e=null,e===null)throw qi(t);return t.lanes=536870912,null}return Sc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(ho(t),a)if(t.flags&256)t.flags&=-257,t=Cc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(mc||sa(e,t,n,!1),a=(n&e.childLanes)!==0,mc||a){if(r=Ql,r!==null&&(s=ut(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,fi(e,s),Au(r,e,s),pc;Hu(),t=Cc(e,t,n)}else e=o.treeContext,Ui=Tf(s.nextSibling),Hi=t,V=!0,Wi=null,Gi=!1,e!==null&&Vi(t,e),t=Sc(t,r),t.flags|=4096;return t}return e=yi(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Tc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ec(e,t,n,r,i){return la(t),n=Mo(e,t,n,r,void 0,i),r=G(),e!==null&&!mc?(Io(e,t,i),Bc(e,t,i)):(V&&r&&zi(t),t.flags|=1,hc(e,t,n,i),t.child)}function Dc(e,t,n,r,i,a){return la(t),t.updateQueue=null,n=Po(t,r,n,i),No(e),r=G(),e!==null&&!mc?(Io(e,t,a),Bc(e,t,a)):(V&&r&&zi(t),t.flags|=1,hc(e,t,n,a),t.child)}function Oc(e,t,n,r,i){if(la(t),t.stateNode===null){var a=hi,o=n.contextType;typeof o==`object`&&o&&(a=ua(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=ec,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Xa(t),o=n.contextType,a.context=typeof o==`object`&&o?ua(o):hi,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&($s(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&ec.enqueueReplaceState(a,a.state,null),ro(t,r,a,i),no(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=rc(n,s);a.props=c;var l=a.context,u=n.contextType;o=hi,typeof u==`object`&&u&&(o=ua(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&nc(t,a,r,o),Ya=!1;var f=t.memoizedState;a.state=f,ro(t,r,a,i),no(),l=t.memoizedState,s||f!==l||Ya?(typeof d==`function`&&($s(t,n,d,r),l=t.memoizedState),(c=Ya||tc(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,H(e,t),o=t.memoizedProps,u=rc(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=hi,typeof l==`object`&&l&&(c=ua(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&nc(t,a,r,c),Ya=!1,f=t.memoizedState,a.state=f,ro(t,r,a,i),no();var p=t.memoizedState;o!==d||f!==p||Ya||e!==null&&e.dependencies!==null&&ca(e.dependencies)?(typeof s==`function`&&($s(t,n,s,r),p=t.memoizedState),(u=Ya||tc(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&ca(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Tc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=qa(t,e.child,null,i),t.child=qa(t,null,n,i)):hc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Bc(e,t,i),e}function kc(e,t,n,r){return Zi(),t.flags|=256,hc(e,t,n,r),t.child}var Ac={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jc(e){return{baseLanes:e,cachePool:Aa()}}function Mc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=lu),e}function Nc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(yo.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(V){if(a?mo(t):_o(t),(e=Ui)?(e=xf(e,Gi),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Pi===null?null:{id:Fi,overflow:Ii},retryLane:536870912,hydrationErrors:null},n=wi(e),n.return=t,t.child=n,Hi=t,Ui=null)):e=null,e===null)throw qi(t);return Cf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(_o(t),a=t.mode,c=Fc({mode:`hidden`,children:c},a),r=Si(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=jc(n),r.childLanes=Mc(e,s,n),t.memoizedState=Ac,bc(null,r)):(mo(t),Pc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(mo(t),t.flags&=-257,t=Ic(e,t,n)):t.memoizedState===null?(_o(t),c=r.fallback,a=t.mode,r=Fc({mode:`visible`,children:r.children},a),c=Si(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,qa(t,e.child,null,n),r=t.child,r.memoizedState=jc(n),r.childLanes=Mc(e,s,n),t.memoizedState=Ac,t=bc(null,r)):(_o(t),t.child=e.child,t.flags|=128,t=null);else if(mo(t),Cf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,$i({value:r,source:null,stack:null}),t=Ic(e,t,n)}else if(mc||sa(e,t,n,!1),s=(n&e.childLanes)!==0,mc||s){if(s=Ql,s!==null&&(r=ut(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,fi(e,r),Au(s,e,r),pc;Sf(c)||Hu(),t=Ic(e,t,n)}else Sf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Ui=Tf(c.nextSibling),Hi=t,V=!0,Wi=null,Gi=!1,e!==null&&Vi(t,e),t=Pc(t,r.children),t.flags|=4096);return t}return a?(_o(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=yi(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=Si(c,a,n,null),c.flags|=2):c=yi(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,bc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=jc(n):(a=c.cachePool,a===null?a=Aa():(l=ga._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=Mc(e,s,n),t.memoizedState=Ac,bc(e.child,r)):(mo(t),n=e.child,e=n.sibling,n=yi(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Pc(e,t){return t=Fc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Fc(e,t){return e=_i(22,e,null,t),e.lanes=0,e}function Ic(e,t,n){return qa(t,e.child,null,n),e=Pc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),aa(e.return,t,n)}function Rc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function zc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=yo.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,E(yo,o),hc(e,t,r,n),r=V?ji:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lc(e,n,t);else if(e.tag===19)Lc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&bo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Rc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&bo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Rc(t,!0,n,null,a,r);break;case`together`:Rc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Bc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ou|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(sa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=yi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Vc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&ca(e))):!0}function Hc(e,t,n){switch(t.tag){case 3:xe(t,t.stateNode.containerInfo),ra(t,ga,e.memoizedState.cache),Zi();break;case 27:case 5:Ce(t);break;case 4:xe(t,t.stateNode.containerInfo);break;case 10:ra(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ho(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(mo(t),e=Bc(e,t,n),e===null?null:e.sibling):Nc(e,t,n):(mo(t),t.flags|=128,null);mo(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(sa(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return zc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),E(yo,yo.current),r)break;return null;case 22:return t.lanes=0,yc(e,t,n,t.pendingProps);case 24:ra(t,ga,e.memoizedState.cache)}return Bc(e,t,n)}function Uc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)mc=!0;else{if(!Vc(e,n)&&!(t.flags&128))return mc=!1,Hc(e,t,n);mc=!!(e.flags&131072)}else mc=!1,V&&t.flags&1048576&&Ri(t,ji,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=La(t.elementType),t.type=e,typeof e==`function`)vi(e)?(r=rc(e,r),t.tag=1,t=Oc(null,t,e,r,n)):(t.tag=0,t=Ec(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===S){t.tag=11,t=gc(null,t,e,r,n);break a}else if(a===ie){t.tag=14,t=_c(null,t,e,r,n);break a}}throw t=ue(e)||e,Error(i(306,t,``))}}return t;case 0:return Ec(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=rc(r,t.pendingProps),Oc(e,t,r,a,n);case 3:a:{if(xe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,H(e,t),ro(t,r,null,n);var s=t.memoizedState;if(r=s.cache,ra(t,ga,r),r!==o.cache&&oa(t,[ga],n,!0),no(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=kc(e,t,r,n);break a}else if(r!==a){a=Di(Error(i(424)),t),$i(a),t=kc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Ui=Tf(e.firstChild),Hi=t,V=!0,Wi=null,Gi=!0,n=Ja(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Zi(),r===a){t=Bc(e,t,n);break a}hc(e,t,r,n)}t=t.child}return t;case 26:return Tc(e,t),e===null?(n=Kf(t.type,null,t.pendingProps,null))?t.memoizedState=n:V||(n=t.type,e=t.pendingProps,r=rf(ye.current).createElement(n),r[k]=t,r[gt]=e,Zd(r,n,e),Ot(r),t.stateNode=r):t.memoizedState=Kf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ce(t),e===null&&V&&(r=t.stateNode=kf(t.type,t.pendingProps,ye.current),Hi=t,Gi=!0,a=Ui,hf(t.type)?(Ef=a,Ui=Tf(r.firstChild)):Ui=a),hc(e,t,t.pendingProps.children,n),Tc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&V&&((a=r=Ui)&&(r=yf(r,t.type,t.pendingProps,Gi),r===null?a=!1:(t.stateNode=r,Hi=t,Ui=Tf(r.firstChild),Gi=!1,a=!0)),a||qi(t)),Ce(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,cf(a,o)?r=null:s!==null&&cf(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=Mo(e,t,Fo,null,null,n),hp._currentValue=a),Tc(e,t),hc(e,t,r,n),t.child;case 6:return e===null&&V&&((e=n=Ui)&&(n=bf(n,t.pendingProps,Gi),n===null?e=!1:(t.stateNode=n,Hi=t,Ui=null,e=!0)),e||qi(t)),null;case 13:return Nc(e,t,n);case 4:return xe(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qa(t,null,r,n):hc(e,t,r,n),t.child;case 11:return gc(e,t,t.type,t.pendingProps,n);case 7:return hc(e,t,t.pendingProps,n),t.child;case 8:return hc(e,t,t.pendingProps.children,n),t.child;case 12:return hc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ra(t,t.type,r.value),hc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,la(t),a=ua(a),r=r(a),t.flags|=1,hc(e,t,r,n),t.child;case 14:return _c(e,t,t.type,t.pendingProps,n);case 15:return vc(e,t,t.type,t.pendingProps,n);case 19:return zc(e,t,n);case 31:return wc(e,t,n);case 22:return yc(e,t,n,t.pendingProps);case 24:return la(t),r=ua(ga),e===null?(a=Oa(),a===null&&(a=Ql,o=_a(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Xa(t),ra(t,ga,a)):((e.lanes&n)!==0&&(H(e,t),ro(t,null,null,n),no()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,ra(t,ga,r),r!==a.cache&&oa(t,[ga],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),ra(t,ga,r))),hc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Wc(e){e.flags|=4}function Gc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(zu())e.flags|=8192;else throw Ra=Pa,Ma}else e.flags&=-16777217}function Kc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!sp(t))if(zu())e.flags|=8192;else throw Ra=Pa,Ma}function qc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:it(),e.lanes|=t,uu|=t)}function Jc(e,t){if(!V)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yc(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xc(e,t,n){var r=t.pendingProps;switch(Bi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yc(t),null;case 1:return Yc(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ia(ga),Se(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Xi(t)?Wc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qi())),Yc(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(Wc(t),o===null?(Yc(t),Gc(t,a,null,r,n)):(Yc(t),Kc(t,o))):o?o===e.memoizedState?(Yc(t),t.flags&=-16777217):(Wc(t),Yc(t),Kc(t,o)):(e=e.memoizedProps,e!==r&&Wc(t),Yc(t),Gc(t,a,e,r,n)),null;case 27:if(we(t),n=ye.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Wc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Yc(t),null}e=_e.current,Xi(t)?Ji(t,e):(e=kf(a,r,n),t.stateNode=e,Wc(t))}return Yc(t),null;case 5:if(we(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Wc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Yc(t),null}if(o=_e.current,Xi(t))Ji(t,o);else{var s=rf(ye.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[k]=t,o[gt]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Zd(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Wc(t)}}return Yc(t),Gc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Wc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=ye.current,Xi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Hi,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[k]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Yd(e.nodeValue,n)),e||qi(t,!0)}else e=rf(e).createTextNode(r),e[k]=t,t.stateNode=e}return Yc(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Xi(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[k]=t}else Zi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yc(t),e=!1}else n=Qi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(vo(t),t):(vo(t),null);if(t.flags&128)throw Error(i(558))}return Yc(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Xi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[k]=t}else Zi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yc(t),a=!1}else a=Qi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(vo(t),t):(vo(t),null)}return vo(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),qc(t,t.updateQueue),Yc(t),null);case 4:return Se(),e===null&&zd(t.stateNode.containerInfo),Yc(t),null;case 10:return ia(t.type),Yc(t),null;case 19:if(ge(yo),r=t.memoizedState,r===null)return Yc(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)Jc(r,!1);else{if(au!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=bo(e),o!==null){for(t.flags|=128,Jc(r,!1),e=o.updateQueue,t.updateQueue=e,qc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)bi(n,e),n=n.sibling;return E(yo,yo.current&1|2),V&&Li(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&D()>gu&&(t.flags|=128,a=!0,Jc(r,!1),t.lanes=4194304)}else{if(!a)if(e=bo(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,qc(t,e),Jc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!V)return Yc(t),null}else 2*D()-r.renderingStartTime>gu&&n!==536870912&&(t.flags|=128,a=!0,Jc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(Yc(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=D(),e.sibling=null,n=yo.current,E(yo,a?n&1|2:n&1),V&&Li(t,r.treeForkCount),e);case 22:case 23:return vo(t),uo(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Yc(t),t.subtreeFlags&6&&(t.flags|=8192)):Yc(t),n=t.updateQueue,n!==null&&qc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&ge(Da),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ia(ga),Yc(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Zc(e,t){switch(Bi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ia(ga),Se(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return we(t),null;case 31:if(t.memoizedState!==null){if(vo(t),t.alternate===null)throw Error(i(340));Zi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(vo(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Zi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(yo),null;case 4:return Se(),null;case 10:return ia(t.type),null;case 22:case 23:return vo(t),uo(),e!==null&&ge(Da),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ia(ga),null;case 25:return null;default:return null}}function Qc(e,t){switch(Bi(t),t.tag){case 3:ia(ga),Se();break;case 26:case 27:case 5:we(t);break;case 4:Se();break;case 31:t.memoizedState!==null&&vo(t);break;case 13:vo(t);break;case 19:ge(yo);break;case 10:ia(t.type);break;case 22:case 23:vo(t),uo(),e!==null&&ge(Da);break;case 24:ia(ga)}}function $c(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Y(t,t.return,e)}}function el(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Y(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Y(t,t.return,e)}}function tl(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{ao(t,n)}catch(t){Y(e,e.return,t)}}}function nl(e,t,n){n.props=rc(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Y(e,t,n)}}function rl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Y(e,t,n)}}function il(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Y(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Y(e,t,n)}else n.current=null}function al(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Y(e,e.return,t)}}function ol(e,t,n){try{var r=e.stateNode;Qd(r,e.type,n,t),r[gt]=t}catch(t){Y(e,e.return,t)}}function sl(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&hf(e.type)||e.tag===4}function cl(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&hf(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=cn));else if(r!==4&&(r===27&&hf(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(ll(e,t,n),e=e.sibling;e!==null;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&hf(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(ul(e,t,n),e=e.sibling;e!==null;)ul(e,t,n),e=e.sibling}function dl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Zd(t,r,n),t[k]=e,t[gt]=n}catch(t){Y(e,e.return,t)}}var fl=!1,pl=!1,ml=!1,hl=typeof WeakSet==`function`?WeakSet:Set,gl=null;function _l(e,t){if(e=e.containerInfo,tf=wp,e=Lr(e),Rr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(nf={focusedElem:e,selectionRange:n},wp=!1,gl=t;gl!==null;)if(t=gl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,gl=e;else for(;gl!==null;){switch(t=gl,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=rc(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Y(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)vf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:vf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,gl=e;break}gl=t.return}}function vl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Nl(e,n),r&4&&$c(5,n);break;case 1:if(Nl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Y(n,n.return,e)}else{var i=rc(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Y(n,n.return,e)}}r&64&&tl(n),r&512&&rl(n,n.return);break;case 3:if(Nl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{ao(e,t)}catch(e){Y(n,n.return,e)}}break;case 27:t===null&&r&4&&dl(n);case 26:case 5:Nl(e,n),t===null&&r&4&&al(n),r&512&&rl(n,n.return);break;case 12:Nl(e,n);break;case 31:Nl(e,n),r&4&&wl(e,n);break;case 13:Nl(e,n),r&4&&Tl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ld.bind(null,n),wf(e,n))));break;case 22:if(r=n.memoizedState!==null||fl,!r){t=t!==null&&t.memoizedState!==null||pl,i=fl;var a=pl;fl=r,(pl=t)&&!a?Fl(e,n,(n.subtreeFlags&8772)!=0):Nl(e,n),fl=i,pl=a}break;case 30:break;default:Nl(e,n)}}function yl(e){var t=e.alternate;t!==null&&(e.alternate=null,yl(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ct(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var bl=null,xl=!1;function Sl(e,t,n){for(n=n.child;n!==null;)Cl(e,t,n),n=n.sibling}function Cl(e,t,n){if(Ke&&typeof Ke.onCommitFiberUnmount==`function`)try{Ke.onCommitFiberUnmount(Ge,n)}catch{}switch(n.tag){case 26:pl||il(n,t),Sl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:pl||il(n,t);var r=bl,i=xl;hf(n.type)&&(bl=n.stateNode,xl=!1),Sl(e,t,n),Af(n.stateNode),bl=r,xl=i;break;case 5:pl||il(n,t);case 6:if(r=bl,i=xl,bl=null,Sl(e,t,n),bl=r,xl=i,bl!==null)if(xl)try{(bl.nodeType===9?bl.body:bl.nodeName===`HTML`?bl.ownerDocument.body:bl).removeChild(n.stateNode)}catch(e){Y(n,t,e)}else try{bl.removeChild(n.stateNode)}catch(e){Y(n,t,e)}break;case 18:bl!==null&&(xl?(e=bl,gf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Xp(e)):gf(bl,n.stateNode));break;case 4:r=bl,i=xl,bl=n.stateNode.containerInfo,xl=!0,Sl(e,t,n),bl=r,xl=i;break;case 0:case 11:case 14:case 15:el(2,n,t),pl||el(4,n,t),Sl(e,t,n);break;case 1:pl||(il(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&nl(n,t,r)),Sl(e,t,n);break;case 21:Sl(e,t,n);break;case 22:pl=(r=pl)||n.memoizedState!==null,Sl(e,t,n),pl=r;break;default:Sl(e,t,n)}}function wl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Xp(e)}catch(e){Y(t,t.return,e)}}}function Tl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Xp(e)}catch(e){Y(t,t.return,e)}}function El(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new hl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new hl),t;default:throw Error(i(435,e.tag))}}function Dl(e,t){var n=El(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=ud.bind(null,e,t);t.then(r,r)}})}function Ol(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(hf(c.type)){bl=c.stateNode,xl=!1;break a}break;case 5:bl=c.stateNode,xl=!1;break a;case 3:case 4:bl=c.stateNode.containerInfo,xl=!0;break a}c=c.return}if(bl===null)throw Error(i(160));Cl(o,s,a),bl=null,xl=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Al(t,e),t=t.sibling}var kl=null;function Al(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ol(t,e),jl(e),r&4&&(el(3,e,e.return),$c(3,e),el(5,e,e.return));break;case 1:Ol(t,e),jl(e),r&512&&(pl||n===null||il(n,n.return)),r&64&&fl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=kl;if(Ol(t,e),jl(e),r&512&&(pl||n===null||il(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[St]||o[k]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Zd(o,r,n),o[k]=e,Ot(o),r=o;break a;case`link`:var s=ip(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Zd(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=ip(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Zd(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[k]=e,Ot(o),r=o}e.stateNode=r}else ap(a,e.type,e.stateNode);else e.stateNode=$f(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&ol(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?ap(a,e.type,e.stateNode):$f(a,r,e.memoizedProps))}break;case 27:Ol(t,e),jl(e),r&512&&(pl||n===null||il(n,n.return)),n!==null&&r&4&&ol(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ol(t,e),jl(e),r&512&&(pl||n===null||il(n,n.return)),e.flags&32){a=e.stateNode;try{$t(a,``)}catch(t){Y(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,ol(e,a,n===null?a:n.memoizedProps)),r&1024&&(ml=!0);break;case 6:if(Ol(t,e),jl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Y(e,e.return,t)}}break;case 3:if(rp=null,a=kl,kl=Nf(t.containerInfo),Ol(t,e),kl=a,jl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xp(t.containerInfo)}catch(t){Y(e,e.return,t)}ml&&(ml=!1,Ml(e));break;case 4:r=kl,kl=Nf(e.stateNode.containerInfo),Ol(t,e),jl(e),kl=r;break;case 12:Ol(t,e),jl(e);break;case 31:Ol(t,e),jl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Dl(e,r)));break;case 13:Ol(t,e),jl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(mu=D()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Dl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=fl,d=pl;if(fl=u||a,pl=d||l,Ol(t,e),pl=d,fl=u,jl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||fl||pl||Pl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Y(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Y(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?_f(m,!0):_f(l.stateNode,!1)}catch(e){Y(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Dl(e,n))));break;case 19:Ol(t,e),jl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Dl(e,r)));break;case 30:break;case 21:break;default:Ol(t,e),jl(e)}}function jl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(sl(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode,o=cl(e);ul(e,o,a);break;case 5:var s=n.stateNode;n.flags&32&&($t(s,``),n.flags&=-33);var c=cl(e);ul(e,c,s);break;case 3:case 4:var l=n.stateNode.containerInfo,u=cl(e);ll(e,u,l);break;default:throw Error(i(161))}}catch(t){Y(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ml(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ml(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Nl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)vl(e,t.alternate,t),t=t.sibling}function Pl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:el(4,t,t.return),Pl(t);break;case 1:il(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&nl(t,t.return,n),Pl(t);break;case 27:Af(t.stateNode);case 26:case 5:il(t,t.return),Pl(t);break;case 22:t.memoizedState===null&&Pl(t);break;case 30:Pl(t);break;default:Pl(t)}e=e.sibling}}function Fl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Fl(i,a,n),$c(4,a);break;case 1:if(Fl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Y(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)io(c[i],s)}catch(e){Y(r,r.return,e)}}n&&o&64&&tl(a),rl(a,a.return);break;case 27:dl(a);case 26:case 5:Fl(i,a,n),n&&r===null&&o&4&&al(a),rl(a,a.return);break;case 12:Fl(i,a,n);break;case 31:Fl(i,a,n),n&&o&4&&wl(i,a);break;case 13:Fl(i,a,n),n&&o&4&&Tl(i,a);break;case 22:a.memoizedState===null&&Fl(i,a,n),rl(a,a.return);break;case 30:break;default:Fl(i,a,n)}t=t.sibling}}function Il(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&va(n))}function Ll(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&va(e))}function Rl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zl(e,t,n,r),t=t.sibling}function zl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Rl(e,t,n,r),i&2048&&$c(9,t);break;case 1:Rl(e,t,n,r);break;case 3:Rl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&va(e)));break;case 12:if(i&2048){Rl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Y(t,t.return,e)}}else Rl(e,t,n,r);break;case 31:Rl(e,t,n,r);break;case 13:Rl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Rl(e,t,n,r):(a._visibility|=2,Bl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Rl(e,t,n,r):Vl(e,t),i&2048&&Il(o,t);break;case 24:Rl(e,t,n,r),i&2048&&Ll(t.alternate,t);break;default:Rl(e,t,n,r)}}function Bl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Bl(a,o,s,c,i),$c(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Bl(a,o,s,c,i)):u._visibility&2?Bl(a,o,s,c,i):Vl(a,o),i&&l&2048&&Il(o.alternate,o);break;case 24:Bl(a,o,s,c,i),i&&l&2048&&Ll(o.alternate,o);break;default:Bl(a,o,s,c,i)}t=t.sibling}}function Vl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Vl(n,r),i&2048&&Il(r.alternate,r);break;case 24:Vl(n,r),i&2048&&Ll(r.alternate,r);break;default:Vl(n,r)}t=t.sibling}}var Hl=8192;function Ul(e,t,n){if(e.subtreeFlags&Hl)for(e=e.child;e!==null;)Wl(e,t,n),e=e.sibling}function Wl(e,t,n){switch(e.tag){case 26:Ul(e,t,n),e.flags&Hl&&e.memoizedState!==null&&cp(n,kl,e.memoizedState,e.memoizedProps);break;case 5:Ul(e,t,n);break;case 3:case 4:var r=kl;kl=Nf(e.stateNode.containerInfo),Ul(e,t,n),kl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Hl,Hl=16777216,Ul(e,t,n),Hl=r):Ul(e,t,n));break;default:Ul(e,t,n)}}function Gl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Kl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];gl=r,Yl(r,e)}Gl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ql(e),e=e.sibling}function ql(e){switch(e.tag){case 0:case 11:case 15:Kl(e),e.flags&2048&&el(9,e,e.return);break;case 3:Kl(e);break;case 12:Kl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Jl(e)):Kl(e);break;default:Kl(e)}}function Jl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];gl=r,Yl(r,e)}Gl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:el(8,t,t.return),Jl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Yl(e,t){for(;gl!==null;){var n=gl;switch(n.tag){case 0:case 11:case 15:el(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:va(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,gl=r;else a:for(n=e;gl!==null;){r=gl;var i=r.sibling,a=r.return;if(yl(r),r===n){gl=null;break a}if(i!==null){i.return=a,gl=i;break a}gl=a}}}var Xl={getCacheForType:function(e){var t=ua(ga),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ua(ga).controller.signal}},Zl=typeof WeakMap==`function`?WeakMap:Map,K=0,Ql=null,q=null,J=0,$l=0,eu=null,tu=!1,nu=!1,ru=!1,iu=0,au=0,ou=0,su=0,cu=0,lu=0,uu=0,du=null,fu=null,pu=!1,mu=0,hu=0,gu=1/0,_u=null,vu=null,yu=0,bu=null,xu=null,Su=0,Cu=0,wu=null,Tu=null,Eu=0,Du=null;function Ou(){return K&2&&J!==0?J&-J:w.T===null?pt():Ed()}function ku(){if(lu===0)if(!(J&536870912)||V){var e=Qe;Qe<<=1,!(Qe&3932160)&&(Qe=262144),lu=e}else lu=536870912;return e=fo.current,e!==null&&(e.flags|=32),lu}function Au(e,t,n){(e===Ql&&($l===2||$l===9)||e.cancelPendingCommit!==null)&&(Lu(e,0),Pu(e,J,lu,!1)),ot(e,n),(!(K&2)||e!==Ql)&&(e===Ql&&(!(K&2)&&(su|=n),au===4&&Pu(e,J,lu,!1)),vd(e))}function ju(e,t,n){if(K&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||nt(e,t),a=r?Gu(e,t):Uu(e,t,!0),o=r;do{if(a===0){nu&&!r&&Pu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Nu(n)){a=Uu(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=du;var l=c.current.memoizedState.isDehydrated;if(l&&(Lu(c,s).flags|=256),s=Uu(c,s,!1),s!==2){if(ru&&!l){c.errorRecoveryDisabledLanes|=o,su|=o,a=4;break a}o=fu,fu=a,o!==null&&(fu===null?fu=o:fu.push.apply(fu,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Lu(e,0),Pu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Pu(r,t,lu,!tu);break a;case 2:fu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=mu+300-D(),10<a)){if(Pu(r,t,lu,!tu),tt(r,0,!0)!==0)break a;Su=t,r.timeoutHandle=df(Mu.bind(null,r,n,fu,_u,pu,t,lu,su,uu,tu,o,`Throttled`,-0,0),a);break a}Mu(r,n,fu,_u,pu,t,lu,su,uu,tu,o,null,-0,0)}}break}while(1);vd(e)}function Mu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cn},Wl(t,a,d);var m=(a&62914560)===a?mu-D():(a&4194048)===a?hu-D():0;if(m=up(d,m),m!==null){Su=a,e.cancelPendingCommit=m(Qu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),Pu(e,a,o,!l);return}}Qu(e,t,a,n,r,i,o,s,c)}function Nu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Nr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pu(e,t,n,r){t&=~cu,t&=~su,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Je(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&ct(e,n,t)}function Fu(){return K&6?!0:(yd(0,!1),!1)}function Iu(){if(q!==null){if($l===0)var e=q.return;else e=q,na=ta=null,Lo(e),Va=null,Ha=0,e=q;for(;e!==null;)Qc(e.alternate,e),e=e.return;q=null}}function Lu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,ff(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Su=0,Iu(),Ql=e,q=n=yi(e.current,null),J=t,$l=0,eu=null,tu=!1,nu=nt(e,t),ru=!1,uu=lu=cu=su=ou=au=0,fu=du=null,pu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Je(r),a=1<<i;t|=e[i],r&=~a}return iu=t,li(),n}function Ru(e,t){U=null,w.H=Ys,t===ja||t===Na?(t=za(),$l=3):t===Ma?(t=za(),$l=4):$l=t===pc?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,eu=t,q===null&&(au=1,sc(e,Di(t,e.current)))}function zu(){var e=fo.current;return e===null?!0:(J&4194048)===J?po===null:(J&62914560)===J||J&536870912?e===po:!1}function Bu(){var e=w.H;return w.H=Ys,e===null?Ys:e}function Vu(){var e=w.A;return w.A=Xl,e}function Hu(){au=4,tu||(J&4194048)!==J&&fo.current!==null||(nu=!0),!(ou&134217727)&&!(su&134217727)||Ql===null||Pu(Ql,J,lu,!1)}function Uu(e,t,n){var r=K;K|=2;var i=Bu(),a=Vu();(Ql!==e||J!==t)&&(_u=null,Lu(e,t)),t=!1;var o=au;a:do try{if($l!==0&&q!==null){var s=q,c=eu;switch($l){case 8:Iu(),o=6;break a;case 3:case 2:case 9:case 6:fo.current===null&&(t=!0);var l=$l;if($l=0,eu=null,Yu(e,s,c,l),n&&nu){o=0;break a}break;default:l=$l,$l=0,eu=null,Yu(e,s,c,l)}}Wu(),o=au;break}catch(t){Ru(e,t)}while(1);return t&&e.shellSuspendCounter++,na=ta=null,K=r,w.H=i,w.A=a,q===null&&(Ql=null,J=0,li()),o}function Wu(){for(;q!==null;)qu(q)}function Gu(e,t){var n=K;K|=2;var r=Bu(),a=Vu();Ql!==e||J!==t?(_u=null,gu=D()+500,Lu(e,t)):nu=nt(e,t);a:do try{if($l!==0&&q!==null){t=q;var o=eu;b:switch($l){case 1:$l=0,eu=null,Yu(e,t,o,1);break;case 2:case 9:if(Fa(o)){$l=0,eu=null,Ju(t);break}t=function(){$l!==2&&$l!==9||Ql!==e||($l=7),vd(e)},o.then(t,t);break a;case 3:$l=7;break a;case 4:$l=5;break a;case 7:Fa(o)?($l=0,eu=null,Ju(t)):($l=0,eu=null,Yu(e,t,o,7));break;case 5:var s=null;switch(q.tag){case 26:s=q.memoizedState;case 5:case 27:var c=q;if(s?sp(s):c.stateNode.complete){$l=0,eu=null;var l=c.sibling;if(l!==null)q=l;else{var u=c.return;u===null?q=null:(q=u,Xu(u))}break b}}$l=0,eu=null,Yu(e,t,o,5);break;case 6:$l=0,eu=null,Yu(e,t,o,6);break;case 8:Iu(),au=6;break a;default:throw Error(i(462))}}Ku();break}catch(t){Ru(e,t)}while(1);return na=ta=null,w.H=r,w.A=a,K=n,q===null?(Ql=null,J=0,li(),au):0}function Ku(){for(;q!==null&&!Fe();)qu(q)}function qu(e){var t=Uc(e.alternate,e,iu);e.memoizedProps=e.pendingProps,t===null?Xu(e):q=t}function Ju(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Dc(n,t,t.pendingProps,t.type,void 0,J);break;case 11:t=Dc(n,t,t.pendingProps,t.type.render,t.ref,J);break;case 5:Lo(t);default:Qc(n,t),t=q=bi(t,iu),t=Uc(n,t,iu)}e.memoizedProps=e.pendingProps,t===null?Xu(e):q=t}function Yu(e,t,n,r){na=ta=null,Lo(t),Va=null,Ha=0;var i=t.return;try{if(fc(e,i,t,n,J)){au=1,sc(e,Di(n,e.current)),q=null;return}}catch(t){if(i!==null)throw q=i,t;au=1,sc(e,Di(n,e.current)),q=null;return}t.flags&32768?(V||r===1?e=!0:nu||J&536870912?e=!1:(tu=e=!0,(r===2||r===9||r===3||r===6)&&(r=fo.current,r!==null&&r.tag===13&&(r.flags|=16384))),Zu(t,e)):Xu(t)}function Xu(e){var t=e;do{if(t.flags&32768){Zu(t,tu);return}e=t.return;var n=Xc(t.alternate,t,iu);if(n!==null){q=n;return}if(t=t.sibling,t!==null){q=t;return}q=t=e}while(t!==null);au===0&&(au=5)}function Zu(e,t){do{var n=Zc(e.alternate,e);if(n!==null){n.flags&=32767,q=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){q=e;return}q=e=n}while(e!==null);au=6,q=null}function Qu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do rd();while(yu!==0);if(K&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=ci,st(e,n,o,s,c,l),e===Ql&&(q=Ql=null,J=0),xu=t,bu=e,Su=n,Cu=o,wu=a,Tu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,dd(Be,function(){return id(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=w.T,w.T=null,a=T.p,T.p=2,s=K,K|=4;try{_l(e,t,n)}finally{K=s,T.p=a,w.T=r}}yu=1,$u(),ed(),td()}}function $u(){if(yu===1){yu=0;var e=bu,t=xu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=w.T,w.T=null;var r=T.p;T.p=2;var i=K;K|=4;try{Al(t,e);var a=nf,o=Lr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Ir(s.ownerDocument.documentElement,s)){if(c!==null&&Rr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=z(s,h),v=z(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}wp=!!tf,nf=tf=null}finally{K=i,T.p=r,w.T=n}}e.current=t,yu=2}}function ed(){if(yu===2){yu=0;var e=bu,t=xu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=w.T,w.T=null;var r=T.p;T.p=2;var i=K;K|=4;try{vl(e,t.alternate,t)}finally{K=i,T.p=r,w.T=n}}yu=3}}function td(){if(yu===4||yu===3){yu=0,Ie();var e=bu,t=xu,n=Su,r=Tu;t.subtreeFlags&10256||t.flags&10256?yu=5:(yu=0,xu=bu=null,nd(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(vu=null),ft(n),t=t.stateNode,Ke&&typeof Ke.onCommitFiberRoot==`function`)try{Ke.onCommitFiberRoot(Ge,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=w.T,i=T.p,T.p=2,w.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{w.T=t,T.p=i}}Su&3&&rd(),vd(e),i=e.pendingLanes,n&261930&&i&42?e===Du?Eu++:(Eu=0,Du=e):Eu=0,yd(0,!1)}}function nd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,va(t)))}function rd(){return $u(),ed(),td(),id()}function id(){if(yu!==5)return!1;var e=bu,t=Cu;Cu=0;var n=ft(Su),r=w.T,a=T.p;try{T.p=32>n?32:n,w.T=null,n=wu,wu=null;var o=bu,s=Su;if(yu=0,xu=bu=null,Su=0,K&6)throw Error(i(331));var c=K;if(K|=4,ql(o.current),zl(o,o.current,s,n),K=c,yd(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot==`function`)try{Ke.onPostCommitFiberRoot(Ge,o)}catch{}return!0}finally{T.p=a,w.T=r,nd(e,t)}}function ad(e,t,n){t=Di(n,t),t=lc(e.stateNode,t,2),e=Qa(e,t,2),e!==null&&(ot(e,2),vd(e))}function Y(e,t,n){if(e.tag===3)ad(e,e,n);else for(;t!==null;){if(t.tag===3){ad(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(vu===null||!vu.has(r))){e=Di(n,e),n=uc(2),r=Qa(t,n,2),r!==null&&(dc(n,r,t,e),ot(r,2),vd(r));break}}t=t.return}}function od(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Zl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(ru=!0,i.add(n),e=sd.bind(null,e,t,n),t.then(e,e))}function sd(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ql===e&&(J&n)===n&&(au===4||au===3&&(J&62914560)===J&&300>D()-mu?!(K&2)&&Lu(e,0):cu|=n,uu===J&&(uu=0)),vd(e)}function cd(e,t){t===0&&(t=it()),e=fi(e,t),e!==null&&(ot(e,t),vd(e))}function ld(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cd(e,n)}function ud(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),cd(e,n)}function dd(e,t){return Ne(e,t)}var fd=null,pd=null,md=!1,hd=!1,gd=!1,_d=0;function vd(e){e!==pd&&e.next===null&&(pd===null?fd=pd=e:pd=pd.next=e),hd=!0,md||(md=!0,Td())}function yd(e,t){if(!gd&&hd){gd=!0;do for(var n=!1,r=fd;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Je(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,wd(r,a))}else a=J,a=tt(r,r===Ql?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||nt(r,a)||(n=!0,wd(r,a));r=r.next}while(n);gd=!1}}function bd(){xd()}function xd(){hd=md=!1;var e=0;_d!==0&&uf()&&(e=_d);for(var t=D(),n=null,r=fd;r!==null;){var i=r.next,a=Sd(r,t);a===0?(r.next=null,n===null?fd=i:n.next=i,i===null&&(pd=n)):(n=r,(e!==0||a&3)&&(hd=!0)),r=i}yu!==0&&yu!==5||yd(e,!1),_d!==0&&(_d=0)}function Sd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Je(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=rt(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Ql,n=J,n=tt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&($l===2||$l===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Pe(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||nt(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Pe(r),ft(n)){case 2:case 8:n=ze;break;case 32:n=Be;break;case 268435456:n=He;break;default:n=Be}return r=Cd.bind(null,e),n=Ne(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Pe(r),e.callbackPriority=2,e.callbackNode=null,2}function Cd(e,t){if(yu!==0&&yu!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(rd()&&e.callbackNode!==n)return null;var r=J;return r=tt(e,e===Ql?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(ju(e,r,t),Sd(e,D()),e.callbackNode!=null&&e.callbackNode===n?Cd.bind(null,e):null)}function wd(e,t){if(rd())return null;ju(e,t,!0)}function Td(){mf(function(){K&6?Ne(Re,bd):xd()})}function Ed(){if(_d===0){var e=xa;e===0&&(e=Ze,Ze<<=1,!(Ze&261888)&&(Ze=256)),_d=e}return _d}function Dd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:sn(``+e)}function Od(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function kd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=Dd((i[gt]||null).action),o=r.submitter;o&&(t=(t=o[gt]||null)?Dd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new kn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(_d!==0){var e=o?Od(i,o):new FormData(i);Fs(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?Od(i,o):new FormData(i),Fs(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var Ad=0;Ad<ri.length;Ad++){var jd=ri[Ad],Md=jd.toLowerCase(),Nd=jd[0].toUpperCase()+jd.slice(1);ii(Md,`on`+Nd)}ii(Yr,`onAnimationEnd`),ii(Xr,`onAnimationIteration`),ii(Zr,`onAnimationStart`),ii(`dblclick`,`onDoubleClick`),ii(`focusin`,`onFocus`),ii(`focusout`,`onBlur`),ii(Qr,`onTransitionRun`),ii($r,`onTransitionStart`),ii(ei,`onTransitionCancel`),ii(ti,`onTransitionEnd`),Mt(`onMouseEnter`,[`mouseout`,`mouseover`]),Mt(`onMouseLeave`,[`mouseout`,`mouseover`]),Mt(`onPointerEnter`,[`pointerout`,`pointerover`]),Mt(`onPointerLeave`,[`pointerout`,`pointerover`]),jt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),jt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),jt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),jt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),jt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),jt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var Pd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),Fd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(Pd));function Id(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ai(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ai(e)}i.currentTarget=null,a=c}}}}function X(e,t){var n=t[vt];n===void 0&&(n=t[vt]=new Set);var r=e+`__bubble`;n.has(r)||(Bd(t,e,2,!1),n.add(r))}function Ld(e,t,n){var r=0;t&&(r|=4),Bd(n,e,r,t)}var Rd=`_reactListening`+Math.random().toString(36).slice(2);function zd(e){if(!e[Rd]){e[Rd]=!0,kt.forEach(function(t){t!==`selectionchange`&&(Fd.has(t)||Ld(t,!1,e),Ld(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rd]||(t[Rd]=!0,Ld(`selectionchange`,!1,t))}}function Bd(e,t,n,r){switch(jp(t)){case 2:var i=Tp;break;case 8:i=Ep;break;default:i=Dp}n=i.bind(null,t,n,e),i=void 0,!vn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Vd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=wt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}hn(function(){var r=a,i=un(n),s=[];a:{var c=ni.get(e);if(c!==void 0){var l=kn,u=e;switch(e){case`keypress`:if(wn(n)===0)break a;case`keydown`:case`keyup`:l=j;break;case`focusin`:u=`focus`,l=Bn;break;case`focusout`:u=`blur`,l=Bn;break;case`beforeblur`:case`afterblur`:l=Bn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=In;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Rn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=M;break;case Yr:case Xr:case Zr:l=Hn;break;case ti:l=N;break;case`scroll`:case`scrollend`:l=jn;break;case`wheel`:l=F;break;case`copy`:case`cut`:case`paste`:l=Wn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=er;break;case`toggle`:case`beforetoggle`:l=rr}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=gn(m,p),g!=null&&d.push(Hd(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==ln&&(u=n.relatedTarget||n.fromElement)&&(wt(u)||u[_t]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?wt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=In,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=er,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:Et(l),h=u==null?c:Et(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,wt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Wd,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&Gd(s,c,l,d,!1),u!==null&&f!==null&&Gd(s,f,u,d,!0)}}a:{if(c=r?Et(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=Sr;else if(gr(c))if(Cr)v=jr;else{v=kr;var y=Or}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&rn(r.elementType)&&(v=Sr):v=Ar;if(v&&=v(e,r)){_r(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Yt(c,`number`,c.value)}switch(y=r?Et(r):window,e){case`focusin`:(gr(y)||y.contentEditable===`true`)&&(Br=y,Vr=r,Hr=null);break;case`focusout`:Hr=Vr=Br=null;break;case`mousedown`:Ur=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Ur=!1,Wr(s,n,i);break;case`selectionchange`:if(zr)break;case`keydown`:case`keyup`:Wr(s,n,i)}var b;if(ar)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else pr?dr(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(cr&&n.locale!==`ko`&&(pr||x!==`onCompositionStart`?x===`onCompositionEnd`&&pr&&(b=Cn()):(bn=i,xn=`value`in bn?bn.value:bn.textContent,pr=!0)),y=Ud(r,x),0<y.length&&(x=new Kn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=fr(n),b!==null&&(x.data=b)))),(b=sr?mr(e,n):L(e,n))&&(x=Ud(r,`onBeforeInput`),0<x.length&&(y=new Kn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),kd(s,e,r,n,i)}Id(s,t)})}function Hd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ud(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=gn(e,n),i!=null&&r.unshift(Hd(e,i,a)),i=gn(e,t),i!=null&&r.push(Hd(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Wd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=gn(n,a),l!=null&&o.unshift(Hd(n,l,c))):i||(l=gn(n,a),l!=null&&o.push(Hd(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Kd=/\r\n?/g,qd=/\u0000|\uFFFD/g;function Jd(e){return(typeof e==`string`?e:``+e).replace(Kd,`
`).replace(qd,``)}function Yd(e,t){return t=Jd(t),Jd(e)===t}function Z(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||$t(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&$t(e,``+r);break;case`className`:Rt(e,`class`,r);break;case`tabIndex`:Rt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Rt(e,n,r);break;case`style`:nn(e,r,o);break;case`data`:if(t!==`object`){Rt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=sn(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Z(e,t,`name`,a.name,a,null),Z(e,t,`formEncType`,a.formEncType,a,null),Z(e,t,`formMethod`,a.formMethod,a,null),Z(e,t,`formTarget`,a.formTarget,a,null)):(Z(e,t,`encType`,a.encType,a,null),Z(e,t,`method`,a.method,a,null),Z(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=sn(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=cn);break;case`onScroll`:r!=null&&X(`scroll`,e);break;case`onScrollEnd`:r!=null&&X(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=sn(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:X(`beforetoggle`,e),X(`toggle`,e),Lt(e,`popover`,r);break;case`xlinkActuate`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:zt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:zt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:zt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:Lt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=an.get(n)||n,Lt(e,n,r))}}function Xd(e,t,n,r,a,o){switch(n){case`style`:nn(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?$t(e,r):(typeof r==`number`||typeof r==`bigint`)&&$t(e,``+r);break;case`onScroll`:r!=null&&X(`scroll`,e);break;case`onScrollEnd`:r!=null&&X(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=cn);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!At.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[gt]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):Lt(e,n,r)}}}function Zd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:X(`error`,e),X(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Z(e,t,o,s,n,null)}}a&&Z(e,t,`srcSet`,n.srcSet,n,null),r&&Z(e,t,`src`,n.src,n,null);return;case`input`:X(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Z(e,t,r,d,n,null)}}Jt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in X(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Z(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Xt(e,!!r,n,!0):Xt(e,!!r,t,!1);return;case`textarea`:for(s in X(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Z(e,t,s,c,n,null)}Qt(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Z(e,t,l,r,n,null)}return;case`dialog`:X(`beforetoggle`,e),X(`toggle`,e),X(`cancel`,e),X(`close`,e);break;case`iframe`:case`object`:X(`load`,e);break;case`video`:case`audio`:for(r=0;r<Pd.length;r++)X(Pd[r],e);break;case`image`:X(`error`,e),X(`load`,e);break;case`details`:X(`toggle`,e);break;case`embed`:case`source`:case`link`:X(`error`,e),X(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Z(e,t,u,r,n,null)}return;default:if(rn(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Xd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Z(e,t,c,r,n,null))}function Qd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Z(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Z(e,t,p,m,r,f)}}A(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Z(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Z(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Xt(e,!!n,n?[]:``,!1):Xt(e,!!n,t,!0)):Xt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Z(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Z(e,t,s,a,r,o)}Zt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Z(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Z(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Z(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Z(e,t,u,p,r,m)}return;default:if(rn(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Xd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Xd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Z(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Z(e,t,f,p,r,m)}function $d(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function ef(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&$d(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&$d(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var tf=null,nf=null;function rf(e){return e.nodeType===9?e:e.ownerDocument}function af(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function sf(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function cf(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lf=null;function uf(){var e=window.event;return e&&e.type===`popstate`?e===lf?!1:(lf=e,!0):(lf=null,!1)}var df=typeof setTimeout==`function`?setTimeout:void 0,ff=typeof clearTimeout==`function`?clearTimeout:void 0,pf=typeof Promise==`function`?Promise:void 0,mf=typeof queueMicrotask==`function`?queueMicrotask:pf===void 0?df:function(e){return pf.resolve(null).then(e).catch(Q)};function Q(e){setTimeout(function(){throw e})}function hf(e){return e===`head`}function gf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Xp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)Af(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,Af(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[St]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&Af(e.ownerDocument.body);n=i}while(n);Xp(t)}function _f(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function vf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:vf(n),Ct(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function yf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[St])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=Tf(e.nextSibling),e===null)break}return null}function bf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=Tf(e.nextSibling),e===null))return null;return e}function xf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=Tf(e.nextSibling),e===null))return null;return e}function Sf(e){return e.data===`$?`||e.data===`$~`}function Cf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function wf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function Tf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var Ef=null;function Df(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return Tf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function Of(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function kf(e,t,n){switch(t=rf(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Af(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ct(e)}var jf=new Map,Mf=new Set;function Nf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Pf=T.d;T.d={f:Ff,r:If,D:zf,C:Bf,L:Vf,m:Hf,X:Wf,S:Uf,M:Gf};function Ff(){var e=Pf.f(),t=Fu();return e||t}function If(e){var t=Tt(e);t!==null&&t.tag===5&&t.type===`form`?Ls(t):Pf.r(e)}var Lf=typeof document>`u`?null:document;function Rf(e,t,n){var r=Lf;if(r&&typeof t==`string`&&t){var i=qt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),Mf.has(i)||(Mf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Zd(t,`link`,e),Ot(t),r.head.appendChild(t)))}}function zf(e){Pf.D(e),Rf(`dns-prefetch`,e,null)}function Bf(e,t){Pf.C(e,t),Rf(`preconnect`,e,t)}function Vf(e,t,n){Pf.L(e,t,n);var r=Lf;if(r&&e&&t){var i=`link[rel="preload"][as="`+qt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+qt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+qt(n.imageSizes)+`"]`)):i+=`[href="`+qt(e)+`"]`;var a=i;switch(t){case`style`:a=qf(e);break;case`script`:a=Zf(e)}jf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),jf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Jf(a))||t===`script`&&r.querySelector(Qf(a))||(t=r.createElement(`link`),Zd(t,`link`,e),Ot(t),r.head.appendChild(t)))}}function Hf(e,t){Pf.m(e,t);var n=Lf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+qt(r)+`"][href="`+qt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Zf(e)}if(!jf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),jf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Qf(a)))return}r=n.createElement(`link`),Zd(r,`link`,e),Ot(r),n.head.appendChild(r)}}}function Uf(e,t,n){Pf.S(e,t,n);var r=Lf;if(r&&e){var i=Dt(r).hoistableStyles,a=qf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Jf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=jf.get(a))&&tp(e,n);var c=o=r.createElement(`link`);Ot(c),Zd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,ep(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Wf(e,t){Pf.X(e,t);var n=Lf;if(n&&e){var r=Dt(n).hoistableScripts,i=Zf(e),a=r.get(i);a||(a=n.querySelector(Qf(i)),a||(e=h({src:e,async:!0},t),(t=jf.get(i))&&np(e,t),a=n.createElement(`script`),Ot(a),Zd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Gf(e,t){Pf.M(e,t);var n=Lf;if(n&&e){var r=Dt(n).hoistableScripts,i=Zf(e),a=r.get(i);a||(a=n.querySelector(Qf(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=jf.get(i))&&np(e,t),a=n.createElement(`script`),Ot(a),Zd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Kf(e,t,n,r){var a=(a=ye.current)?Nf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=qf(n.href),n=Dt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=qf(n.href);var o=Dt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(Jf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),jf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},jf.set(e,n),o||Xf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Zf(n),n=Dt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function qf(e){return`href="`+qt(e)+`"`}function Jf(e){return`link[rel="stylesheet"][`+e+`]`}function Yf(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Xf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Zd(t,`link`,n),Ot(t),e.head.appendChild(t))}function Zf(e){return`[src="`+qt(e)+`"]`}function Qf(e){return`script[async]`+e}function $f(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+qt(n.href)+`"]`);if(r)return t.instance=r,Ot(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),Ot(r),Zd(r,`style`,a),ep(r,n.precedence,e),t.instance=r;case`stylesheet`:a=qf(n.href);var o=e.querySelector(Jf(a));if(o)return t.state.loading|=4,t.instance=o,Ot(o),o;r=Yf(n),(a=jf.get(a))&&tp(r,a),o=(e.ownerDocument||e).createElement(`link`),Ot(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Zd(o,`link`,r),t.state.loading|=4,ep(o,n.precedence,e),t.instance=o;case`script`:return o=Zf(n.src),(a=e.querySelector(Qf(o)))?(t.instance=a,Ot(a),a):(r=n,(a=jf.get(o))&&(r=h({},n),np(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),Ot(a),Zd(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,ep(r,n.precedence,e));return t.instance}function ep(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function tp(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function np(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var rp=null;function ip(e,t,n){if(rp===null){var r=new Map,i=rp=new Map;i.set(n,r)}else i=rp,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[St]||a[k]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function ap(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function op(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function sp(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function cp(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=qf(r.href),a=t.querySelector(Jf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=dp.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,Ot(a);return}a=t.ownerDocument||t,r=Yf(r),(i=jf.get(i))&&tp(r,i),a=a.createElement(`link`),Ot(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Zd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=dp.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var lp=0;function up(e,t){return e.stylesheets&&e.count===0&&pp(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&pp(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&lp===0&&(lp=62500*ef());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&pp(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>lp?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function dp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fp=null;function pp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fp=new Map,t.forEach(mp,e),fp=null,dp.call(e))}function mp(e,t){if(!(t.state.loading&4)){var n=fp.get(e);if(n)var r=n.get(null);else{n=new Map,fp.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=dp.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var hp={$$typeof:te,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function gp(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=at(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=at(0),this.hiddenUpdates=at(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function _p(e,t,n,r,i,a,o,s,c,l,u,d){return e=new gp(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=_i(3,null,null,t),e.current=a,a.stateNode=e,t=_a(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Xa(a),e}function vp(e){return e?(e=hi,e):hi}function yp(e,t,n,r,i,a){i=vp(i),r.context===null?r.context=i:r.pendingContext=i,r=Za(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Qa(e,r,t),n!==null&&(Au(n,e,t),$a(n,e,t))}function bp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xp(e,t){bp(e,t),(e=e.alternate)&&bp(e,t)}function Sp(e){if(e.tag===13||e.tag===31){var t=fi(e,67108864);t!==null&&Au(t,e,67108864),xp(e,67108864)}}function Cp(e){if(e.tag===13||e.tag===31){var t=Ou();t=dt(t);var n=fi(e,t);n!==null&&Au(n,e,t),xp(e,t)}}var wp=!0;function Tp(e,t,n,r){var i=w.T;w.T=null;var a=T.p;try{T.p=2,Dp(e,t,n,r)}finally{T.p=a,w.T=i}}function Ep(e,t,n,r){var i=w.T;w.T=null;var a=T.p;try{T.p=8,Dp(e,t,n,r)}finally{T.p=a,w.T=i}}function Dp(e,t,n,r){if(wp){var i=Op(r);if(i===null)Vd(e,t,r,kp,n),Bp(e,r);else if(Hp(i,e,t,n,r))r.stopPropagation();else if(Bp(e,r),t&4&&-1<zp.indexOf(e)){for(;i!==null;){var a=Tt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=et(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Je(o);s.entanglements[1]|=c,o&=~c}vd(a),!(K&6)&&(gu=D()+500,yd(0,!1))}}break;case 31:case 13:s=fi(a,2),s!==null&&Au(s,a,2),Fu(),xp(a,2)}if(a=Op(r),a===null&&Vd(e,t,r,kp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Vd(e,t,r,null,n)}}function Op(e){return e=un(e),Ap(e)}var kp=null;function Ap(e){if(kp=null,e=wt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return kp=e,null}function jp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Le()){case Re:return 2;case ze:return 8;case Be:case Ve:return 32;case He:return 268435456;default:return 32}default:return 32}}var Mp=!1,Np=null,Pp=null,Fp=null,Ip=new Map,Lp=new Map,Rp=[],zp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Bp(e,t){switch(e){case`focusin`:case`focusout`:Np=null;break;case`dragenter`:case`dragleave`:Pp=null;break;case`mouseover`:case`mouseout`:Fp=null;break;case`pointerover`:case`pointerout`:Ip.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Lp.delete(t.pointerId)}}function Vp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Tt(t),t!==null&&Sp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Hp(e,t,n,r,i){switch(t){case`focusin`:return Np=Vp(Np,e,t,n,r,i),!0;case`dragenter`:return Pp=Vp(Pp,e,t,n,r,i),!0;case`mouseover`:return Fp=Vp(Fp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return Ip.set(a,Vp(Ip.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Lp.set(a,Vp(Lp.get(a)||null,e,t,n,r,i)),!0}return!1}function Up(e){var t=wt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,mt(e.priority,function(){Cp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,mt(e.priority,function(){Cp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Op(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ln=r,n.target.dispatchEvent(r),ln=null}else return t=Tt(n),t!==null&&Sp(t),e.blockedOn=n,!1;t.shift()}return!0}function Gp(e,t,n){Wp(e)&&n.delete(t)}function Kp(){Mp=!1,Np!==null&&Wp(Np)&&(Np=null),Pp!==null&&Wp(Pp)&&(Pp=null),Fp!==null&&Wp(Fp)&&(Fp=null),Ip.forEach(Gp),Lp.forEach(Gp)}function qp(e,n){e.blockedOn===n&&(e.blockedOn=null,Mp||(Mp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Kp)))}var Jp=null;function Yp(e){Jp!==e&&(Jp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Jp===e&&(Jp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(Ap(r||n)===null)continue;break}var a=Tt(n);a!==null&&(e.splice(t,3),t-=3,Fs(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Xp(e){function t(t){return qp(t,e)}Np!==null&&qp(Np,e),Pp!==null&&qp(Pp,e),Fp!==null&&qp(Fp,e),Ip.forEach(t),Lp.forEach(t);for(var n=0;n<Rp.length;n++){var r=Rp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Rp.length&&(n=Rp[0],n.blockedOn===null);)Up(n),n.blockedOn===null&&Rp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[gt]||null;if(typeof a==`function`)o||Yp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[gt]||null)s=o.formAction;else if(Ap(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Yp(n)}}}function Zp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Qp(e){this._internalRoot=e}$p.prototype.render=Qp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current,r=Ou();yp(n,r,e,t,null,null)},$p.prototype.unmount=Qp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yp(e.current,2,null,e,null,null),Fu(),t[_t]=null}};function $p(e){this._internalRoot=e}$p.prototype.unstable_scheduleHydration=function(e){if(e){var t=pt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rp.length&&t!==0&&t<Rp[n].priority;n++);Rp.splice(n,0,e),n===0&&Up(e)}};var em=n.version;if(em!==`19.2.0`)throw Error(i(527,em,`19.2.0`));T.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=d(t),e=e===null?null:p(e),e=e===null?null:e.stateNode,e};var tm={bundleType:0,version:`19.2.0`,rendererPackageName:`react-dom`,currentDispatcherRef:w,reconcilerVersion:`19.2.0`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nm.isDisabled&&nm.supportsFiber)try{Ge=nm.inject(tm),Ke=nm}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=ic,s=ac,c=oc;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=_p(e,1,!1,null,null,n,r,null,o,s,c,Zp),e[_t]=t.current,zd(e),new Qp(t)}})),g=c(o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=h()}))()),_=c(u()),v=()=>void 0,y=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},b=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(y(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):b(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new ee;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ee=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},te=function(e){let t=y(e);return x.encodeByteArray(t,!0)},S=function(e){return te(e).replace(/\./g,``)},ne=function(e){try{return x.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function re(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ie=()=>re().__FIREBASE_DEFAULTS__,ae=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},oe=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&ne(e[1]);return t&&JSON.parse(t)},se=()=>{try{return v()||ie()||ae()||oe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ce=e=>se()?.emulatorHosts?.[e],le=e=>{let t=ce(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},C=()=>se()?.config,ue=e=>se()?.[`_${e}`],de=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};
/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function w(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function T(e){return(await fetch(e,{credentials:`include`})).ok}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function fe(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}}},e);return[S(JSON.stringify(n)),S(JSON.stringify(o)),``].join(`.`)}var pe={};function me(){let e={prod:[],emulator:[]};for(let t of Object.keys(pe))pe[t]?e.emulator.push(t):e.prod.push(t);return e}function he(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var ge=!1;function E(e,t){if(typeof window>`u`||typeof document>`u`||!w(window.location.host)||pe[e]===t||pe[e]||ge)return;pe[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=me().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{ge=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=he(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function _e(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function ve(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function ye(){let e=se()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function be(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function xe(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function Se(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function Ce(){let e=_e();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function we(){return!ye()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function Te(){try{return typeof indexedDB==`object`}catch{return!1}}function Ee(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var De=`FirebaseError`,Oe=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=De,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}},ke=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Ae(i,n):`Error`,o=`${this.serviceName}: ${a} (${r}).`;return new Oe(r,o,n)}};function Ae(e,t){return e.replace(je,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var je=/\{\$([^}]+)}/g;function Me(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ne(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(Pe(n)&&Pe(a)){if(!Ne(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function Pe(e){return typeof e==`object`&&!!e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Fe(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function Ie(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function D(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function Le(e,t){let n=new Re(e,t);return n.subscribe.bind(n)}var Re=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=ze(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=Be),r.error===void 0&&(r.error=Be),r.complete===void 0&&(r.complete=Be);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ze(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function Be(){}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ve(e){return e&&e._delegate?e._delegate:e}var He=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Ue=`[DEFAULT]`,We=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new de;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Ke(e))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Ue){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ue){return this.instances.has(e)}getOptions(e=Ue){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);n===i&&t.resolve(r)}return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Ge(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ue){return this.component?this.component.multipleInstances?e:Ue:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Ge(e){return e===Ue?void 0:e}function Ke(e){return e.instantiationMode===`EAGER`}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var qe=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new We(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},Je=[],O;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(O||={});var Ye={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},Xe=O.INFO,Ze={[O.DEBUG]:`log`,[O.VERBOSE]:`log`,[O.INFO]:`info`,[O.WARN]:`warn`,[O.ERROR]:`error`},Qe=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=Ze[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},$e=class{constructor(e){this.name=e,this._logLevel=Xe,this._logHandler=Qe,this._userLogHandler=null,Je.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?Ye[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...e),this._logHandler(this,O.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...e),this._logHandler(this,O.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,O.INFO,...e),this._logHandler(this,O.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,O.WARN,...e),this._logHandler(this,O.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...e),this._logHandler(this,O.ERROR,...e)}},et=(e,t)=>t.some(t=>e instanceof t),tt,nt;function rt(){return tt||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function it(){return nt||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var at=new WeakMap,ot=new WeakMap,st=new WeakMap,ct=new WeakMap,lt=new WeakMap;function ut(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(k(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&at.set(t,e)}).catch(()=>{}),lt.set(t,e),t}function dt(e){if(ot.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});ot.set(e,t)}var ft={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return ot.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||st.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return k(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function pt(e){ft=e(ft)}function mt(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(gt(this),t,...n);return st.set(r,t.sort?t.sort():[t]),k(r)}:it().includes(e)?function(...t){return e.apply(gt(this),t),k(at.get(this))}:function(...t){return k(e.apply(gt(this),t))}}function ht(e){return typeof e==`function`?mt(e):(e instanceof IDBTransaction&&dt(e),et(e,rt())?new Proxy(e,ft):e)}function k(e){if(e instanceof IDBRequest)return ut(e);if(ct.has(e))return ct.get(e);let t=ht(e);return t!==e&&(ct.set(e,t),lt.set(t,e)),t}var gt=e=>lt.get(e);function _t(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=k(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(k(o.result),e.oldVersion,e.newVersion,k(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var vt=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],yt=[`put`,`add`,`delete`,`clear`],bt=new Map;function xt(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(bt.get(t))return bt.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=yt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vt.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return bt.set(t,a),a}pt(e=>({...e,get:(t,n,r)=>xt(t,n)||e.get(t,n,r),has:(t,n)=>!!xt(t,n)||e.has(t,n)}));
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var St=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Ct(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function Ct(e){return e.getComponent()?.type===`VERSION`}var wt=`@firebase/app`,Tt=`0.13.2`,Et=new $e(`@firebase/app`),Dt=`@firebase/app-compat`,Ot=`@firebase/analytics-compat`,kt=`@firebase/analytics`,At=`@firebase/app-check-compat`,jt=`@firebase/app-check`,Mt=`@firebase/auth`,Nt=`@firebase/auth-compat`,Pt=`@firebase/database`,Ft=`@firebase/data-connect`,It=`@firebase/database-compat`,Lt=`@firebase/functions`,Rt=`@firebase/functions-compat`,zt=`@firebase/installations`,Bt=`@firebase/installations-compat`,Vt=`@firebase/messaging`,Ht=`@firebase/messaging-compat`,Ut=`@firebase/performance`,Wt=`@firebase/performance-compat`,Gt=`@firebase/remote-config`,Kt=`@firebase/remote-config-compat`,qt=`@firebase/storage`,A=`@firebase/storage-compat`,Jt=`@firebase/firestore`,Yt=`@firebase/ai`,Xt=`@firebase/firestore-compat`,Zt=`firebase`,Qt=`11.10.0`,$t=`[DEFAULT]`,en={[wt]:`fire-core`,[Dt]:`fire-core-compat`,[kt]:`fire-analytics`,[Ot]:`fire-analytics-compat`,[jt]:`fire-app-check`,[At]:`fire-app-check-compat`,[Mt]:`fire-auth`,[Nt]:`fire-auth-compat`,[Pt]:`fire-rtdb`,[Ft]:`fire-data-connect`,[It]:`fire-rtdb-compat`,[Lt]:`fire-fn`,[Rt]:`fire-fn-compat`,[zt]:`fire-iid`,[Bt]:`fire-iid-compat`,[Vt]:`fire-fcm`,[Ht]:`fire-fcm-compat`,[Ut]:`fire-perf`,[Wt]:`fire-perf-compat`,[Gt]:`fire-rc`,[Kt]:`fire-rc-compat`,[qt]:`fire-gcs`,[A]:`fire-gcs-compat`,[Jt]:`fire-fst`,[Xt]:`fire-fst-compat`,[Yt]:`fire-vertex`,"fire-js":`fire-js`,[Zt]:`fire-js-all`},tn=new Map,nn=new Map,rn=new Map;function an(e,t){try{e.container.addComponent(t)}catch(n){Et.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function on(e){let t=e.name;if(rn.has(t))return Et.debug(`There were multiple attempts to register component ${t}.`),!1;rn.set(t,e);for(let t of tn.values())an(t,e);for(let t of nn.values())an(t,e);return!0}function sn(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function cn(e){return e==null?!1:e.settings!==void 0}var ln=new ke(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),un=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new He(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ln.create(`app-deleted`,{appName:this._name})}},dn=Qt;function fn(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r=Object.assign({name:$t,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!=`string`||!i)throw ln.create(`bad-app-name`,{appName:String(i)});if(n||=C(),!n)throw ln.create(`no-options`);let a=tn.get(i);if(a){if(Ne(n,a.options)&&Ne(r,a.config))return a;throw ln.create(`duplicate-app`,{appName:i})}let o=new qe(i);for(let e of rn.values())o.addComponent(e);let s=new un(n,r,o);return tn.set(i,s),s}function pn(e=$t){let t=tn.get(e);if(!t&&e===`[DEFAULT]`&&C())return fn();if(!t)throw ln.create(`no-app`,{appName:e});return t}function mn(){return Array.from(tn.values())}function hn(e,t,n){let r=en[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Et.warn(e.join(` `));return}on(new He(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var gn=`firebase-heartbeat-database`,_n=1,vn=`firebase-heartbeat-store`,yn=null;function bn(){return yn||=_t(gn,_n,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(vn)}catch(e){console.warn(e)}}}}).catch(e=>{throw ln.create(`idb-open`,{originalErrorMessage:e.message})}),yn}async function xn(e){try{let t=(await bn()).transaction(vn),n=await t.objectStore(vn).get(Cn(e));return await t.done,n}catch(e){if(e instanceof Oe)Et.warn(e.message);else{let t=ln.create(`idb-get`,{originalErrorMessage:e?.message});Et.warn(t.message)}}}async function Sn(e,t){try{let n=(await bn()).transaction(vn,`readwrite`);await n.objectStore(vn).put(t,Cn(e)),await n.done}catch(e){if(e instanceof Oe)Et.warn(e.message);else{let t=ln.create(`idb-set`,{originalErrorMessage:e?.message});Et.warn(t.message)}}}function Cn(e){return`${e.name}!${e.options.appId}`}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wn=1024,Tn=30,En=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider(`app`).getImmediate();this._storage=new kn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=Dn();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>Tn){let e=jn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Et.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=Dn(),{heartbeatsToSend:t,unsentEntries:n}=On(this._heartbeatsCache.heartbeats),r=S(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Et.warn(e),``}}};function Dn(){return new Date().toISOString().substring(0,10)}function On(e,t=wn){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),An(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),An(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var kn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Te()?Ee().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await xn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Sn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Sn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function An(e){return S(JSON.stringify({version:2,heartbeats:e})).length}function jn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Mn(e){on(new He(`platform-logger`,e=>new St(e),`PRIVATE`)),on(new He(`heartbeat`,e=>new En(e),`PRIVATE`)),hn(wt,Tt,e),hn(wt,Tt,`esm2017`),hn(`fire-js`,``)}Mn(``);var Nn=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Pn={},Fn,In;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;var r=Array(16);if(typeof t==`string`)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.u=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.B,a=this.h,o=0;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&128>e?a(e,function(e){return new o([e|0],0>e?-1:0)}):new o([e|0],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(0>e)return g(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,2>t||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(0<=e.indexOf(`-`))throw Error(`number format error: interior "-" character`);for(var n=l(t**8),r=d,i=0;i<e.length;i+=8){var a=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+a),t);8>a?(a=l(t**+a),r=r.j(a).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,2>e||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);for(var t=l(e**6),n=this,r=``;;){var i=b(n,t).g;n=_(n,i.j(t));var a=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;6>a.length;)a=`0`+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(this.i(i)&65535)+(e.i(i)&65535),s=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=s>>>16,a&=65535,s&=65535,n[i]=s<<16|a}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(0>this.l(p)&&0>e.l(p))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.i(r)>>>16,s=this.i(r)&65535,c=e.i(i)>>>16,u=e.i(i)&65535;n[2*r+2*i]+=s*u,v(n,2*r+2*i),n[2*r+2*i+1]+=a*u,v(n,2*r+2*i+1),n[2*r+2*i+1]+=s*c,v(n,2*r+2*i+1),n[2*r+2*i+2]+=a*c,v(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;0>=r.l(e);)n=x(n),r=x(r);var i=ee(n,1),a=ee(r,1);for(r=ee(r,2),n=ee(n,2);!m(r);){var o=a.add(r);0>=o.l(e)&&(i=i.add(n),a=o),r=ee(r,1),n=ee(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:2**(r-48),a=l(n),o=a.j(t);h(o)||0<o.l(e);)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function ee(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,In=Pn.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Fn=Pn.Integer=o}).apply(Nn===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Nn);var Ln=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Rn={},zn,Bn,Vn,Hn,Un,Wn,Gn,Kn;(function(){var e,t=typeof Object.defineProperties==`function`?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof Ln==`object`&&Ln];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}function a(e,t){e instanceof String&&(e+=``);var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}i(`Array.prototype.values`,function(e){return e||function(){return a(this,function(e,t){return t})}});var o=o||{},s=this||self;function c(e){var t=typeof e;return t=t==`object`?e?Array.isArray(e)?`array`:t:`null`:t,t==`array`||t==`object`&&typeof e.length==`number`}function l(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function u(e,t,n){return e.call.apply(e.bind,arguments)}function d(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function f(e,t,n){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf(`native code`)!=-1?u:d,f.apply(null,arguments)}function p(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function m(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function h(e){let t=e.length;if(0<t){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function g(e,t){for(let t=1;t<arguments.length;t++){let n=arguments[t];if(c(n)){let t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}class _{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function v(e){return/^[\s\xa0]*$/.test(e)}function y(){var e=s.navigator;return(e&&=e.userAgent)?e:``}function b(e){return b[` `](e),e}b[` `]=function(){};var x=y().indexOf(`Gecko`)!=-1&&!(y().toLowerCase().indexOf(`webkit`)!=-1&&y().indexOf(`Edge`)==-1)&&!(y().indexOf(`Trident`)!=-1||y().indexOf(`MSIE`)!=-1)&&y().indexOf(`Edge`)==-1;function ee(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function te(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function S(e){let t={};for(let n in e)t[n]=e[n];return t}let ne=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function re(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<ne.length;t++)n=ne[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ie(e){var t=1;e=e.split(`:`);let n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function ae(e){s.setTimeout(()=>{throw e},0)}function oe(){var e=de;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class se{constructor(){this.h=this.g=null}add(e,t){let n=ce.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var ce=new _(()=>new le,e=>e.reset());class le{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,ue=!1,de=new se,w=()=>{let e=s.Promise.resolve(void 0);C=()=>{e.then(T)}};var T=()=>{for(var e;e=oe();){try{e.h.call(e.g)}catch(e){ae(e)}var t=ce;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ue=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};s.addEventListener(`test`,e,t),s.removeEventListener(`test`,e,t)}catch{}return e}();function he(e,t){if(pe.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(x){a:{try{b(t.nodeName);var i=!0;break a}catch{}i=!1}i||(t=null)}}else n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType==`string`?e.pointerType:ge[e.pointerType]||``,this.state=e.state,this.i=e,e.defaultPrevented&&he.aa.h.call(this)}}m(he,pe);var ge={2:`touch`,3:`pen`,4:`mouse`};he.prototype.h=function(){he.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var E=`closure_listenable_`+(1e6*Math.random()|0),_e=0;function ve(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++_e,this.da=this.fa=!1}function ye(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function be(e){this.src=e,this.g={},this.h=0}be.prototype.add=function(e,t,n,r,i){var a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);var o=Se(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):(t=new ve(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function xe(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(ye(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Se(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var Ce=`closure_lm_`+(1e6*Math.random()|0),we={};function Te(e,t,n,r,i){if(r&&r.once)return Oe(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Te(e,t[a],n,r,i);return null}return n=Fe(n),e&&e[E]?e.K(t,n,l(r)?!!r.capture:!!r,i):Ee(e,t,n,!1,r,i)}function Ee(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);var o=l(i)?!!i.capture:!!i,s=Ne(e);if(s||(e[Ce]=s=new be(e)),n=s.add(t,n,r,o,a),n.proxy)return n;if(r=De(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)me||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(je(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function De(){function e(n){return t.call(e.src,e.listener,n)}let t=Me;return e}function Oe(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Oe(e,t[a],n,r,i);return null}return n=Fe(n),e&&e[E]?e.L(t,n,l(r)?!!r.capture:!!r,i):Ee(e,t,n,!0,r,i)}function ke(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ke(e,t[a],n,r,i);else r=l(r)?!!r.capture:!!r,n=Fe(n),e&&e[E]?(e=e.i,t=String(t).toString(),t in e.g&&(a=e.g[t],n=Se(a,n,r,i),-1<n&&(ye(a[n]),Array.prototype.splice.call(a,n,1),a.length==0&&(delete e.g[t],e.h--)))):(e&&=Ne(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Se(t,n,r,i)),(n=-1<e?t[e]:null)&&Ae(n))}function Ae(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[E])xe(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(je(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ne(t))?(xe(n,e),n.h==0&&(n.src=null,t[Ce]=null)):ye(e)}}}function je(e){return e in we?we[e]:we[e]=`on`+e}function Me(e,t){if(e.da)e=!0;else{t=new he(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Ae(e),e=n.call(r,t)}return e}function Ne(e){return e=e[Ce],e instanceof be?e:null}var Pe=`__closure_events_fn_`+(1e9*Math.random()>>>0);function Fe(e){return typeof e==`function`?e:(e[Pe]||(e[Pe]=function(t){return e.handleEvent(t)}),e[Pe])}function Ie(){fe.call(this),this.i=new be(this),this.M=this,this.F=null}m(Ie,fe),Ie.prototype[E]=!0,Ie.prototype.removeEventListener=function(e,t,n,r){ke(this,e,t,n,r)};function D(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new pe(t,e);else if(t instanceof pe)t.target=t.target||e;else{var i=t;t=new pe(r,e),re(t,i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Le(o,r,!0,t)&&i}if(o=t.g=e,i=Le(o,r,!0,t)&&i,i=Le(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)o=t.g=n[a],i=Le(o,r,!1,t)&&i}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ye(n[r]);delete e.g[t],e.h--}}this.F=null},Ie.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ie.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Le(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.da&&o.capture==n){var s=o.listener,c=o.ha||o.src;o.fa&&xe(e.i,o),i=!1!==s.call(c,r)&&i}}return i&&!r.defaultPrevented}function Re(e,t,n){if(typeof e==`function`)n&&(e=f(e,n));else if(e&&typeof e.handleEvent==`function`)e=f(e.handleEvent,e);else throw Error(`Invalid listener argument`);return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ze(e){e.g=Re(()=>{e.g=null,e.i&&(e.i=!1,ze(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Be extends fe{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ze(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ve(e){fe.call(this),this.h=e,this.g={}}m(Ve,fe);var He=[];function Ue(e){ee(e.g,function(e,t){this.g.hasOwnProperty(t)&&Ae(e)},e),e.g={}}Ve.prototype.N=function(){Ve.aa.N.call(this),Ue(this)},Ve.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var We=s.JSON.stringify,Ge=s.JSON.parse,Ke=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function qe(){}qe.prototype.h=null;function Je(e){return e.h||=e.i()}function O(){}var Ye={OPEN:`a`,kb:`b`,Ja:`c`,wb:`d`};function Xe(){pe.call(this,`d`)}m(Xe,pe);function Ze(){pe.call(this,`c`)}m(Ze,pe);var Qe={},$e=null;function et(){return $e||=new Ie}Qe.La=`serverreachability`;function tt(e){pe.call(this,Qe.La,e)}m(tt,pe);function nt(e){let t=et();D(t,new tt(t))}Qe.STAT_EVENT=`statevent`;function rt(e,t){pe.call(this,Qe.STAT_EVENT,e),this.stat=t}m(rt,pe);function it(e){let t=et();D(t,new rt(t,e))}Qe.Ma=`timingevent`;function at(e,t){pe.call(this,Qe.Ma,e),this.size=t}m(at,pe);function ot(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return s.setTimeout(function(){e()},t)}function st(){this.g=!0}st.prototype.xa=function(){this.g=!1};function ct(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o=``,s=a.split(`&`),c=0;c<s.length;c++){var l=s[c].split(`=`);if(1<l.length){var u=l[0];l=l[1];var d=u.split(`_`);o=2<=d.length&&d[1]==`type`?o+(u+`=`+l+`&`):o+(u+`=redacted&`)}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function lt(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function ut(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+ft(e,n)+(r?` `+r:``)})}function dt(e,t){e.info(function(){return`TIMEOUT: `+t})}st.prototype.info=function(){};function ft(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if(a!=`noop`&&a!=`stop`&&a!=`close`)for(var o=1;o<i.length;o++)i[o]=``}}}}return We(n)}catch{return t}}var pt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mt={lb:`complete`,Hb:`success`,Ja:`error`,Ia:`abort`,zb:`ready`,Ab:`readystatechange`,TIMEOUT:`timeout`,vb:`incrementaldata`,yb:`progress`,ob:`downloadprogress`,Pb:`uploadprogress`},ht;function k(){}m(k,qe),k.prototype.g=function(){return new XMLHttpRequest},k.prototype.i=function(){return{}},ht=new k;function gt(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new Ve(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _t}function _t(){this.i=null,this.g=``,this.h=!1}var vt={},yt={};function bt(e,t,n){e.L=1,e.v=Jt(Wt(t)),e.m=n,e.P=!0,xt(e,null)}function xt(e,t){e.F=Date.now(),wt(e),e.A=Wt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),cn(n.i,`t`,r),e.C=0,n=e.j.J,e.h=new _t,e.g=ir(e.j,n?t:null,!e.m),0<e.O&&(e.M=new Be(f(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i=`readystatechange`;Array.isArray(i)||(i&&(He[0]=i.toString()),i=He);for(var a=0;a<i.length;a++){var o=Te(n,i[a],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?S(e.H):{},e.m?(e.u||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.A,e.u,e.m,t)):(e.u=`GET`,e.g.ea(e.A,e.u,null,t)),nt(),ct(e.i,e.u,e.A,e.l,e.R,e.m)}gt.prototype.ca=function(e){e=e.target;let t=this.M;t&&jn(e)==3?t.j():this.Y(e)},gt.prototype.Y=function(e){try{if(e==this.g)a:{let f=jn(this.g);var t=this.g.Ba();let p=this.g.Z();if(!(3>f)&&(f!=3||this.g&&(this.h.h||this.g.oa()||Mn(this.g)))){this.J||f!=4||t==7||nt(t==8||0>=p?3:2),Et(this);var n=this.g.Z();this.X=n;b:if(St(this)){var r=Mn(this.g);e=``;var i=r.length,a=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>`u`){Ot(this),Dt(this);var o=``;break b}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=n==200,lt(this.i,this.u,this.A,this.l,this.R,f,n),this.o){if(this.T&&!this.K){b:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!v(c)){var u=c;break b}}u=null}if(n=u)ut(this.i,this.l,n,`Initial handshake response via X-HTTP-Initial-Response`),this.K=!0,kt(this,n);else{this.o=!1,this.s=3,it(12),Ot(this),Dt(this);break a}}if(this.P){n=!0;let e;for(;!this.J&&this.C<o.length;)if(e=Ct(this,o),e==yt){f==4&&(this.s=4,it(14),n=!1),ut(this.i,this.l,null,`[Incomplete Response]`);break}else if(e==vt){this.s=4,it(15),ut(this.i,this.l,o,`[Invalid Chunk]`),n=!1;break}else ut(this.i,this.l,e,null),kt(this,e);if(St(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),f!=4||o.length!=0||this.h.h||(this.s=1,it(16),n=!1),this.o=this.o&&n,!n)ut(this.i,this.l,o,`[Invalid Chunked Response]`),Ot(this),Dt(this);else if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info(`Great, no buffering proxy detected. Bytes received: `+o.length),tr(d),d.M=!0,it(11))}}else ut(this.i,this.l,o,null),kt(this,o);f==4&&Ot(this),this.o&&!this.J&&(f==4?N(this.j,this):(this.o=!1,wt(this)))}else Nn(this.g),n==400&&0<o.indexOf(`Unknown SID`)?(this.s=3,it(12)):(this.s=0,it(13)),Ot(this),Dt(this)}}}catch{}};function St(e){return e.g?e.u==`GET`&&e.L!=2&&e.j.Ca:!1}function Ct(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?yt:(n=Number(t.substring(n,r)),isNaN(n)?vt:(r+=1,r+n>t.length?yt:(t=t.slice(r,r+n),e.C=r+n,t)))}gt.prototype.cancel=function(){this.J=!0,Ot(this)};function wt(e){e.S=Date.now()+e.I,Tt(e,e.I)}function Tt(e,t){if(e.B!=null)throw Error(`WatchDog timer not null`);e.B=ot(f(e.ba,e),t)}function Et(e){e.B&&=(s.clearTimeout(e.B),null)}gt.prototype.ba=function(){this.B=null;let e=Date.now();0<=e-this.S?(dt(this.i,this.A),this.L!=2&&(nt(),it(17)),Ot(this),this.s=2,Dt(this)):Tt(this,this.S-e)};function Dt(e){e.j.G==0||e.J||N(e.j,e)}function Ot(e){Et(e);var t=e.M;t&&typeof t.ma==`function`&&t.ma(),e.M=null,Ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function kt(e,t){try{var n=e.j;if(n.G!=0&&(n.g==e||Pt(n.h,e))){if(!e.K&&Pt(n.h,e)&&n.G==3){try{var r=n.Da.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)nr(n),qn(n);else break a;er(n),it(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&n.v==0&&!n.C&&(n.C=ot(f(n.Za,n),6e3));if(1>=Nt(n.h)&&n.ca){try{n.ca()}catch{}n.ca=void 0}}else F(n,11)}else if((e.K||n.g==e)&&nr(n),!v(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.T=l[0],l=l[1],n.G==2)if(l[0]==`c`){n.K=l[1],n.ia=l[2];let t=l[3];t!=null&&(n.la=t,n.j.info(`VER=`+n.la));let i=l[4];i!=null&&(n.Aa=i,n.j.info(`SVER=`+n.Aa));let u=l[5];u!=null&&typeof u==`number`&&0<u&&(r=1.5*u,n.L=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(Ft(a,a.h),null))}if(r.D){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.ya=e,A(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.R+`ms`)),r=n;var o=e;if(r.qa=rr(r,r.J?r.ia:null,r.W),o.K){It(r.h,o);var s=o,c=r.L;c&&(s.I=c),s.B&&(Et(s),wt(s)),r.g=o}else $n(r);0<n.i.length&&Yn(n)}else l[0]!=`stop`&&l[0]!=`close`||F(n,7);else n.G==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?F(n,7):In(n):l[0]!=`noop`&&n.l&&n.l.ta(l),n.v=0)}}nt(4)}catch{}}var At=class{constructor(e,t){this.g=e,this.map=t}};function jt(e){this.l=e||10,s.PerformanceNavigationTiming?(e=s.performance.getEntriesByType(`navigation`),e=0<e.length&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Nt(e){return e.h?1:e.g?e.g.size:0}function Pt(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Ft(e,t){e.g?e.g.add(t):e.h=t}function It(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}jt.prototype.cancel=function(){if(this.i=Lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Lt(e){if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function Rt(e){if(e.V&&typeof e.V==`function`)return e.V();if(typeof Map<`u`&&e instanceof Map||typeof Set<`u`&&e instanceof Set)return Array.from(e.values());if(typeof e==`string`)return e.split(``);if(c(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function zt(e){if(e.na&&typeof e.na==`function`)return e.na();if(!e.V||typeof e.V!=`function`){if(typeof Map<`u`&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<`u`&&e instanceof Set)){if(c(e)||typeof e==`string`){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(let r in t=[],n=0,e)t[n++]=r;return t}}}function Bt(e,t){if(e.forEach&&typeof e.forEach==`function`)e.forEach(t,void 0);else if(c(e)||typeof e==`string`)Array.prototype.forEach.call(e,t,void 0);else for(var n=zt(e),r=Rt(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}var Vt=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Ht(e,t){if(e){e=e.split(`&`);for(var n=0;n<e.length;n++){var r=e[n].indexOf(`=`),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g,` `)):``)}}}function Ut(e){if(this.g=this.o=this.j=``,this.s=null,this.m=this.l=``,this.h=!1,e instanceof Ut){this.h=e.h,Gt(this,e.j),this.o=e.o,this.g=e.g,Kt(this,e.s),this.l=e.l;var t=e.i,n=new rn;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),qt(this,n),this.m=e.m}else e&&(t=String(e).match(Vt))?(this.h=!1,Gt(this,t[1]||``,!0),this.o=Yt(t[2]||``),this.g=Yt(t[3]||``,!0),Kt(this,t[4]),this.l=Yt(t[5]||``,!0),qt(this,t[6]||``,!0),this.m=Yt(t[7]||``)):(this.h=!1,this.i=new rn(null,this.h))}Ut.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Xt(t,Qt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Xt(t,Qt,!0),`@`),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.s,n!=null&&e.push(`:`,String(n))),(n=this.l)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Xt(n,n.charAt(0)==`/`?en:$t,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Xt(n,nn)),e.join(``)};function Wt(e){return new Ut(e)}function Gt(e,t,n){e.j=n?Yt(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Kt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error(`Bad port number `+t);e.s=t}else e.s=null}function qt(e,t,n){t instanceof rn?(e.i=t,un(e.i,e.h)):(n||(t=Xt(t,tn)),e.i=new rn(t,e.h))}function A(e,t,n){e.i.set(t,n)}function Jt(e){return A(e,`zx`,Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Yt(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Xt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Zt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Zt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Qt=/[#\/\?@]/g,$t=/[#\?:]/g,en=/[#\?]/g,tn=/[#\?@]/g,nn=/#/g;function rn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function an(e){e.g||(e.g=new Map,e.h=0,e.i&&Ht(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=rn.prototype,e.add=function(e,t){an(this),this.i=null,e=ln(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function on(e,t){an(e),t=ln(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function sn(e,t){return an(e),t=ln(e,t),e.g.has(t)}e.forEach=function(e,t){an(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){an(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){let i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){an(this);let t=[];if(typeof e==`string`)sn(this,e)&&(t=t.concat(this.g.get(ln(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return an(this),this.i=null,e=ln(this,e),sn(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=this.V(e),0<e.length?String(e[0]):t):t};function cn(e,t,n){on(e,t),0<n.length&&(e.i=null,e.g.set(ln(e,t),h(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];let a=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=a;o[r]!==``&&(i+=`=`+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join(`&`)};function ln(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function un(e,t){t&&!e.j&&(an(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(on(this,t),cn(this,n,e))},e)),e.j=t}function dn(e,t){let n=new st;if(s.Image){let r=new Image;r.onload=p(pn,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=p(pn,n,`TestLoadImage: error`,!1,t,r),r.onabort=p(pn,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=p(pn,n,`TestLoadImage: timeout`,!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function fn(e,t){let n=new st,r=new AbortController,i=setTimeout(()=>{r.abort(),pn(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?pn(n,`TestPingServer: ok`,!0,t):pn(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),pn(n,`TestPingServer: error`,!1,t)})}function pn(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function mn(){this.g=new Ke}function hn(e,t,n){let r=n||``;try{Bt(e,function(e,n){let i=e;l(e)&&(i=We(e)),t.push(r+n+`=`+encodeURIComponent(i))})}catch(e){throw t.push(r+`type=_badmap`),e}}function gn(e){this.l=e.Ub||null,this.j=e.eb||!1}m(gn,qe),gn.prototype.g=function(){return new _n(this.l,this.j)},gn.prototype.i=function(e){return function(){return e}}({});function _n(e,t){Ie.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B=`GET`,this.A=``,this.g=!1,this.v=this.j=this.l=null}m(_n,Ie),e=_n.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.B=e,this.A=t,this.readyState=1,bn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);this.g=!0;let t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.u=new Headers,this.status=0,this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yn(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,bn(this)),this.g&&(this.readyState=3,bn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(s.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.v=new TextDecoder;vn(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))};function vn(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?yn(this):bn(this),this.readyState==3&&vn(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,yn(this))},e.Qa=function(e){this.g&&(this.response=e,yn(this))},e.ga=function(){this.g&&yn(this)};function yn(e){e.readyState=4,e.l=null,e.j=null,e.v=null,bn(e)}e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function bn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(_n.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function xn(e){let t=``;return ee(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function Sn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=xn(n),typeof e==`string`||A(e,t,n))}function Cn(e){Ie.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D=``,this.m=0,this.l=``,this.j=this.B=this.u=this.A=!1,this.I=null,this.H=``,this.J=!1}m(Cn,Ie);var wn=/^https?$/i,Tn=[`POST`,`PUT`];e=Cn.prototype,e.Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ht.g(),this.v=this.o?Je(this.o):Je(ht),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){En(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Tn,t,void 0))||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.H&&(this.g.responseType=this.H),`withCredentials`in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{An(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){En(this,e)}};function En(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Dn(e),kn(e)}function Dn(e){e.A||(e.A=!0,D(e,`complete`),D(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,D(this,`complete`),D(this,`abort`),kn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kn(this,!0)),Cn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?On(this):this.bb())},e.bb=function(){On(this)};function On(e){if(e.h&&o!==void 0&&(!e.v[1]||jn(e)!=4||e.Z()!=2)){if(e.u&&jn(e)==4)Re(e.Ea,0,e);else if(D(e,`readystatechange`),jn(e)==4){e.h=!1;try{let o=e.Z();a:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var i=String(e.D).match(Vt)[1]||null;!i&&s.self&&s.self.location&&(i=s.self.location.protocol.slice(0,-1)),r=!wn.test(i?i.toLowerCase():``)}n=r}if(n)D(e,`complete`),D(e,`success`);else{e.m=6;try{var a=2<jn(e)?e.g.statusText:``}catch{a=``}e.l=a+` [`+e.Z()+`]`,Dn(e)}}finally{kn(e)}}}}function kn(e,t){if(e.g){An(e);let n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||D(e,`ready`);try{n.onreadystatechange=r}catch{}}}function An(e){e.I&&=(s.clearTimeout(e.I),null)}e.isActive=function(){return!!this.g};function jn(e){return e.g?e.g.readyState:0}e.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Ge(t)}};function Mn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.H){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Nn(e){let t={};e=(e.g&&2<=jn(e)&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(v(e[r]))continue;var n=ie(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}te(t,function(e){return e.join(`, `)})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l==`string`?this.l:String(this.l)};function Pn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Fn(e){this.Aa=0,this.i=[],this.j=new st,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pn(`failFast`,!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pn(`baseRetryDelayMs`,5e3,e),this.cb=Pn(`retryDelaySeedMs`,1e4,e),this.Wa=Pn(`forwardChannelMaxRetries`,2,e),this.wa=Pn(`forwardChannelRequestTimeoutMs`,2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K=``,this.h=new jt(e&&e.concurrentRequestLimit),this.Da=new mn,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Fn.prototype,e.la=8,e.G=1,e.connect=function(e,t,n,r){it(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=rr(this,null,this.W),Yn(this)};function In(e){if(Jn(e),e.G==3){var t=e.U++,n=Wt(e.I);if(A(n,`SID`,e.K),A(n,`RID`,t),A(n,`TYPE`,`terminate`),Qn(e,n),t=new gt(e,e.j,t),t.L=2,t.v=Jt(Wt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),``)}catch{}!n&&s.Image&&(new Image().src=t.v,n=!0),n||(t.g=ir(t.j,null),t.g.ea(t.v)),t.F=Date.now(),wt(t)}I(e)}function qn(e){e.g&&=(tr(e),e.g.cancel(),null)}function Jn(e){qn(e),e.u&&=(s.clearTimeout(e.u),null),nr(e),e.h.cancel(),e.s&&=(typeof e.s==`number`&&s.clearTimeout(e.s),null)}function Yn(e){if(!Mt(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||w(),ue||=(C(),!0),de.add(t,e),e.B=0}}function Xn(e,t){return Nt(e.h)>=e.h.j-(e.s?1:0)?!1:e.s?(e.i=t.D.concat(e.i),!0):e.G==1||e.G==2||e.B>=(e.Va?0:e.Wa)?!1:(e.s=ot(f(e.Ga,e,t),P(e,e.B)),e.B++,!0)}e.Ga=function(e){if(this.s)if(this.s=null,this.G==1){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let i=new gt(this,this.j,e),a=this.o;if(this.S&&(a?(a=S(a),re(a,this.S)):a=this.S),this.m!==null||this.O||(i.H=a,a=null),this.P)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=j(this,i,t),n=Wt(this.I),A(n,`RID`,e),A(n,`CVER`,22),this.D&&A(n,`X-HTTP-Session-Id`,this.D),Qn(this,n),a&&(this.O?t=`headers=`+encodeURIComponent(String(xn(a)))+`&`+t:this.m&&Sn(n,this.m,a)),Ft(this.h,i),this.Ua&&A(n,`TYPE`,`init`),this.P?(A(n,`$req`,t),A(n,`SID`,`null`),i.T=!0,bt(i,n,null)):bt(i,n,t),this.G=2}}else this.G==3&&(e?Zn(this,e):this.i.length==0||Mt(this.h)||Zn(this))};function Zn(e,t){var n=t?t.l:e.U++;let r=Wt(e.I);A(r,`SID`,e.K),A(r,`RID`,n),A(r,`AID`,e.T),Qn(e,r),e.m&&e.o&&Sn(r,e.m,e.o),n=new gt(e,e.j,n,e.B+1),e.m===null&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=j(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Ft(e.h,n),bt(n,r,t)}function Qn(e,t){e.H&&ee(e.H,function(e,n){A(t,n,e)}),e.l&&Bt({},function(e,n){A(t,n,e)})}function j(e,t,n){n=Math.min(e.i.length,n);var r=e.l?f(e.l.Na,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?0<n?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g,s=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{hn(s,e,`req`+n+`_`)}catch{r&&r(s)}}if(a){r=e.join(`&`);break a}}}return e=e.i.splice(0,n),t.D=e,r}function $n(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||w(),ue||=(C(),!0),de.add(t,e),e.v=0}}function er(e){return e.g||e.u||3<=e.v?!1:(e.Y++,e.u=ot(f(e.Fa,e),P(e,e.v)),e.v++,!0)}e.Fa=function(){if(this.u=null,M(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var e=2*this.R;this.j.info(`BP detection timer enabled: `+e),this.A=ot(f(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.M=!0,it(10),qn(this),M(this))};function tr(e){e.A!=null&&(s.clearTimeout(e.A),e.A=null)}function M(e){e.g=new gt(e,e.j,`rpc`,e.Y),e.m===null&&(e.g.H=e.o),e.g.O=0;var t=Wt(e.qa);A(t,`RID`,`rpc`),A(t,`SID`,e.K),A(t,`AID`,e.T),A(t,`CI`,e.F?`0`:`1`),!e.F&&e.ja&&A(t,`TO`,e.ja),A(t,`TYPE`,`xmlhttp`),Qn(e,t),e.m&&e.o&&Sn(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=Jt(Wt(t)),n.m=null,n.P=!0,xt(n,e)}e.Za=function(){this.C!=null&&(this.C=null,qn(this),er(this),it(19))};function nr(e){e.C!=null&&(s.clearTimeout(e.C),e.C=null)}function N(e,t){var n=null;if(e.g==t){nr(e),tr(e),e.g=null;var r=2}else if(Pt(e.h,t))n=t.D,It(e.h,t),r=1;else return;if(e.G!=0){if(t.o)if(r==1){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;r=et(),D(r,new at(r,n)),Yn(e)}else $n(e);else if(i=t.s,i==3||i==0&&0<t.X||!(r==1&&Xn(e,t)||r==2&&er(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:F(e,5);break;case 4:F(e,10);break;case 3:F(e,6);break;default:F(e,2)}}}function P(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function F(e,t){if(e.j.info(`Error code `+t),t==2){var n=f(e.fb,e),r=e.Xa;let t=!r;r=new Ut(r||`//www.google.com/images/cleardot.gif`),s.location&&s.location.protocol==`http`||Gt(r,`https`),Jt(r),t?dn(r.toString(),n):fn(r.toString(),n)}else it(2);e.G=0,e.l&&e.l.sa(t),I(e),Jn(e)}e.fb=function(e){e?(this.j.info(`Successfully pinged google.com`),it(2)):(this.j.info(`Failed to ping google.com`),it(1))};function I(e){if(e.G=0,e.ka=[],e.l){let t=Lt(e.h);(t.length!=0||e.i.length!=0)&&(g(e.ka,t),g(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function rr(e,t,n){var r=n instanceof Ut?Wt(n):new Ut(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Kt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;var a=new Ut(null);r&&Gt(a,r),t&&(a.g=t),i&&Kt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&A(r,n,t),A(r,`VER`,e.la),Qn(e,r),r}function ir(e,t,n){if(t&&!e.J)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Ca&&!e.pa?new Cn(new gn({eb:n})):new Cn(e.pa),t.Ha(e.J),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function ar(){}e=ar.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function or(){}or.prototype.g=function(e,t){return new sr(e,t)};function sr(e,t){Ie.call(this),this.g=new Fn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e[`X-WebChannel-Client-Profile`]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!v(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!v(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new ur(this)}m(sr,Ie),sr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sr.prototype.close=function(){In(this.g)},sr.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.u&&(n={},n.__data__=We(e),e=n);t.i.push(new At(t.Ya++,e)),t.G==3&&Yn(t)},sr.prototype.N=function(){this.g.l=null,delete this.j,In(this.g),delete this.g,sr.aa.N.call(this)};function cr(e){Xe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}m(cr,Xe);function lr(){Ze.call(this),this.status=1}m(lr,Ze);function ur(e){this.g=e}m(ur,ar),ur.prototype.ua=function(){D(this.g,`a`)},ur.prototype.ta=function(e){D(this.g,new cr(e))},ur.prototype.sa=function(e){D(this.g,new lr)},ur.prototype.ra=function(){D(this.g,`b`)},or.prototype.createWebChannel=or.prototype.g,sr.prototype.send=sr.prototype.o,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,Kn=Rn.createWebChannelTransport=function(){return new or},Gn=Rn.getStatEventTarget=function(){return et()},Wn=Rn.Event=Qe,Un=Rn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pt.NO_ERROR=0,pt.TIMEOUT=8,pt.HTTP_ERROR=6,Hn=Rn.ErrorCode=pt,mt.COMPLETE=`complete`,Vn=Rn.EventType=mt,O.EventType=Ye,Ye.OPEN=`a`,Ye.CLOSE=`b`,Ye.ERROR=`c`,Ye.MESSAGE=`d`,Ie.prototype.listen=Ie.prototype.K,Bn=Rn.WebChannel=O,Rn.FetchXmlHttpFactory=gn,Cn.prototype.listenOnce=Cn.prototype.L,Cn.prototype.getLastError=Cn.prototype.Ka,Cn.prototype.getLastErrorCode=Cn.prototype.Ba,Cn.prototype.getStatus=Cn.prototype.Z,Cn.prototype.getResponseJson=Cn.prototype.Oa,Cn.prototype.getResponseText=Cn.prototype.oa,Cn.prototype.send=Cn.prototype.ea,Cn.prototype.setWithCredentials=Cn.prototype.Ha,zn=Rn.XhrIo=Cn}).apply(Ln===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Ln);var qn=`@firebase/firestore`,Jn=`4.8.0`,Yn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn(`google-credentials-uid`),Yn.FIRST_PARTY=new Yn(`first-party-uid`),Yn.MOCK_USER=new Yn(`mock-user`);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xn=`11.10.0`,Zn=new $e(`@firebase/firestore`);function Qn(){return Zn.logLevel}function j(e,...t){if(Zn.logLevel<=O.DEBUG){let n=t.map(tr);Zn.debug(`Firestore (${Xn}): ${e}`,...n)}}function $n(e,...t){if(Zn.logLevel<=O.ERROR){let n=t.map(tr);Zn.error(`Firestore (${Xn}): ${e}`,...n)}}function er(e,...t){if(Zn.logLevel<=O.WARN){let n=t.map(tr);Zn.warn(`Firestore (${Xn}): ${e}`,...n)}}function tr(e){if(typeof e==`string`)return e;try{
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
return function(e){return JSON.stringify(e)}(e)}catch{return e}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function M(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,nr(e,r,n)}function nr(e,t,n){let r=`FIRESTORE (${Xn}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw $n(r),Error(r)}function N(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||nr(t,i,r)}function P(e,t){return e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},I=class extends Oe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},rr=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},ir=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},ar=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yn.UNAUTHENTICATED)))}shutdown(){}},or=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},sr=class{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){N(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{j(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(j(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new rr)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(N(typeof t.accessToken==`string`,31837,{l:t}),new ir(t.accessToken,this.currentUser)):null:(j(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return N(e===null||typeof e==`string`,2055,{h:e}),new Yn(e)}},cr=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},lr=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new cr(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},ur=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},dr=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){N(this.o===void 0,3512);let n=e=>{e.error!=null&&j(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,j(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{j(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):j(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new ur(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(N(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new ur(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function fr(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function pr(){return new TextEncoder}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var mr=class{static newId(){let e=``;for(;e.length<20;){let t=fr(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function L(e,t){return e<t?-1:e>t?1:0}function hr(e,t){let n=0;for(;n<e.length&&n<t.length;){let r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return L(r,i);{let a=pr(),o=_r(a.encode(gr(e,n)),a.encode(gr(t,n)));return o===0?L(r,i):o}}n+=r>65535?2:1}return L(e.length,t.length)}function gr(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function _r(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return L(e[n],t[n]);return L(e.length,t.length)}function vr(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yr=`__name__`,br=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&M(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&M(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return L(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):hr(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return Fn.fromString(e.substring(4,e.length-2))}},xr=class e extends br{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new I(F.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},Sr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Cr=class e extends br{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return Sr.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yr}static keyField(){return new e([yr])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new I(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new I(F.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new I(F.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new I(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},R=class e{constructor(e){this.path=e}static fromPath(t){return new e(xr.fromString(t))}static fromName(t){return new e(xr.fromString(t).popFirst(5))}static empty(){return new e(xr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new xr(t.slice()))}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wr(e,t,n){if(!n)throw new I(F.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Tr(e,t,n,r){if(!0===t&&!0===r)throw new I(F.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Er(e){if(!R.isDocumentKey(e))throw new I(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Dr(e){if(R.isDocumentKey(e))throw new I(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Or(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function kr(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:M(12329,{type:typeof e})}function Ar(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new I(F.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=kr(e);throw new I(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function jr(e,t){let n={typeString:e};return t&&(n.value=t),n}function Mr(e,t){if(!Or(e))throw new I(F.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new I(F.INVALID_ARGUMENT,n);return!0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Nr=-62135596800,Pr=1e6,Fr=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Pr);return new e(n,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new I(F.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<Nr||e>=253402300800)throw new I(F.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pr}_compareTo(e){return this.seconds===e.seconds?L(this.nanoseconds,e.nanoseconds):L(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Mr(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-Nr;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Fr._jsonSchemaVersion=`firestore/timestamp/1.0`,Fr._jsonSchema={type:jr(`string`,Fr._jsonSchemaVersion),seconds:jr(`number`),nanoseconds:jr(`number`)};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var z=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Fr(0,0))}static max(){return new e(new Fr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},Ir=-1,Lr=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};Lr.UNKNOWN_ID=-1;function Rr(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=z.fromTimestamp(r===1e9?new Fr(n+1,0):new Fr(n,r));return new Br(i,R.empty(),t)}function zr(e){return new Br(e.readTime,e.key,Ir)}var Br=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(z.min(),R.empty(),Ir)}static max(){return new e(z.max(),R.empty(),Ir)}};function Vr(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=R.comparator(e.documentKey,t.documentKey),n===0?L(e.largestBatchId,t.largestBatchId):n):n}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hr=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Ur=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Wr(e){if(e.code!==F.FAILED_PRECONDITION||e.message!==Hr)throw e;j(`LocalStore`,`Unexpectedly lost primary lease`)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var B=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&M(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function Gr(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function Kr(e){return e.name===`IndexedDbTransactionError`}
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var qr=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ae&&this.ae(e),e}};qr.ue=-1;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Jr=-1;function Yr(e){return e==null}function Xr(e){return e===0&&1/e==-1/0}function Zr(e){return typeof e==`number`&&Number.isInteger(e)&&!Xr(e)&&e<=2**53-1&&e>=-(2**53-1)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qr=``;function $r(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=ti(t)),t=ei(e.get(n),t);return ti(t)}function ei(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case Qr:n+=``;break;default:n+=r}}return n}function ti(e){return e+Qr+``}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ni(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ri(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ii(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ai=class e{constructor(e,t){this.comparator=e,this.root=t||si.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,si.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oi(this.root,e,this.comparator,!1)}getReverseIterator(){return new oi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oi(this.root,e,this.comparator,!0)}},oi=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},si=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw M(43730,{key:this.key,value:this.value});if(this.right.isRed())throw M(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw M(27949);return e+(this.isRed()?0:1)}};si.EMPTY=null,si.RED=!0,si.BLACK=!1,si.EMPTY=new class{constructor(){this.size=0}get key(){throw M(57766)}get value(){throw M(16141)}get color(){throw M(16727)}get left(){throw M(29726)}get right(){throw M(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new si(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ci=class e{constructor(e){this.comparator=e,this.data=new ai(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new li(this.data.getIterator())}getIteratorFrom(e){return new li(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},li=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},ui=class e{constructor(e){this.fields=e,e.sort(Cr.comparator)}static empty(){return new e([])}unionWith(t){let n=new ci(Cr.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},di=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},fi=class e{constructor(e){this.binaryString=e}static fromBase64String(t){let n=function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new di(`Invalid base64 string: `+e):e}}(t);return new e(n)}static fromUint8Array(t){let n=function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return L(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};fi.EMPTY_BYTE_STRING=new fi(``);var pi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(e){if(N(!!e,39018),typeof e==`string`){let t=0,n=pi.exec(e);if(N(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:hi(e.seconds),nanos:hi(e.nanos)}}function hi(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function gi(e){return typeof e==`string`?fi.fromBase64String(e):fi.fromUint8Array(e)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var _i=`server_timestamp`,vi=`__type__`,yi=`__previous_value__`,bi=`__local_write_time__`;function xi(e){return(e?.mapValue?.fields||{})[vi]?.stringValue===_i}function Si(e){let t=e.mapValue.fields[yi];return xi(t)?Si(t):t}function Ci(e){let t=mi(e.mapValue.fields[bi].timestampValue);return new Fr(t.seconds,t.nanos)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wi=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},Ti=`(default)`,Ei=class e{constructor(e,t){this.projectId=e,this.database=t||Ti}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===Ti}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},Di=`__type__`,Oi=`__max__`,ki={mapValue:{fields:{__type__:{stringValue:Oi}}}},Ai=`__vector__`,ji=`value`;function Mi(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?xi(e)?4:qi(e)?9007199254740991:Gi(e)?10:11:M(28295,{value:e})}function Ni(e,t){if(e===t)return!0;let n=Mi(e);if(n!==Mi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ci(e).isEqual(Ci(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=mi(e.timestampValue),r=mi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return gi(e.bytesValue).isEqual(gi(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return hi(e.geoPointValue.latitude)===hi(t.geoPointValue.latitude)&&hi(e.geoPointValue.longitude)===hi(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return hi(e.integerValue)===hi(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=hi(e.doubleValue),r=hi(t.doubleValue);return n===r?Xr(n)===Xr(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return vr(e.arrayValue.values||[],t.arrayValue.values||[],Ni);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ni(n)!==ni(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!Ni(n[e],r[e])))return!1;return!0}(e,t);default:return M(52216,{left:e})}}function Pi(e,t){return(e.values||[]).find((e=>Ni(e,t)))!==void 0}function Fi(e,t){if(e===t)return 0;let n=Mi(e),r=Mi(t);if(n!==r)return L(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return L(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=hi(e.integerValue||e.doubleValue),r=hi(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ii(e.timestampValue,t.timestampValue);case 4:return Ii(Ci(e),Ci(t));case 5:return hr(e.stringValue,t.stringValue);case 6:return function(e,t){let n=gi(e),r=gi(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=L(n[e],r[e]);if(t!==0)return t}return L(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=L(hi(e.latitude),hi(t.latitude));return n===0?L(hi(e.longitude),hi(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return Li(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[ji]?.arrayValue,a=r[ji]?.arrayValue,o=L(i?.values?.length||0,a?.values?.length||0);return o===0?Li(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ki.mapValue&&t===ki.mapValue)return 0;if(e===ki.mapValue)return 1;if(t===ki.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=hr(r[e],a[e]);if(t!==0)return t;let o=Fi(n[r[e]],i[a[e]]);if(o!==0)return o}return L(r.length,a.length)}(e.mapValue,t.mapValue);default:throw M(23264,{le:n})}}function Ii(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return L(e,t);let n=mi(e),r=mi(t),i=L(n.seconds,r.seconds);return i===0?L(n.nanos,r.nanos):i}function Li(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=Fi(n[e],r[e]);if(t)return t}return L(n.length,r.length)}function Ri(e){return zi(e)}function zi(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=mi(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return gi(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return R.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=zi(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${zi(e.fields[i])}`;return n+`}`}(e.mapValue):M(61005,{value:e})}function Bi(e){switch(Mi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Si(e);return t?16+Bi(t):16;case 5:return 2*e.stringValue.length;case 6:return gi(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Bi(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ri(e.fields,((e,n)=>{t+=e.length+Bi(n)})),t}(e.mapValue);default:throw M(13486,{value:e})}}function Vi(e){return!!e&&`integerValue`in e}function Hi(e){return!!e&&`arrayValue`in e}function Ui(e){return!!e&&`nullValue`in e}function V(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function Wi(e){return!!e&&`mapValue`in e}function Gi(e){return(e?.mapValue?.fields||{})[Di]?.stringValue===Ai}function Ki(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return ri(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ki(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ki(e.arrayValue.values[n]);return t}return Object.assign({},e)}function qi(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Oi}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ji=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Wi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ki(t)}setAll(e){let t=Cr.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ki(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());Wi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Wi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ri(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(Ki(this.value))}};function Yi(e){let t=[];return ri(e.fields,((e,n)=>{let r=new Cr([e]);if(Wi(n)){let e=Yi(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new ui(t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xi=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,z.min(),z.min(),z.min(),Ji.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,z.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,z.min(),z.min(),Ji.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,z.min(),z.min(),Ji.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},Zi=class{constructor(e,t){this.position=e,this.inclusive=t}};function Qi(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?R.comparator(R.fromName(o.referenceValue),n.key):Fi(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function $i(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ni(e.position[n],t.position[n]))return!1;return!0}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ea=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function ta(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var na=class{},ra=class e extends na{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new da(t,n,r):n===`array-contains`?new ha(t,r):n===`in`?new ga(t,r):n===`not-in`?new _a(t,r):n===`array-contains-any`?new va(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new fa(e,n):new pa(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fi(t,this.value)):t!==null&&Mi(this.value)===Mi(t)&&this.matchesComparison(Fi(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return M(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ia=class e extends na{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(t,n){return new e(t,n)}matches(e){return aa(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function aa(e){return e.op===`and`}function oa(e){return sa(e)&&aa(e)}function sa(e){for(let t of e.filters)if(t instanceof ia)return!1;return!0}function ca(e){if(e instanceof ra)return e.field.canonicalString()+e.op.toString()+Ri(e.value);if(oa(e))return e.filters.map((e=>ca(e))).join(`,`);{let t=e.filters.map((e=>ca(e))).join(`,`);return`${e.op}(${t})`}}function la(e,t){return e instanceof ra?function(e,t){return t instanceof ra&&e.op===t.op&&e.field.isEqual(t.field)&&Ni(e.value,t.value)}(e,t):e instanceof ia?function(e,t){return t instanceof ia&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&la(n,t.filters[r])),!0):!1}(e,t):void M(19439)}function ua(e){return e instanceof ra?function(e){return`${e.field.canonicalString()} ${e.op} ${Ri(e.value)}`}(e):e instanceof ia?function(e){return e.op.toString()+` {`+e.getFilters().map(ua).join(` ,`)+`}`}(e):`Filter`}var da=class extends ra{constructor(e,t,n){super(e,t,n),this.key=R.fromName(n.referenceValue)}matches(e){let t=R.comparator(e.key,this.key);return this.matchesComparison(t)}},fa=class extends ra{constructor(e,t){super(e,`in`,t),this.keys=ma(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},pa=class extends ra{constructor(e,t){super(e,`not-in`,t),this.keys=ma(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function ma(e,t){return(t.arrayValue?.values||[]).map((e=>R.fromName(e.referenceValue)))}var ha=class extends ra{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return Hi(t)&&Pi(t.arrayValue,this.value)}},ga=class extends ra{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Pi(this.value.arrayValue,t)}},_a=class extends ra{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Pi(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Pi(this.value.arrayValue,t)}},va=class extends ra{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!Hi(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Pi(this.value.arrayValue,e)))}},ya=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Pe=null}};function ba(e,t=null,n=[],r=[],i=null,a=null,o=null){return new ya(e,t,n,r,i,a,o)}function xa(e){let t=P(e);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>ca(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),Yr(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>Ri(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>Ri(e))).join(`,`)),t.Pe=e}return t.Pe}function Sa(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ta(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!la(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$i(e.startAt,t.startAt)&&$i(e.endAt,t.endAt)}function Ca(e){return R.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wa=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Ta(e,t,n,r,i,a,o,s){return new wa(e,t,n,r,i,a,o,s)}function Ea(e){return new wa(e)}function Da(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Oa(e){return e.collectionGroup!==null}function ka(e){let t=P(e);if(t.Te===null){t.Te=[];let e=new Set;for(let n of t.explicitOrderBy)t.Te.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new ci(Cr.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new ea(r,n))})),e.has(Cr.keyField().canonicalString())||t.Te.push(new ea(Cr.keyField(),n))}return t.Te}function Aa(e){let t=P(e);return t.Ie||=ja(t,ka(e)),t.Ie}function ja(e,t){if(e.limitType===`F`)return ba(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new ea(e.field,t)}));let n=e.endAt?new Zi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Zi(e.startAt.position,e.startAt.inclusive):null;return ba(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ma(e,t,n){return new wa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Na(e,t){return Sa(Aa(e),Aa(t))&&e.limitType===t.limitType}function Pa(e){return`${xa(Aa(e))}|lt:${e.limitType}`}function Fa(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>ua(e))).join(`, `)}]`),Yr(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>Ri(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>Ri(e))).join(`,`)),`Target(${t})`}(Aa(e))}; limitType=${e.limitType})`}function Ia(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?R.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of ka(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Qi(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ka(e),t)||e.endAt&&!function(e,t,n){let r=Qi(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ka(e),t))}(e,t)}function La(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ra(e){return(t,n)=>{let r=!1;for(let i of ka(e)){let e=za(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function za(e,t,n){let r=e.field.isKeyField()?R.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?Fi(r,i):M(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return M(19790,{direction:e.dir})}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ba=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return ii(this.inner)}size(){return this.innerSize}},Va=new ai(R.comparator);function Ha(){return Va}var Ua=new ai(R.comparator);function Wa(...e){let t=Ua;for(let n of e)t=t.insert(n.key,n);return t}function Ga(e){let t=Ua;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ka(){return Ja()}function qa(){return Ja()}function Ja(){return new Ba((e=>e.toString()),((e,t)=>e.isEqual(t)))}var Ya=new ai(R.comparator),Xa=new ci(R.comparator);function H(...e){let t=Xa;for(let n of e)t=t.add(n);return t}var Za=new ci(L);function Qa(){return Za}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function $a(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Xr(t)?`-0`:t}}function eo(e){return{integerValue:``+e}}function to(e,t){return Zr(t)?eo(t):$a(e,t)}
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var no=class{constructor(){this._=void 0}};function ro(e,t,n){return e instanceof oo?function(e,t){let n={fields:{[vi]:{stringValue:_i},[bi]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&xi(t)&&(t=Si(t)),t&&(n.fields[yi]=t),{mapValue:n}}(n,t):e instanceof so?co(e,t):e instanceof lo?uo(e,t):function(e,t){let n=ao(e,t),r=po(n)+po(e.Ee);return Vi(n)&&Vi(e.Ee)?eo(r):$a(e.serializer,r)}(e,t)}function io(e,t,n){return e instanceof so?co(e,t):e instanceof lo?uo(e,t):n}function ao(e,t){return e instanceof fo?function(e){return Vi(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var oo=class extends no{},so=class extends no{constructor(e){super(),this.elements=e}};function co(e,t){let n=mo(t);for(let t of e.elements)n.some((e=>Ni(e,t)))||n.push(t);return{arrayValue:{values:n}}}var lo=class extends no{constructor(e){super(),this.elements=e}};function uo(e,t){let n=mo(t);for(let t of e.elements)n=n.filter((e=>!Ni(e,t)));return{arrayValue:{values:n}}}var fo=class extends no{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function po(e){return hi(e.integerValue||e.doubleValue)}function mo(e){return Hi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ho=class{constructor(e,t){this.field=e,this.transform=t}};function go(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof so&&t instanceof so||e instanceof lo&&t instanceof lo?vr(e.elements,t.elements,Ni):e instanceof fo&&t instanceof fo?Ni(e.Ee,t.Ee):e instanceof oo&&t instanceof oo}(e.transform,t.transform)}var _o=class{constructor(e,t){this.version=e,this.transformResults=t}},vo=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function yo(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var bo=class{};function xo(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new ko(e.key,vo.none()):new wo(e.key,e.data,vo.none());{let n=e.data,r=Ji.empty(),i=new ci(Cr.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new To(e.key,r,new ui(i.toArray()),vo.none())}}function U(e,t,n){e instanceof wo?function(e,t,n){let r=e.value.clone(),i=Do(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof To?function(e,t,n){if(!yo(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=Do(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Eo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function W(e,t,n,r){return e instanceof wo?function(e,t,n,r){if(!yo(e.precondition,t))return n;let i=e.value.clone(),a=Oo(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof To?function(e,t,n,r){if(!yo(e.precondition,t))return n;let i=Oo(e.fieldTransforms,r,t),a=t.data;return a.setAll(Eo(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return yo(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function So(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=ao(r.transform,e||null);i!=null&&(n===null&&(n=Ji.empty()),n.set(r.field,i))}return n||null}function Co(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&vr(e,t,((e,t)=>go(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var wo=class extends bo{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},To=class extends bo{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function Eo(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function Do(e,t,n){let r=new Map;N(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,io(o,s,n[i]))}return r}function Oo(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,ro(e,a,t))}return r}var ko=class extends bo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ao=class extends bo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},jo=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&U(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=W(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=W(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=qa();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=xo(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(z.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),H())}isEqual(e){return this.batchId===e.batchId&&vr(this.mutations,e.mutations,((e,t)=>Co(e,t)))&&vr(this.baseMutations,e.baseMutations,((e,t)=>Co(e,t)))}},Mo=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){N(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let i=function(){return Ya}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},No=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},Po=class{constructor(e,t){this.count=e,this.unchangedNames=t}},Fo,G;function Io(e){switch(e){case F.OK:return M(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return M(15467,{code:e})}}function Lo(e){if(e===void 0)return $n(`GRPC error has no .code`),F.UNKNOWN;switch(e){case Fo.OK:return F.OK;case Fo.CANCELLED:return F.CANCELLED;case Fo.UNKNOWN:return F.UNKNOWN;case Fo.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Fo.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Fo.INTERNAL:return F.INTERNAL;case Fo.UNAVAILABLE:return F.UNAVAILABLE;case Fo.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Fo.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Fo.NOT_FOUND:return F.NOT_FOUND;case Fo.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Fo.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Fo.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Fo.ABORTED:return F.ABORTED;case Fo.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Fo.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Fo.DATA_LOSS:return F.DATA_LOSS;default:return M(39323,{code:e})}}(G=Fo||={})[G.OK=0]=`OK`,G[G.CANCELLED=1]=`CANCELLED`,G[G.UNKNOWN=2]=`UNKNOWN`,G[G.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,G[G.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,G[G.NOT_FOUND=5]=`NOT_FOUND`,G[G.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,G[G.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,G[G.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,G[G.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,G[G.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,G[G.ABORTED=10]=`ABORTED`,G[G.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,G[G.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,G[G.INTERNAL=13]=`INTERNAL`,G[G.UNAVAILABLE=14]=`UNAVAILABLE`,G[G.DATA_LOSS=15]=`DATA_LOSS`;
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ro=null,zo=new Fn([4294967295,4294967295],0);function Bo(e){let t=pr().encode(e),n=new In;return n.update(t),new Uint8Array(n.digest())}function Vo(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Fn([n,r],0),new Fn([i,a],0)]}var Ho=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Uo(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new Uo(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Uo(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Fn.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply(Fn.fromNumber(n)));return r.compare(zo)===1&&(r=new Fn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Bo(e),[n,r]=Vo(t);for(let e=0;e<this.hashCount;e++){let t=this.pe(n,r,e);if(!this.ye(t))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),o=new e(a,i,n);return r.forEach((e=>o.insert(e))),o}insert(e){if(this.fe===0)return;let t=Bo(e),[n,r]=Vo(t);for(let e=0;e<this.hashCount;e++){let t=this.pe(n,r,e);this.we(t)}}we(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},Uo=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},Wo=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,Go.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(z.min(),i,new ai(L),Ha(),H())}},Go=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,H(),H(),H())}},Ko=class{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}},qo=class{constructor(e,t){this.targetId=e,this.De=t}},Jo=class{constructor(e,t,n=fi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},Yo=class{constructor(){this.ve=0,this.Ce=Qo(),this.Fe=fi.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=H(),t=H(),n=H();return this.Ce.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:M(38017,{changeType:i})}})),new Go(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=Qo()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){--this.ve,N(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Xo=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ha(),this.je=Zo(),this.Je=Zo(),this.He=new ai(L)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{let n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:M(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((e,n)=>{this.nt(n)&&t(n)}))}it(e){let t=e.targetId,n=e.De.count,r=this.st(t);if(r){let i=r.target;if(Ca(i))if(n===0){let e=new R(i.path);this.Xe(t,e,Xi.newNoDocument(e,z.min()))}else N(n===1,20013,{expectedCount:n});else{let r=this.ot(t);if(r!==n){let n=this._t(e),i=n?this.ut(n,e,r):1;if(i!==0){this.rt(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.He=this.He.insert(t,e)}Ro?.ct(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>{var t;return(t=r?.mightContain(e))!=null&&t}}),a}(r,e.De,this.We.lt(),n,i))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=gi(n).toUint8Array()}catch(e){if(e instanceof di)return er(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new Ho(a,r,i)}catch(e){return er(e instanceof Uo?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.fe===0?null:o}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){let n=this.We.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.We.lt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,n,null),r++)})),r}Pt(e){let t=new Map;this.Ge.forEach(((n,r)=>{let i=this.st(r);if(i){if(n.current&&Ca(i.target)){let t=new R(i.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,Xi.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}}));let n=H();this.Je.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.st(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.ze.forEach(((t,n)=>n.setReadTime(e)));let r=new Wo(e,t,this.He,this.ze,n);return this.ze=Ha(),this.je=Zo(),this.Je=Zo(),this.He=new ai(L),r}Ze(e,t){if(!this.nt(e))return;let n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Yo,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new ci(L),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new ci(L),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||j(`WatchChangeAggregator`,`Detected inactive target`,e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yo),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Zo(){return new ai(R.comparator)}function Qo(){return new ai(R.comparator)}var $o=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),es=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),ts=(()=>({and:`AND`,or:`OR`}))(),ns=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function rs(e,t){return e.useProto3Json||Yr(t)?t:{value:t}}function os(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function ss(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function cs(e,t){return os(e,t.toTimestamp())}function ls(e){return N(!!e,49232),z.fromTimestamp(function(e){let t=mi(e);return new Fr(t.seconds,t.nanos)}(e))}function us(e,t){return ds(e,t).canonicalString()}function ds(e,t){let n=function(e){return new xr([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function fs(e){let t=xr.fromString(e);return N(Is(t),10190,{key:t.toString()}),t}function ps(e,t){return us(e.databaseId,t.path)}function ms(e,t){let n=fs(t);if(n.get(1)!==e.databaseId.projectId)throw new I(F.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new I(F.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new R(vs(n))}function hs(e,t){return us(e.databaseId,t)}function gs(e){let t=fs(e);return t.length===4?xr.emptyPath():vs(t)}function _s(e){return new xr([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function vs(e){return N(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function ys(e,t,n){return{name:ps(e,t),fields:n.value.mapValue.fields}}function bs(e,t){return`found`in t?function(e,t){N(!!t.found,43571),t.found.name,t.found.updateTime;let n=ms(e,t.found.name),r=ls(t.found.updateTime),i=t.found.createTime?ls(t.found.createTime):z.min(),a=new Ji({mapValue:{fields:t.found.fields}});return Xi.newFoundDocument(n,r,i,a)}(e,t):`missing`in t?function(e,t){N(!!t.missing,3894),N(!!t.readTime,22933);let n=ms(e,t.missing),r=ls(t.readTime);return Xi.newNoDocument(n,r)}(e,t):M(7234,{result:t})}function xs(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:M(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(N(t===void 0||typeof t==`string`,58123),fi.fromBase64String(t||``)):(N(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),fi.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){let t=e.code===void 0?F.UNKNOWN:Lo(e.code);return new I(t,e.message||``)}(o);n=new Jo(r,i,a,s||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=ms(e,r.document.name),a=ls(r.document.updateTime),o=r.document.createTime?ls(r.document.createTime):z.min(),s=new Ji({mapValue:{fields:r.document.fields}}),c=Xi.newFoundDocument(i,a,o,s),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Ko(l,u,c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=ms(e,r.document),a=r.readTime?ls(r.readTime):z.min(),o=Xi.newNoDocument(i,a),s=r.removedTargetIds||[];n=new Ko([],s,o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=ms(e,r.document),a=r.removedTargetIds||[];n=new Ko([],a,i,null)}else{if(!(`filter`in t))return M(11601,{At:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new Po(r,i),o=e.targetId;n=new qo(o,a)}}return n}function Ss(e,t){let n;if(t instanceof wo)n={update:ys(e,t.key,t.value)};else if(t instanceof ko)n={delete:ps(e,t.key)};else if(t instanceof To)n={update:ys(e,t.key,t.data),updateMask:Fs(t.fieldMask)};else{if(!(t instanceof Ao))return M(16599,{Rt:t.type});n={verify:ps(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof oo)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof so)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof lo)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fo)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw M(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?M(27497):{exists:t.exists}:{updateTime:cs(e,t.updateTime)}}(e,t.precondition)),n}function Cs(e,t){return e&&e.length>0?(N(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?ls(e.updateTime):ls(t);return n.isEqual(z.min())&&(n=ls(t)),new _o(n,e.transformResults||[])}(e,t)))):[]}function ws(e,t){return{documents:[hs(e,t.path)]}}function Ts(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=hs(e,i);let a=function(e){if(e.length!==0)return Ps(ia.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:Ms(e.field),direction:ks(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=rs(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:i}}function Es(e){let t=gs(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){N(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=Os(e);return t instanceof ia&&oa(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new ea(Ns(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,Yr(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before,n=e.values||[];return new Zi(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before,n=e.values||[];return new Zi(n,t)}(n.endAt)),Ta(t,i,o,a,s,`F`,c,l)}function Ds(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return M(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Os(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?M(30097,{filter:e}):function(e){return ia.create(e.compositeFilter.filters.map((e=>Os(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return M(1026)}}(e.compositeFilter.op))}(e):function(e){return ra.create(Ns(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return M(58110);default:return M(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=Ns(e.unaryFilter.field);return ra.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=Ns(e.unaryFilter.field);return ra.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=Ns(e.unaryFilter.field);return ra.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=Ns(e.unaryFilter.field);return ra.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return M(61313);default:return M(60726)}}(e)}function ks(e){return $o[e]}function As(e){return es[e]}function js(e){return ts[e]}function Ms(e){return{fieldPath:e.canonicalString()}}function Ns(e){return Cr.fromServerFormat(e.fieldPath)}function Ps(e){return e instanceof ra?function(e){if(e.op===`==`){if(V(e.value))return{unaryFilter:{field:Ms(e.field),op:`IS_NAN`}};if(Ui(e.value))return{unaryFilter:{field:Ms(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(V(e.value))return{unaryFilter:{field:Ms(e.field),op:`IS_NOT_NAN`}};if(Ui(e.value))return{unaryFilter:{field:Ms(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:Ms(e.field),op:As(e.op),value:e.value}}}(e):e instanceof ia?function(e){let t=e.getFilters().map((e=>Ps(e)));return t.length===1?t[0]:{compositeFilter:{op:js(e.op),filters:t}}}(e):M(54877,{filter:e})}function Fs(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Is(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ls=class e{constructor(e,t,n,r,i=z.min(),a=z.min(),o=fi.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},Rs=class{constructor(e){this.gt=e}};function zs(e){let t=Es({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?Ma(t,t.limit,`L`):t}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Bs=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if(`nullValue`in e)this.Ct(t,5);else if(`booleanValue`in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if(`integerValue`in e)this.Ct(t,15),t.Ft(hi(e.integerValue));else if(`doubleValue`in e){let n=hi(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),Xr(n)?t.Ft(0):t.Ft(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ct(t,20),typeof n==`string`&&(n=mi(n)),t.Mt(`${n.seconds||``}`),t.Ft(n.nanos||0)}else if(`stringValue`in e)this.xt(e.stringValue,t),this.Ot(t);else if(`bytesValue`in e)this.Ct(t,30),t.Nt(gi(e.bytesValue)),this.Ot(t);else if(`referenceValue`in e)this.Bt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else `mapValue`in e?qi(e)?this.Ct(t,2**53-1):Gi(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):`arrayValue`in e?(this.qt(e.arrayValue,t),this.Ot(t)):M(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let n=e.fields||{};this.Ct(t,55);for(let e of Object.keys(n))this.xt(e,t),this.Dt(n[e],t)}Lt(e,t){let n=e.fields||{};this.Ct(t,53);let r=ji,i=n[r].arrayValue?.values?.length||0;this.Ct(t,15),t.Ft(hi(i)),this.xt(r,t),this.Dt(n[r],t)}qt(e,t){let n=e.values||[];this.Ct(t,50);for(let e of n)this.Dt(e,t)}Bt(e,t){this.Ct(t,37),R.fromName(e).path.forEach((e=>{this.Ct(t,60),this.$t(e,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Bs.Ut=new Bs;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Vs=class{constructor(){this.Dn=new Hs}addToCollectionParentIndex(e,t){return this.Dn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Br.min())}updateCollectionGroup(e,t,n){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}},Hs=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ci(xr.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ci(xr.comparator)).toArray()}};new Uint8Array;
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Us={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ws=41943040,Gs=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Gs.DEFAULT_COLLECTION_PERCENTILE=10,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gs.DEFAULT=new Gs(Ws,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gs.DISABLED=new Gs(-1,0,0);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ks=class e{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new e(0)}static ur(){return new e(-1)}},qs=`LruGarbageCollector`,Js=1048576;function Ys([e,t],[n,r]){let i=L(e,n);return i===0?L(t,r):i}var Xs=class{constructor(e){this.Tr=e,this.buffer=new ci(Ys),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();Ys(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},Zs=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&=(this.Ar.cancel(),null)}get started(){return this.Ar!==null}Rr(e){j(qs,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Kr(e)?j(qs,`Ignoring IndexedDB error during garbage collection: `,e):await Wr(e)}await this.Rr(3e5)}))}},Qs=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(qr.ue);let n=new Xs(t);return this.Vr.forEachTarget(e,(e=>n.Er(e.sequenceNumber))).next((()=>this.Vr.gr(e,(e=>n.Er(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j(`LruGarbageCollector`,`Garbage collection skipped; disabled`),B.resolve(Us)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(j(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Us):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(j(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Qn()<=O.DEBUG&&j(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function $s(e,t){return new Qs(e,t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ec=class{constructor(){this.changes=new Ba((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):B.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},tc=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},nc=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&W(n.mutation,e,ui.empty(),Fr.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,H()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=H()){let r=Ka();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Wa();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Ka();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,H())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Ha(),a=Ja(),o=function(){return Ja()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof To)?i=i.insert(t.key,t):o===void 0?a.set(t.key,ui.empty()):(a.set(t.key,o.mutation.getFieldMask()),W(o.mutation,t,o.mutation.getFieldMask(),Fr.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new tc(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=Ja(),r=new ai(((e,t)=>e-t)),i=H();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||ui.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||H()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=qa();c.forEach((e=>{if(!i.has(e)){let r=xo(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return B.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return R.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Oa(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):B.resolve(Ka()),o=Ir,s=i;return a.next((t=>B.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?B.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,H()))).next((e=>({batchId:o,changes:Ga(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new R(t)).next((e=>{let t=Wa();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=Wa();return this.indexManager.getCollectionParents(e,i).next((o=>B.forEach(o,(o=>{let s=function(e,t){return new wa(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,Xi.newInvalidDocument(r)))}));let n=Wa();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&W(a.mutation,r,ui.empty(),Fr.now()),Ia(t,r)&&(n=n.insert(e,r))})),n}))}},rc=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return B.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ls(e.createTime)}}(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:zs(e.bundledQuery),readTime:ls(e.readTime)}}(t)),B.resolve()}},ic=class{constructor(){this.overlays=new ai(R.comparator),this.kr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Ka();return B.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.wt(e,t,r)})),B.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.kr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.kr.delete(n)),B.resolve()}getOverlaysForCollection(e,t,n){let r=Ka(),i=t.length+1,a=new R(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return B.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ai(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Ka(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Ka(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return B.resolve(o)}wt(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new No(t,n));let i=this.kr.get(t);i===void 0&&(i=H(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}},ac=class{constructor(){this.sessionToken=fi.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}},oc=class{constructor(){this.qr=new ci(sc.Qr),this.$r=new ci(sc.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let n=new sc(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Wr(new sc(e,t))}Gr(e,t){e.forEach((e=>this.removeReference(e,t)))}zr(e){let t=new R(new xr([])),n=new sc(t,e),r=new sc(t,e+1),i=[];return this.$r.forEachInRange([n,r],(e=>{this.Wr(e),i.push(e.key)})),i}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new R(new xr([])),n=new sc(t,e),r=new sc(t,e+1),i=H();return this.$r.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new sc(e,0),n=this.qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},sc=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return R.comparator(e.key,t.key)||L(e.Hr,t.Hr)}static Ur(e,t){return L(e.Hr,t.Hr)||R.comparator(e.key,t.key)}},cc=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new ci(sc.Qr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new jo(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Yr=this.Yr.add(new sc(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.Xr(n),i=r<0?0:r;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Jr:this.er-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new sc(t,0),r=new sc(t,1/0),i=[];return this.Yr.forEachInRange([n,r],(e=>{let t=this.Zr(e.Hr);i.push(t)})),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ci(L);return t.forEach((e=>{let t=new sc(e,0),r=new sc(e,1/0);this.Yr.forEachInRange([t,r],(e=>{n=n.add(e.Hr)}))})),B.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;R.isDocumentKey(i)||(i=i.child(``));let a=new sc(new R(i),0),o=new ci(L);return this.Yr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)}),a),B.resolve(this.ei(o))}ei(e){let t=[];return e.forEach((e=>{let n=this.Zr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){N(this.ti(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Yr;return B.forEach(t.mutations,(r=>{let i=new sc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=n}))}rr(e){}containsKey(e,t){let n=new sc(t,0),r=this.Yr.firstAfterOrEqual(n);return B.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},lc=class{constructor(e){this.ni=e,this.docs=function(){return new ai(R.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return B.resolve(n?n.document.mutableCopy():Xi.newInvalidDocument(t))}getEntries(e,t){let n=Ha();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Xi.newInvalidDocument(e))})),B.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ha(),a=t.path,o=new R(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Vr(zr(o),n)<=0||(r.has(o.key)||Ia(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,t,n,r){M(9500)}ri(e,t){return B.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new uc(this)}getSize(e){return B.resolve(this.size)}},uc=class extends ec{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)})),B.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}},dc=class{constructor(e){this.persistence=e,this.ii=new Ba((e=>xa(e)),Sa),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.si=0,this.oi=new oc,this.targetCount=0,this._i=Ks.ar()}forEachTarget(e,t){return this.ii.forEach(((e,n)=>t(n))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),B.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Ks(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.hr(t),B.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),--this.targetCount,B.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.ii.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),B.waitFor(i).next((()=>r))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){let n=this.ii.get(t)||null;return B.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),B.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),B.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),B.resolve()}getMatchingKeysForTargetId(e,t){let n=this.oi.Jr(t);return B.resolve(n)}containsKey(e,t){return B.resolve(this.oi.containsKey(t))}},fc=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new qr(0),this.ci=!1,this.ci=!0,this.li=new ac,this.referenceDelegate=e(this),this.hi=new dc(this),this.indexManager=new Vs,this.remoteDocumentCache=function(e){return new lc(e)}((e=>this.referenceDelegate.Pi(e))),this.serializer=new Rs(t),this.Ti=new rc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ic,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new cc(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){j(`MemoryPersistence`,`Starting transaction:`,e);let r=new pc(this.ui.next());return this.referenceDelegate.Ii(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ei(e,t){return B.or(Object.values(this.ai).map((n=>()=>n.containsKey(e,t))))}},pc=class extends Ur{constructor(e){super(),this.currentSequenceNumber=e}},mc=class e{constructor(e){this.persistence=e,this.Ai=new oc,this.Ri=null}static Vi(t){return new e(t)}get mi(){if(this.Ri)return this.Ri;throw M(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),B.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((e=>this.mi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.mi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.mi,(n=>{let r=R.fromPath(n);return this.fi(e,r).next((e=>{e||t.removeEntry(r,z.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return B.or([()=>B.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},hc=class e{constructor(e,t){this.persistence=e,this.gi=new Ba((e=>$r(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=$s(this,t)}static Vi(t,n){return new e(t,n)}Ii(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}yr(e){let t=0;return this.gr(e,(e=>{t++})).next((()=>t))}gr(e,t){return B.forEach(this.gi,((n,r)=>this.Sr(e,n,r).next((e=>e?B.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ri(e,(r=>this.Sr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,z.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bi(e.data.value)),t}Sr(e,t,n){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.gi.get(t);return B.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},gc=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(t,n){let r=H(),i=H();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},_c=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},vc=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return we()?8:Gr(_e())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ps(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ys(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new _c;return this.ws(e,t,n).next((r=>{if(i.result=r,this.Rs)return this.Ss(e,t,n,r.size)}))})).next((()=>i.result))}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(Qn()<=O.DEBUG&&j(`QueryEngine`,`SDK will not create cache indexes for query:`,Fa(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.Vs,`documents`),B.resolve()):(Qn()<=O.DEBUG&&j(`QueryEngine`,`Query:`,Fa(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.fs*r?(Qn()<=O.DEBUG&&j(`QueryEngine`,`The SDK decides to create cache indexes for query:`,Fa(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,Aa(t))):B.resolve())}ps(e,t){if(Da(t))return B.resolve(null);let n=Aa(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Ma(t,null,`F`),n=Aa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=H(...r);return this.gs.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.bs(t,r);return this.Ds(t,a,i,n.readTime)?this.ps(e,Ma(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ys(e,t,n,r){return Da(t)||r.isEqual(z.min())?B.resolve(null):this.gs.getDocuments(e,n).next((i=>{let a=this.bs(t,i);return this.Ds(t,a,n,r)?B.resolve(null):(Qn()<=O.DEBUG&&j(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),Fa(t)),this.vs(e,a,t,Rr(r,Ir)).next((e=>e)))}))}bs(e,t){let n=new ci(Ra(e));return t.forEach(((t,r)=>{Ia(e,r)&&(n=n.add(r))})),n}Ds(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ws(e,t,n){return Qn()<=O.DEBUG&&j(`QueryEngine`,`Using full collection scan to execute query:`,Fa(t)),this.gs.getDocumentsMatchingQuery(e,t,Br.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},yc=`LocalStore`,bc=3e8,xc=class{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new ai(L),this.Ms=new Ba((e=>xa(e)),Sa),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nc(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Fs)))}};function Sc(e,t,n,r){return new xc(e,t,n,r)}async function Cc(e,t){let n=P(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=H();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Bs:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function wc(e,t){let n=P(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=B.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);N(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=H();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function Tc(e){let t=P(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.hi.getLastRemoteSnapshotVersion(e)))}function Ec(e,t){let n=P(e),r=t.snapshotVersion,i=n.Fs;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.hi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.hi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(fi.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=bc?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.hi.updateTargetData(e,l))}));let s=Ha(),c=H();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Dc(e,a,t.documentUpdates).next((e=>{s=e.Ls,c=e.ks}))),!r.isEqual(z.min())){let t=n.hi.getLastRemoteSnapshotVersion(e).next((t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return B.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Fs=i,e)))}function Dc(e,t,n){let r=H(),i=H();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ha();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(z.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):j(yc,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{Ls:r,ks:i}}))}function Oc(e,t){let n=P(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=Jr),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function kc(e,t){let n=P(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.hi.getTargetData(e,t).next((i=>i?(r=i,B.resolve(r)):n.hi.allocateTargetId(e).next((i=>(r=new Ls(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.hi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Fs.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e}))}async function Ac(e,t,n){let r=P(e),i=r.Fs.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Kr(e))throw e;j(yc,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function jc(e,t,n){let r=P(e),i=z.min(),a=H();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=P(e),i=r.Ms.get(n);return i===void 0?r.hi.getTargetData(t,n):B.resolve(r.Fs.get(i))}(r,e,Aa(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:z.min(),n?a:H()))).next((e=>(Mc(r,La(t),e),{documents:e,qs:a})))))}function Mc(e,t,n){let r=e.xs.get(t)||z.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.xs.set(t,r)}var Nc=class{constructor(){this.activeTargetIds=Qa()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Pc=class{constructor(){this.Fo=new Nc,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||`not-current`}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Nc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},Fc=class{xo(e){}shutdown(){}},Ic=`ConnectivityMonitor`,Lc=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener(`online`,this.Oo),window.removeEventListener(`offline`,this.Bo)}qo(){window.addEventListener(`online`,this.Oo),window.addEventListener(`offline`,this.Bo)}No(){j(Ic,`Network connectivity changed: AVAILABLE`);for(let e of this.ko)e(0)}Lo(){j(Ic,`Network connectivity changed: UNAVAILABLE`);for(let e of this.ko)e(1)}static C(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},Rc=null;function zc(){return Rc===null?Rc=function(){return 268435456+Math.round(2147483648*Math.random())}():Rc++,`0x`+Rc.toString(16)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bc=`RestConnection`,Vc={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},Hc=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+`://`+e.host,this.Uo=`projects/${n}/databases/${r}`,this.Ko=this.databaseId.database===Ti?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){let a=zc(),o=this.Go(e,t.toUriEncodedString());j(Bc,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(s,r,i);let{host:c}=new URL(o),l=w(c);return this.jo(e,o,s,n,l).then((t=>(j(Bc,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw er(Bc,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}zo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Xn}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Go(e,t){let n=Vc[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}},Uc=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}},Wc=`WebChannelConnection`,Gc=class extends Hc{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,i){let a=zc();return new Promise(((i,o)=>{let s=new zn;s.setWithCredentials(!0),s.listenOnce(Vn.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case Hn.NO_ERROR:let t=s.getResponseJson();j(Wc,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case Hn.TIMEOUT:j(Wc,`RPC '${e}' ${a} timed out`),o(new I(F.DEADLINE_EXCEEDED,`Request time out`));break;case Hn.HTTP_ERROR:let n=s.getStatus();if(j(Wc,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(F).indexOf(t)>=0?t:F.UNKNOWN}(t.status);o(new I(e,t.message))}else o(new I(F.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new I(F.UNAVAILABLE,`Connection failed.`));break;default:M(9055,{c_:e,streamId:a,l_:s.getLastErrorCode(),h_:s.getLastError()})}}finally{j(Wc,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);j(Wc,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}P_(e,t,n){let r=zc(),i=[this.$o,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=Kn(),o=Gn(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.zo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);j(Wc,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.T_(u);let d=!1,f=!1,p=new Uc({Ho:t=>{f?j(Wc,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(j(Wc,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),j(Wc,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Yo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,Bn.EventType.OPEN,(()=>{f||(j(Wc,`RPC '${e}' stream ${r} transport opened.`),p.s_())})),m(u,Bn.EventType.CLOSE,(()=>{f||(f=!0,j(Wc,`RPC '${e}' stream ${r} transport closed`),p.__(),this.I_(u))})),m(u,Bn.EventType.ERROR,(t=>{f||(f=!0,er(Wc,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.__(new I(F.UNAVAILABLE,`The operation could not be completed`)))})),m(u,Bn.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];N(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){j(Wc,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=Fo[e];if(t!==void 0)return Lo(t)}(t),i=a.message;n===void 0&&(n=F.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.__(new I(n,i)),u.close()}else j(Wc,`RPC '${e}' stream ${r} received:`,n),p.a_(n)}})),m(o,Wn.STAT_EVENT,(t=>{t.stat===Un.PROXY?j(Wc,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Un.NOPROXY&&j(Wc,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.o_()}),0),p}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}};function Kc(){return typeof document<`u`?document:null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qc(e){return new ns(e,!0)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Jc=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&j(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}},Yc=`PersistentStream`,Xc=class{constructor(e,t,n,r,i,a,o,s){this.Fi=e,this.w_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Jc(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state===4?this.O_():this.auth()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&=(this.D_.cancel(),null)}Q_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e===4?t&&t.code===F.RESOURCE_EXHAUSTED?($n(t.toString()),$n(`Using maximum backoff delay to prevent overloading the backend.`),this.F_.f_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.F_.reset(),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.b_===t&&this.W_(e,n)}),(t=>{e((()=>{let e=new I(F.UNKNOWN,`Fetching auth token failed: `+t.message);return this.G_(e)}))}))}W_(e,t){let n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.e_((()=>{n((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((e=>{n((()=>this.G_(e)))})),this.stream.onMessage((e=>{n((()=>++this.C_==1?this.j_(e):this.onNext(e)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return j(Yc,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(j(Yc,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},Zc=class extends Xc{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}z_(e,t){return this.connection.P_(`Listen`,e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=xs(this.serializer,e),n=function(e){if(!(`targetChange`in e))return z.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?z.min():t.readTime?ls(t.readTime):z.min()}(e);return this.listener.J_(t,n)}H_(e){let t={};t.database=_s(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=Ca(r)?{documents:ws(e,r)}:{query:Ts(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ss(e,t.resumeToken);let r=rs(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(z.min())>0){n.readTime=os(e,t.snapshotVersion.toTimestamp());let r=rs(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=Ds(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){let t={};t.database=_s(this.serializer),t.removeTarget=e,this.k_(t)}},Qc=class extends Xc{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_(`Write`,e,t)}j_(e){return N(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,N(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){N(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=Cs(e.writeResults,e.commitTime),n=ls(e.commitTime);return this.listener.ta(n,t)}na(){let e={};e.database=_s(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>Ss(this.serializer,e)))};this.k_(t)}},$c=class{},el=class extends $c{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new I(F.FAILED_PRECONDITION,`The client has already been terminated.`)}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,ds(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new I(F.UNKNOWN,e.toString())}))}Jo(e,t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Jo(e,ds(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new I(F.UNKNOWN,e.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}},tl=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua(`Unknown`),this.oa=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this.oa=null,this.ca(`Backend didn't respond within 10 seconds.`),this.ua(`Offline`),Promise.resolve()))))}la(e){this.state===`Online`?this.ua(`Unknown`):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua(`Offline`)))}set(e){this.ha(),this.sa=0,e===`Online`&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?($n(t),this._a=!1):j(`OnlineStateTracker`,t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}},nl=`RemoteStore`,rl=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo((e=>{n.enqueueAndForget((async()=>{fl(this)&&(j(nl,`Restarting streams for network reachability change.`),await async function(e){let t=P(e);t.Ia.add(4),await al(t),t.Aa.set(`Unknown`),t.Ia.delete(4),await il(t)}(this))}))})),this.Aa=new tl(n,r)}};async function il(e){if(fl(e))for(let t of e.da)await t(!0)}async function al(e){for(let t of e.da)await t(!1)}function ol(e,t){let n=P(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),dl(n)?ul(n):jl(n).x_()&&cl(n,t))}function sl(e,t){let n=P(e),r=jl(n);n.Ta.delete(t),r.x_()&&ll(n,t),n.Ta.size===0&&(r.x_()?r.B_():fl(n)&&n.Aa.set(`Unknown`))}function cl(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(z.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}jl(e).H_(t)}function ll(e,t){e.Ra.$e(t),jl(e).Y_(t)}function ul(e){e.Ra=new Xo({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),jl(e).start(),e.Aa.aa()}function dl(e){return fl(e)&&!jl(e).M_()&&e.Ta.size>0}function fl(e){return P(e).Ia.size===0}function pl(e){e.Ra=void 0}async function ml(e){e.Aa.set(`Online`)}async function hl(e){e.Ta.forEach(((t,n)=>{cl(e,t)}))}async function gl(e,t){pl(e),dl(e)?(e.Aa.la(t),ul(e)):e.Aa.set(`Unknown`)}async function _l(e,t,n){if(e.Aa.set(`Online`),t instanceof Jo&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){j(nl,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await vl(e,n)}else if(t instanceof Ko?e.Ra.Ye(t):t instanceof qo?e.Ra.it(t):e.Ra.et(t),!n.isEqual(z.min()))try{let t=await Tc(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Ra.Pt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ta.get(r);i&&e.Ta.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(fi.EMPTY_BYTE_STRING,r.snapshotVersion)),ll(e,t);let i=new Ls(r.target,t,n,r.sequenceNumber);cl(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){j(nl,`Failed to raise snapshot:`,t),await vl(e,t)}}async function vl(e,t,n){if(!Kr(t))throw t;e.Ia.add(1),await al(e),e.Aa.set(`Offline`),n||=()=>Tc(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{j(nl,`Retrying IndexedDB access`),await n(),e.Ia.delete(1),await il(e)}))}function yl(e,t){return t().catch((n=>vl(e,n,t)))}async function bl(e){let t=P(e),n=Ml(t),r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Jr;for(;xl(t);)try{let e=await Oc(t.localStore,r);if(e===null){t.Pa.length===0&&n.B_();break}r=e.batchId,Sl(t,e)}catch(e){await vl(t,e)}Cl(t)&&wl(t)}function xl(e){return fl(e)&&e.Pa.length<10}function Sl(e,t){e.Pa.push(t);let n=Ml(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function Cl(e){return fl(e)&&!Ml(e).M_()&&e.Pa.length>0}function wl(e){Ml(e).start()}async function Tl(e){Ml(e).na()}async function El(e){let t=Ml(e);for(let n of e.Pa)t.X_(n.mutations)}async function Dl(e,t,n){let r=e.Pa.shift(),i=Mo.from(r,t,n);await yl(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await bl(e)}async function Ol(e,t){t&&Ml(e).Z_&&await async function(e,t){if(function(e){return Io(e)&&e!==F.ABORTED}(t.code)){let n=e.Pa.shift();Ml(e).N_(),await yl(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await bl(e)}}(e,t),Cl(e)&&wl(e)}async function kl(e,t){let n=P(e);n.asyncQueue.verifyOperationInProgress(),j(nl,`RemoteStore received new credentials`);let r=fl(n);n.Ia.add(3),await al(n),r&&n.Aa.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await il(n)}async function Al(e,t){let n=P(e);t?(n.Ia.delete(2),await il(n)):t||(n.Ia.add(2),await al(n),n.Aa.set(`Unknown`))}function jl(e){return e.Va||(e.Va=function(e,t,n){let r=P(e);return r.ia(),new Zc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:ml.bind(null,e),e_:hl.bind(null,e),n_:gl.bind(null,e),J_:_l.bind(null,e)}),e.da.push((async t=>{t?(e.Va.N_(),dl(e)?ul(e):e.Aa.set(`Unknown`)):(await e.Va.stop(),pl(e))}))),e.Va}function Ml(e){return e.ma||(e.ma=function(e,t,n){let r=P(e);return r.ia(),new Qc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:Tl.bind(null,e),n_:Ol.bind(null,e),ea:El.bind(null,e),ta:Dl.bind(null,e)}),e.da.push((async t=>{t?(e.ma.N_(),await bl(e)):(await e.ma.stop(),e.Pa.length>0&&(j(nl,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))}))),e.ma}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Nl=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=Date.now()+r,s=new e(t,n,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new I(F.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Pl(e,t){if($n(`AsyncQueue`,`${t}: ${e}`),Kr(e))return new I(F.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Fl=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||R.comparator(t.key,n.key):(e,t)=>R.comparator(e.key,t.key),this.keyedMap=Wa(),this.sortedSet=new ai(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},Il=class{constructor(){this.fa=new ai(R.comparator)}track(e){let t=e.doc.key,n=this.fa.get(t);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(t,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(t):e.type===1&&n.type===2?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):M(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal(((t,n)=>{e.push(n)})),e}},Ll=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,Fl.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Na(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},Rl=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}},zl=class{constructor(){this.queries=Bl(),this.onlineState=`Unknown`,this.Da=new Set}terminate(){(function(e,t){let n=P(e),r=n.queries;n.queries=Bl(),r.forEach(((e,n)=>{for(let e of n.wa)e.onError(t)}))})(this,new I(F.ABORTED,`Firestore shutting down`))}};function Bl(){return new Ba((e=>Pa(e)),Na)}async function Vl(e,t){let n=P(e),r=3,i=t.query,a=n.queries.get(i);a?!a.Sa()&&t.ba()&&(r=2):(a=new Rl,r=t.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=Pl(e,`Initialization of query '${Fa(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.wa.push(t),t.va(n.onlineState),a.ya&&t.Ca(a.ya)&&Gl(n)}async function Hl(e,t){let n=P(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.wa.indexOf(t);e>=0&&(a.wa.splice(e,1),a.wa.length===0?i=t.ba()?0:1:!a.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ul(e,t){let n=P(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.wa)t.Ca(e)&&(r=!0);i.ya=e}}r&&Gl(n)}function Wl(e,t,n){let r=P(e),i=r.queries.get(t);if(i)for(let e of i.wa)e.onError(n);r.queries.delete(t)}function Gl(e){e.Da.forEach((e=>{e.next()}))}var Kl,ql;(ql=Kl||={}).Fa=`default`,ql.Cache=`cache`;var Jl=class{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState=`Unknown`,this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new Ll(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let n=t!==`Offline`;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Kl.Cache}},Yl=class{constructor(e){this.key=e}},Xl=class{constructor(e){this.key=e}},Zl=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=H(),this.mutatedKeys=H(),this.Xa=Ra(e),this.eu=new Fl(this.Xa)}get tu(){return this.Ha}nu(e,t){let n=t?t.ru:new Il,r=t?t.eu:this.eu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=Ia(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.iu(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.Xa(u,s)>0||c&&this.Xa(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{eu:a,ru:n,Ds:o,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc))),this.su(n),r=r!=null&&r;let o=t&&!r?this.ou():[],s=this.Za.size===0&&this.current&&!r?1:0,c=s!==this.Ya;return this.Ya=s,a.length!==0||c?{snapshot:new Ll(this.query,e.eu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Il,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((e=>this.Ha=this.Ha.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ha=this.Ha.delete(e))),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=H(),this.eu.forEach((e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))}));let t=[];return e.forEach((e=>{this.Za.has(e)||t.push(new Xl(e))})),this.Za.forEach((n=>{e.has(n)||t.push(new Yl(n))})),t}uu(e){this.Ha=e.qs,this.Za=H();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ll.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},K=`SyncEngine`,Ql=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},q=class{constructor(e){this.key=e,this.lu=!1}},J=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Ba((e=>Pa(e)),Na),this.Tu=new Map,this.Iu=new Set,this.du=new ai(R.comparator),this.Eu=new Map,this.Au=new oc,this.Ru={},this.Vu=new Map,this.mu=Ks.ur(),this.onlineState=`Unknown`,this.fu=void 0}get isPrimaryClient(){return!0===this.fu}};async function $l(e,t,n=!0){let r=xu(e),i,a=r.Pu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await tu(r,t,n,!0),i}async function eu(e,t){let n=xu(e);await tu(n,t,!0,!1)}async function tu(e,t,n,r){let i=await kc(e.localStore,Aa(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await nu(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&ol(e.remoteStore,i),s}async function nu(e,t,n,r,i){e.gu=(t,n,r)=>async function(e,t,n,r){let i=t.view.nu(n);i.Ds&&(i=await jc(e.localStore,t.query,!1).then((({documents:e})=>t.view.nu(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return hu(e,t.targetId,s._u),s.snapshot}(e,t,n,r);let a=await jc(e.localStore,t,!0),o=new Zl(t,a.qs),s=o.nu(a.documents),c=Go.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);hu(e,n,l._u);let u=new Ql(t,n,o);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),l.snapshot}async function ru(e,t,n){let r=P(e),i=r.Pu.get(t),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter((e=>!Na(e,t)))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ac(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sl(r.remoteStore,i.targetId),pu(r,i.targetId)})).catch(Wr)):(pu(r,i.targetId),await Ac(r.localStore,i.targetId,!0))}async function iu(e,t){let n=P(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sl(n.remoteStore,r.targetId))}async function au(e,t,n){let r=Su(e);try{let e=await function(e,t){let n=P(e),r=Fr.now(),i=t.reduce(((e,t)=>e.add(t.key)),H()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=Ha(),c=H();return n.Os.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=So(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new To(e.key,t,Yi(t.value.mapValue),vo.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Ga(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||=new ai(L),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await vu(r,e.changes),await bl(r.remoteStore)}catch(e){let t=Pl(e,`Failed to persist write`);n.reject(t)}}async function ou(e,t){let n=P(e);try{let e=await Ec(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Eu.get(t);r&&(N(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?N(r.lu,14607):e.removedDocuments.size>0&&(N(r.lu,42227),r.lu=!1))})),await vu(n,e,t)}catch(e){await Wr(e)}}function su(e,t,n){let r=P(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Pu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=P(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.wa)e.va(t)&&(r=!0)})),r&&Gl(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function cu(e,t,n){let r=P(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Eu.get(t),a=i&&i.key;if(a){let e=new ai(R.comparator);e=e.insert(a,Xi.newNoDocument(a,z.min()));let n=H().add(a),i=new Wo(z.min(),new Map,new ai(L),e,n);await ou(r,i),r.du=r.du.remove(a),r.Eu.delete(t),_u(r)}else await Ac(r.localStore,t,!1).then((()=>pu(r,t,n))).catch(Wr)}async function lu(e,t){let n=P(e),r=t.batch.batchId;try{let e=await wc(n.localStore,t);fu(n,r,null),du(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await vu(n,e)}catch(e){await Wr(e)}}async function uu(e,t,n){let r=P(e);try{let e=await function(e,t){let n=P(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(N(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);fu(r,t,n),du(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await vu(r,e)}catch(e){await Wr(e)}}function du(e,t){(e.Vu.get(t)||[]).forEach((e=>{e.resolve()})),e.Vu.delete(t)}function fu(e,t,n){let r=P(e),i=r.Ru[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function pu(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach((t=>{e.Au.containsKey(t)||mu(e,t)}))}function mu(e,t){e.Iu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(sl(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),_u(e))}function hu(e,t,n){for(let r of n)r instanceof Yl?(e.Au.addReference(r.key,t),gu(e,r)):r instanceof Xl?(j(K,`Document no longer in limbo: `+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||mu(e,r.key)):M(19791,{yu:r})}function gu(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(j(K,`New document in limbo: `+n),e.Iu.add(r),_u(e))}function _u(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Iu.values().next().value;e.Iu.delete(t);let n=new R(xr.fromString(t)),r=e.mu.next();e.Eu.set(r,new q(n)),e.du=e.du.insert(n,r),ol(e.remoteStore,new Ls(Aa(Ea(n.path)),r,`TargetPurposeLimboResolution`,qr.ue))}}async function vu(e,t,n){let r=P(e),i=[],a=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach(((e,s)=>{o.push(r.gu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=gc.Es(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.hu.J_(i),await async function(e,t){let n=P(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>B.forEach(t,(t=>B.forEach(t.Is,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>B.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Kr(e))throw e;j(yc,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Fs.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(t,i)}}}(r.localStore,a))}async function yu(e,t){let n=P(e);if(!n.currentUser.isEqual(t)){j(K,`User change. New user:`,t.toKey());let e=await Cc(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach((e=>{e.forEach((e=>{e.reject(new I(F.CANCELLED,t))}))})),e.Vu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await vu(n,e.Bs)}}function bu(e,t){let n=P(e),r=n.Eu.get(t);if(r&&r.lu)return H().add(r.key);{let e=H(),r=n.Tu.get(t);if(!r)return e;for(let t of r){let r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function xu(e){let t=P(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ou.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=bu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=cu.bind(null,t),t.hu.J_=Ul.bind(null,t.eventManager),t.hu.pu=Wl.bind(null,t.eventManager),t}function Su(e){let t=P(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=uu.bind(null,t),t}var Cu=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=qc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Sc(this.persistence,new vc,e.initialUser,this.serializer)}Du(e){return new fc(mc.Vi,this.serializer)}bu(e){return new Pc}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Cu.provider={build:()=>new Cu};var wu=class extends Cu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){N(this.persistence.referenceDelegate instanceof hc,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new Zs(n,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes===void 0?Gs.DEFAULT:Gs.withCacheSize(this.cacheSizeBytes);return new fc((e=>hc.Vi(e,t)),this.serializer)}},Tu=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>su(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=yu.bind(null,this.syncEngine),await Al(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zl}()}createDatastore(e){let t=qc(e.databaseInfo.databaseId),n=function(e){return new Gc(e)}(e.databaseInfo);return function(e,t,n,r){return new el(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new rl(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>su(this.syncEngine,e,0)),function(){return Lc.C()?new Lc:new Fc}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new J(e,t,n,r,i,a);return o&&(s.fu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){let t=P(e);j(nl,`RemoteStore shutting down.`),t.Ia.add(5),await al(t),t.Ea.shutdown(),t.Aa.set(`Unknown`)}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}};Tu.provider={build:()=>new Tu};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Eu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):$n(`Uncaught Error in snapshot listener:`,e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},Du=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new I(F.INVALID_ARGUMENT,`Firestore transactions require all reads to be executed before all writes.`),this.lastTransactionError;let t=await async function(e,t){let n=P(e),r={documents:t.map((e=>ps(n.serializer,e)))},i=await n.Jo(`BatchGetDocuments`,n.serializer.databaseId,xr.emptyPath(),r,t.length),a=new Map;i.forEach((e=>{let t=bs(n.serializer,e);a.set(t.key.toString(),t)}));let o=[];return t.forEach((e=>{let t=a.get(e.toString());N(!!t,55234,{key:e}),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new ko(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{let n=R.fromPath(t);this.mutations.push(new Ao(n,this.precondition(n)))})),await async function(e,t){let n=P(e),r={writes:t.map((e=>Ss(n.serializer,e)))};await n.Wo(`Commit`,n.serializer.databaseId,xr.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw M(50498,{Wu:e.constructor.name});t=z.min()}let n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new I(F.ABORTED,`Document version changed between two reads.`)}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(z.min())?vo.exists(!1):vo.updateTime(t):vo.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(z.min()))throw new I(F.INVALID_ARGUMENT,`Can't update a document that doesn't exist.`);return vo.updateTime(t)}return vo.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}},Ou=class{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Gu=n.maxAttempts,this.F_=new Jc(this.asyncQueue,`transaction_retry`)}zu(){--this.Gu,this.ju()}ju(){this.F_.g_((async()=>{let e=new Du(this.datastore),t=this.Ju(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Hu(e)}))))})).catch((e=>{this.Hu(e)}))}))}Ju(e){try{let t=this.updateFunction(e);return!Yr(t)&&t.catch&&t.then?t:(this.deferred.reject(Error(`Transaction callback must return a Promise`)),null)}catch(e){return this.deferred.reject(e),null}}Hu(e){this.Gu>0&&this.Yu(e)?(--this.Gu,this.asyncQueue.enqueueAndForget((()=>(this.ju(),Promise.resolve())))):this.deferred.reject(e)}Yu(e){if(e.name===`FirebaseError`){let t=e.code;return t===`aborted`||t===`failed-precondition`||t===`already-exists`||!Io(t)}return!1}},ku=`FirestoreClient`,Au=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Yn.UNAUTHENTICATED,this.clientId=mr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{j(ku,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(j(ku,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=Pl(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function ju(e,t){e.asyncQueue.verifyOperationInProgress(),j(ku,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Cc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>{er(`Terminating Firestore due to IndexedDb database deletion`),e.terminate().then((()=>{j(`Terminating Firestore due to IndexedDb database deletion completed successfully`)})).catch((e=>{er(`Terminating Firestore due to IndexedDb database deletion failed`,e)}))})),e._offlineComponents=t}async function Mu(e,t){e.asyncQueue.verifyOperationInProgress();let n=await Nu(e);j(ku,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>kl(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>kl(t.remoteStore,n))),e._onlineComponents=t}async function Nu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){j(ku,`Using user provided OfflineComponentProvider`);try{await ju(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===F.FAILED_PRECONDITION||e.code===F.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;er(`Error using user provided cache. Falling back to memory cache: `+n),await ju(e,new Cu)}}else j(ku,`Using default OfflineComponentProvider`),await ju(e,new wu(void 0));return e._offlineComponents}async function Pu(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(j(ku,`Using user provided OnlineComponentProvider`),await Mu(e,e._uninitializedComponentsProvider._online)):(j(ku,`Using default OnlineComponentProvider`),await Mu(e,new Tu))),e._onlineComponents}function Fu(e){return Pu(e).then((e=>e.syncEngine))}function Iu(e){return Pu(e).then((e=>e.datastore))}async function Lu(e){let t=await Pu(e),n=t.eventManager;return n.onListen=$l.bind(null,t.syncEngine),n.onUnlisten=ru.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=eu.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=iu.bind(null,t.syncEngine),n}function Ru(e,t,n={}){let r=new rr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Eu({next:n=>{a.Ou(),t.enqueueAndForget((()=>Hl(e,o))),n.fromCache&&r.source===`server`?i.reject(new I(F.UNAVAILABLE,`Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)`)):i.resolve(n)},error:e=>i.reject(e)}),o=new Jl(n,a,{includeMetadataChanges:!0,ka:!0});return Vl(e,o)}(await Lu(e),e.asyncQueue,t,n,r))),r.promise}
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function zu(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bu=new Map,Vu=`firestore.googleapis.com`,Hu=!0,Uu=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new I(F.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=Vu,this.ssl=Hu}else this.host=e.host,this.ssl=e.ssl??Hu;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ws;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Js)throw new I(F.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}Tr(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zu(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new I(F.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new I(F.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new I(F.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Wu=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new Uu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new I(F.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new I(F.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new Uu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new ar;switch(e.type){case`firstParty`:return new lr(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new I(F.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=Bu.get(e);t&&(j(`ComponentProvider`,`Removing Datastore`),Bu.delete(e),t.terminate())}(this),Promise.resolve()}};function Gu(e,t,n,r={}){e=Ar(e,Wu);let i=w(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),s=`${t}:${n}`;i&&(T(`https://${s}`),E(`Firestore`,!0)),a.host!==Vu&&a.host!==s&&er(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c=Object.assign(Object.assign({},a),{host:s,ssl:i,emulatorOptions:r});if(!Ne(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=Yn.MOCK_USER;else{t=fe(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new I(F.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new Yn(i)}e._authCredentials=new or(new ir(t,n))}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ku=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},qu=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Mr(n,e._jsonSchema))return new e(t,r||null,new R(xr.fromString(n.referencePath)))}};qu._jsonSchemaVersion=`firestore/documentReference/1.0`,qu._jsonSchema={type:jr(`string`,qu._jsonSchemaVersion),referencePath:jr(`string`)};var Ju=class e extends Ku{constructor(e,t,n){super(e,t,Ea(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qu(this.firestore,null,new R(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function Yu(e,t,...n){if(e=Ve(e),wr(`collection`,`path`,t),e instanceof Wu){let r=xr.fromString(t,...n);return Dr(r),new Ju(e,null,r)}{if(!(e instanceof qu||e instanceof Ju))throw new I(F.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(xr.fromString(t,...n));return Dr(r),new Ju(e.firestore,null,r)}}function Xu(e,t,...n){if(e=Ve(e),arguments.length===1&&(t=mr.newId()),wr(`doc`,`path`,t),e instanceof Wu){let r=xr.fromString(t,...n);return Er(r),new qu(e,null,new R(r))}{if(!(e instanceof qu||e instanceof Ju))throw new I(F.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(xr.fromString(t,...n));return Er(r),new qu(e.firestore,e instanceof Ju?e.converter:null,new R(r))}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zu=`AsyncQueue`,Qu=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Jc(this,`async_queue_retry`),this.oc=()=>{let e=Kc();e&&j(Zu,`Visibility state changed to `+e.visibilityState),this.F_.y_()},this._c=e;let t=Kc();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Kc();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));let t=new rr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Kr(e))throw e;j(Zu,`Operation failed with retryable error: `+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){let t=this._c.then((()=>(this.nc=!0,e().catch((e=>{throw this.tc=e,this.nc=!1,$n(`INTERNAL UNHANDLED ERROR: `,$u(e)),e})).then((e=>(this.nc=!1,e))))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=Nl.createAndSchedule(this,e,t,n,(e=>this.lc(e)));return this.ec.push(r),r}ac(){this.tc&&M(47125,{hc:$u(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.ec)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function $u(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ed(e){return function(e,t){if(typeof e!=`object`||!e)return!1;let n=e;for(let e of t)if(e in n&&typeof n[e]==`function`)return!0;return!1}(e,[`next`,`error`,`complete`])}var td=class extends Wu{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new Qu,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qu(e),this._firestoreClient=void 0,await e}}};function nd(e,t){let n=typeof e==`object`?e:pn(),r=typeof e==`string`?e:t||Ti,i=sn(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=le(`firestore`);e&&Gu(i,...e)}return i}function rd(e){if(e._terminated)throw new I(F.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||id(e),e._firestoreClient}function id(e){var t,n;let r=e._freezeSettings(),i=function(e,t,n,r){return new wi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,zu(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,r);e._componentsProvider||(t=r.localCache)!=null&&t._offlineComponentProvider&&(n=r.localCache)!=null&&n._onlineComponentProvider&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new Au(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ad=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(fi.fromBase64String(t))}catch(e){throw new I(F.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(fi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Mr(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};ad._jsonSchemaVersion=`firestore/bytes/1.0`,ad._jsonSchema={type:jr(`string`,ad._jsonSchemaVersion),bytes:jr(`string`)};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Y=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new I(F.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new Cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},od=class{constructor(e){this._methodName=e}},sd=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new I(F.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new I(F.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return L(this._lat,e._lat)||L(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Mr(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};sd._jsonSchemaVersion=`firestore/geoPoint/1.0`,sd._jsonSchema={type:jr(`string`,sd._jsonSchemaVersion),latitude:jr(`number`),longitude:jr(`number`)};
/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var cd=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Mr(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new I(F.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};cd._jsonSchemaVersion=`firestore/vectorValue/1.0`,cd._jsonSchema={type:jr(`string`,cd._jsonSchemaVersion),vectorValues:jr(`object`)};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ld=/^__.*__$/,ud=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new wo(e,this.data,t,this.fieldTransforms):new To(e,this.data,this.fieldMask,t,this.fieldTransforms)}},dd=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new To(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function fd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M(40011,{Ec:e})}}var pd=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){let t=this.path?.child(e),n=this.Rc({path:t,mc:!1});return n.fc(e),n}gc(e){let t=this.path?.child(e),n=this.Rc({path:t,mc:!1});return n.Ac(),n}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Od(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc(`Document fields must not be empty`);if(fd(this.Ec)&&ld.test(e))throw this.wc(`Document fields cannot begin and end with "__"`)}},md=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||qc(e)}Dc(e,t,n,r=!1){return new pd({Ec:e,methodName:t,bc:n,path:Cr.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function hd(e){let t=e._freezeSettings(),n=qc(e._databaseId);return new md(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gd(e,t,n,r,i,a={}){let o=e.Dc(a.merge||a.mergeFields?2:0,t,n,i);wd(`Data must be an object, but it was:`,o,r);let s=Sd(r,o),c,l;if(a.merge)c=new ui(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=Td(t,r,n);if(!o.contains(i))throw new I(F.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);kd(e,i)||e.push(i)}c=new ui(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new ud(new Ji(s),c,l)}var _d=class e extends od{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}},vd=class e extends od{_toFieldTransform(e){return new ho(e.path,new oo)}isEqual(t){return t instanceof e}};function yd(e,t,n,r){let i=e.Dc(1,t,n);wd(`Data must be an object, but it was:`,i,r);let a=[],o=Ji.empty();ri(r,((e,r)=>{let s=Dd(t,e,n);r=Ve(r);let c=i.gc(s);if(r instanceof _d)a.push(s);else{let e=xd(r,c);e!=null&&(a.push(s),o.set(s,e))}}));let s=new ui(a);return new dd(o,s,i.fieldTransforms)}function bd(e,t,n,r,i,a){let o=e.Dc(1,t,n),s=[Td(t,r,n)],c=[i];if(a.length%2!=0)throw new I(F.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(Td(t,a[e])),c.push(a[e+1]);let l=[],u=Ji.empty();for(let e=s.length-1;e>=0;--e)if(!kd(l,s[e])){let t=s[e],n=c[e];n=Ve(n);let r=o.gc(t);if(n instanceof _d)l.push(t);else{let e=xd(n,r);e!=null&&(l.push(t),u.set(t,e))}}let d=new ui(l);return new dd(u,d,o.fieldTransforms)}function xd(e,t){if(Cd(e=Ve(e)))return wd(`Unsupported field value:`,t,e),Sd(e,t);if(e instanceof od)return function(e,t){if(!fd(t.Ec))throw t.wc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.wc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=xd(i,t.yc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=Ve(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return to(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=Fr.fromDate(e);return{timestampValue:os(t.serializer,n)}}if(e instanceof Fr){let n=new Fr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:os(t.serializer,n)}}if(e instanceof sd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ad)return{bytesValue:ss(t.serializer,e._byteString)};if(e instanceof qu){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:us(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof cd)return function(e,t){return{mapValue:{fields:{[Di]:{stringValue:Ai},[ji]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.wc(`VectorValues must only contain numeric values.`);return $a(t.serializer,e)}))}}}}}}(e,t);throw t.wc(`Unsupported field value: ${kr(e)}`)}(e,t)}function Sd(e,t){let n={};return ii(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ri(e,((e,r)=>{let i=xd(r,t.Vc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function Cd(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof Fr||e instanceof sd||e instanceof ad||e instanceof qu||e instanceof od||e instanceof cd)}function wd(e,t,n){if(!Cd(n)||!Or(n)){let r=kr(n);throw r===`an object`?t.wc(e+` a custom object`):t.wc(e+` `+r)}}function Td(e,t,n){if((t=Ve(t))instanceof Y)return t._internalPath;if(typeof t==`string`)return Dd(e,t);throw Od(`Field path arguments must be of type string or `,e,!1,void 0,n)}var Ed=RegExp(`[~\\*/\\[\\]]`);function Dd(e,t,n){if(t.search(Ed)>=0)throw Od(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Y(...t.split(`.`))._internalPath}catch{throw Od(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Od(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new I(F.INVALID_ARGUMENT,s+e+c)}function kd(e,t){return e.some((e=>e.isEqual(t)))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ad=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Md(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},jd=class extends Ad{data(){return super.data()}};function Md(e,t){return typeof t==`string`?Dd(e,t):t instanceof Y?t._internalPath:t._delegate._internalPath}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nd(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new I(F.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var Pd=class{convertValue(e,t=`none`){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw M(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return ri(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=(e.fields?.[ji].arrayValue?.values)?.map((e=>hi(e.doubleValue)));return new cd(t)}convertGeoPoint(e){return new sd(hi(e.latitude),hi(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=Si(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(Ci(e));default:return null}}convertTimestamp(e){let t=mi(e);return new Fr(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=xr.fromString(e);N(Is(n),9688,{name:e});let r=new Ei(n.get(1),n.get(3)),i=new R(n.popFirst(5));return r.isEqual(t)||$n(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Fd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var Id=class extends Pd{constructor(e){super(),this.firestore=e}convertBytes(e){return new ad(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new qu(this.firestore,null,t)}},X=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ld=class e extends Ad{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(Md(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new I(F.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};Ld._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,Ld._jsonSchema={type:jr(`string`,Ld._jsonSchemaVersion),bundleSource:jr(`string`,`DocumentSnapshot`),bundleName:jr(`string`),bundle:jr(`string`)};var Rd=class extends Ld{data(e={}){return super.data(e)}},zd=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new X(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Rd(this._firestore,this._userDataWriter,n.key,n,new X(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new I(F.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new Rd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new X(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new Rd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new X(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Bd(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new I(F.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=mr.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function Bd(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return M(61501,{type:e})}}zd._jsonSchemaVersion=`firestore/querySnapshot/1.0`,zd._jsonSchema={type:jr(`string`,zd._jsonSchemaVersion),bundleSource:jr(`string`,`QuerySnapshot`),bundleName:jr(`string`),bundle:jr(`string`)};var Vd=class extends Pd{constructor(e){super(),this.firestore=e}convertBytes(e){return new ad(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new qu(this.firestore,null,t)}};function Hd(e){e=Ar(e,Ku);let t=Ar(e.firestore,td),n=rd(t),r=new Vd(t);return Nd(e._query),Ru(n,e._query).then((n=>new zd(t,r,e,n)))}function Ud(e,t,n){e=Ar(e,qu);let r=Ar(e.firestore,td),i=Fd(e.converter,t,n);return qd(r,[gd(hd(r),`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,vo.none())])}function Wd(e){return qd(Ar(e.firestore,td),[new ko(e._key,vo.none())])}function Gd(e,t){let n=Ar(e.firestore,td),r=Xu(e),i=Fd(e.converter,t);return qd(n,[gd(hd(e.firestore),`addDoc`,r._key,i,e.converter!==null,{}).toMutation(r._key,vo.exists(!1))]).then((()=>r))}function Kd(e,...t){e=Ve(e);let n={includeMetadataChanges:!1,source:`default`},r=0;typeof t[r]!=`object`||ed(t[r])||(n=t[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ed(t[r])){let e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let a,o,s;if(e instanceof qu)o=Ar(e.firestore,td),s=Ea(e._key.path),a={next:n=>{t[r]&&t[r](Jd(o,e,n))},error:t[r+1],complete:t[r+2]};else{let n=Ar(e,Ku);o=Ar(n.firestore,td),s=n._query;let i=new Vd(o);a={next:e=>{t[r]&&t[r](new zd(o,i,n,e))},error:t[r+1],complete:t[r+2]},Nd(e._query)}return function(e,t,n,r){let i=new Eu(r),a=new Jl(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Vl(await Lu(e),a))),()=>{i.Ou(),e.asyncQueue.enqueueAndForget((async()=>Hl(await Lu(e),a)))}}(rd(o),s,i,a)}function qd(e,t){return function(e,t){let n=new rr;return e.asyncQueue.enqueueAndForget((async()=>au(await Fu(e),t,n))),n.promise}(rd(e),t)}function Jd(e,t,n){let r=n.docs.get(t._key),i=new Vd(e);return new Ld(e,i,t._key,r,new X(n.hasPendingWrites,n.fromCache),t.converter)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Yd={maxAttempts:5};function Z(e,t){if((e=Ve(e)).firestore!==t)throw new I(F.INVALID_ARGUMENT,`Provided document reference is from a different Firestore instance.`);return e}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xd=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hd(e)}get(e){let t=Z(e,this._firestore),n=new Id(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||e.length!==1)return M(24041);let r=e[0];if(r.isFoundDocument())return new Ad(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Ad(this._firestore,n,t._key,null,t.converter);throw M(18433,{doc:r})}))}set(e,t,n){let r=Z(e,this._firestore),i=Fd(r.converter,t,n),a=gd(this._dataReader,`Transaction.set`,r._key,i,r.converter!==null,n);return this._transaction.set(r._key,a),this}update(e,t,n,...r){let i=Z(e,this._firestore),a;return a=typeof(t=Ve(t))==`string`||t instanceof Y?bd(this._dataReader,`Transaction.update`,i._key,t,n,r):yd(this._dataReader,`Transaction.update`,i._key,t),this._transaction.update(i._key,a),this}delete(e){let t=Z(e,this._firestore);return this._transaction.delete(t._key),this}},Zd=class extends Xd{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Z(e,this._firestore),n=new Vd(this._firestore);return super.get(e).then((e=>new Ld(this._firestore,n,t._key,e._document,new X(!1,!1),t.converter)))}};function Qd(e,t,n){e=Ar(e,td);let r=Object.assign(Object.assign({},Yd),n);return(function(e){if(e.maxAttempts<1)throw new I(F.INVALID_ARGUMENT,`Max attempts must be at least 1`)})(r),function(e,t,n){let r=new rr;return e.asyncQueue.enqueueAndForget((async()=>{let i=await Iu(e);new Ou(e.asyncQueue,i,n,t,r).zu()})),r.promise}(rd(e),(n=>t(new Zd(e,n))),r)}function $d(){return new vd(`serverTimestamp`)}(function(e,t=!0){(function(e){Xn=e})(dn),on(new He(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new td(new sr(e.getProvider(`auth-internal`)),new dr(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new I(F.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new Ei(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),hn(qn,Jn,e),hn(qn,Jn,`esm2017`)})();function ef(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function tf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var nf=tf,rf=new ke(`auth`,`Firebase`,tf()),af=new $e(`@firebase/auth`);function sf(e,...t){af.logLevel<=O.WARN&&af.warn(`Auth (${dn}): ${e}`,...t)}function cf(e,...t){af.logLevel<=O.ERROR&&af.error(`Auth (${dn}): ${e}`,...t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function lf(e,...t){throw mf(e,...t)}function uf(e,...t){return mf(e,...t)}function df(e,t,n){let r=Object.assign(Object.assign({},nf()),{[t]:n});return new ke(`auth`,`Firebase`,r).create(t,{appName:e.name})}function ff(e){return df(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function pf(e,t,n){let r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&lf(e,`argument-error`),df(e,`argument-error`,`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mf(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return rf.create(e,...t)}function Q(e,t,...n){if(!e)throw mf(t,...n)}function hf(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw cf(t),Error(t)}function gf(e,t){e||hf(t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function _f(){return typeof self<`u`&&self.location?.href||``}function vf(){return yf()===`http:`||yf()===`https:`}function yf(){return typeof self<`u`&&self.location?.protocol||null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function bf(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(vf()||xe()||`connection`in navigator)?navigator.onLine:!0}function xf(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Sf=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,gf(t>e,`Short delay should be less than long delay!`),this.isMobile=ve()||Se()}get(){return bf()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Cf(e,t){gf(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wf=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;hf(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;hf(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;hf(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},Tf={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},Ef=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],Df=new Sf(3e4,6e4);function Of(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function kf(e,t,n,r,i={}){return Af(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=Fe(Object.assign({key:e.config.apiKey},a)).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c=Object.assign({method:t,headers:s},i);return be()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&w(e.emulatorConfig.host)&&(c.credentials=`include`),wf.fetch()(await Mf(e,e.config.apiHost,n,o),c)})}async function Af(e,t,n){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},Tf),t);try{let t=new Pf(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw Ff(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw Ff(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw Ff(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw Ff(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw df(e,o,n);lf(e,o)}}catch(t){if(t instanceof Oe)throw t;lf(e,`network-request-failed`,{message:String(t)})}}async function jf(e,t,n,r,i={}){let a=await kf(e,t,n,r,i);return`mfaPendingCredential`in a&&lf(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function Mf(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?Cf(e.config,i):`${e.config.apiScheme}://${i}`;return Ef.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function Nf(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var Pf=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(uf(this.auth,`network-request-failed`)),Df.get())})}};function Ff(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=uf(e,t,r);return i.customData._tokenResponse=n,i}function If(e){return e!==void 0&&e.enterprise!==void 0}var Lf=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Nf(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function Rf(e,t){return kf(e,`GET`,`/v2/recaptchaConfig`,Of(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function zf(e,t){return kf(e,`POST`,`/v1/accounts:delete`,t)}async function Bf(e,t){return kf(e,`POST`,`/v1/accounts:lookup`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Vf(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Hf(e,t=!1){let n=Ve(e),r=await n.getIdToken(t),i=Wf(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Vf(Uf(i.auth_time)),issuedAtTime:Vf(Uf(i.iat)),expirationTime:Vf(Uf(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Uf(e){return Number(e)*1e3}function Wf(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return cf(`JWT malformed, contained fewer than 3 sections`),null;try{let e=ne(n);return e?JSON.parse(e):(cf(`Failed to decode base64 JWT payload`),null)}catch(e){return cf(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function Gf(e){let t=Wf(e);return Q(t,`internal-error`),Q(t.exp!==void 0,`internal-error`),Q(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Kf(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Oe&&qf(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function qf({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Jf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},Yf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vf(this.lastLoginAt),this.creationTime=Vf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Xf(e){let t=e.auth,n=await e.getIdToken(),r=await Kf(e,Bf(t,{idToken:n}));Q(r?.users.length,t,`internal-error`);let i=r.users[0];e._notifyReloadListener(i);let a=i.providerUserInfo?.length?$f(i.providerUserInfo):[],o=Qf(e.providerData,a),s=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!o?.length,l=s?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Yf(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)}async function Zf(e){let t=Ve(e);await Xf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Qf(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function $f(e){return e.map(e=>{var{providerId:t}=e,n=ef(e,[`providerId`]);return{providerId:t,uid:n.rawId||``,displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function ep(e,t){let n=await Af(e,{},async()=>{let n=Fe({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await Mf(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&w(e.emulatorConfig.host)&&(s.credentials=`include`),wf.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tp(e,t){return kf(e,`POST`,`/v2/accounts:revokeToken`,Of(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var np=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,`internal-error`),Q(e.idToken!==void 0,`internal-error`),Q(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):Gf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,`internal-error`);let t=Gf(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await ep(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(Q(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(Q(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(Q(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return hf(`not implemented`)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function rp(e,t){Q(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var ip=class e{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ef(e,[`uid`,`auth`,`stsTokenManager`]);this.providerId=`firebase`,this.proactiveRefresh=new Jf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Yf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Kf(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Hf(this,e)}reload(){return Zf(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(ff(this.auth));let e=await this.getIdToken();return await Kf(this,zf(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;Q(d&&h,t,`internal-error`);let g=np.fromJSON(this.name,h);Q(typeof d==`string`,t,`internal-error`),rp(r,t.name),rp(i,t.name),Q(typeof f==`boolean`,t,`internal-error`),Q(typeof p==`boolean`,t,`internal-error`),rp(a,t.name),rp(o,t.name),rp(s,t.name),rp(c,t.name),rp(l,t.name),rp(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>Object.assign({},e))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new np;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Xf(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];Q(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:$f(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new np;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Yf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},ap=new Map;function op(e){gf(e instanceof Function,`Expected a class definition`);let t=ap.get(e);return t?(gf(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,ap.set(e,t),t)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var sp=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};sp.type=`NONE`;var cp=sp;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function lp(e,t,n){return`firebase:${e}:${t}:${n}`}var up=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=lp(this.userKey,r.apiKey,i),this.fullPersistenceKey=lp(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await Bf(this.auth,{idToken:e}).catch(()=>void 0);return t?ip._fromGetAccountInfoResponse(this.auth,t,e):null}return ip._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(op(cp),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||op(cp),o=lp(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await Bf(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await ip._fromGetAccountInfoResponse(t,e,n)}else r=ip._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function dp(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(hp(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(fp(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(_p(t))return`Blackberry`;if(vp(t))return`Webos`;if(pp(t))return`Safari`;if((t.includes(`chrome/`)||mp(t))&&!t.includes(`edge/`))return`Chrome`;if(gp(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function fp(e=_e()){return/firefox\//i.test(e)}function pp(e=_e()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function mp(e=_e()){return/crios\//i.test(e)}function hp(e=_e()){return/iemobile/i.test(e)}function gp(e=_e()){return/android/i.test(e)}function _p(e=_e()){return/blackberry/i.test(e)}function vp(e=_e()){return/webos/i.test(e)}function yp(e=_e()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function bp(e=_e()){return yp(e)&&!!window.navigator?.standalone}function xp(){return Ce()&&document.documentMode===10}function Sp(e=_e()){return yp(e)||gp(e)||vp(e)||_p(e)||/windows phone/i.test(e)||hp(e)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Cp(e,t=[]){let n;switch(e){case`Browser`:n=dp(_e());break;case`Worker`:n=`${dp(_e())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${dn}/${r}`}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{let r=e(t);n(r)}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Tp(e,t={}){return kf(e,`GET`,`/v2/passwordPolicy`,Of(e,t))}
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ep=6,Dp=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Ep,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},Op=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ap(this),this.idTokenSubscription=new Ap(this),this.beforeStateQueue=new wp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=op(t)),this._initializationPromise=this.queue(async()=>{var n;if(!this._deleted&&(this.persistenceManager=await up.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Bf(this,{idToken:e}),n=await ip._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(cn(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xf(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xf()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject(ff(this));let t=e?Ve(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(ff(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject(ff(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(op(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Tp(this),t=new Dp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ke(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),n={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await tp(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&op(e)||this._popupRedirectResolver;Q(t,this,`argument-error`),this.redirectPersistenceManager=await up.create(this,[op(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sf(`Error while retrieving App Check token: ${e.error}`),e?.token}};function kp(e){return Ve(e)}var Ap=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Le(e=>this.observer=e)}get next(){return Q(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},jp={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function Mp(e){jp=e}function Np(e){return jp.loadJS(e)}function Pp(){return jp.recaptchaEnterpriseScript}function Fp(){return jp.gapiScript}function Ip(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var Lp=class{constructor(){this.enterprise=new Rp}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Rp=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},zp=`recaptcha-enterprise`,Bp=`NO_RECAPTCHA`,Vp=class{constructor(e){this.type=zp,this.auth=kp(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Rf(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new Lf(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;If(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Bp)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new Lp().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&If(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=Pp();t.length!==0&&(t+=n),Np(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function Hp(e,t,n,r=!1,i=!1){let a=new Vp(e),o;if(i)o=Bp;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s=Object.assign({},t);if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function Up(e,t,n,r,i){if(i===`EMAIL_PASSWORD_PROVIDER`)if(e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)){let i=await Hp(e,t,n,n===`getOobCode`);return r(e,i)}else return r(e,t).catch(async i=>{if(i.code===`auth/missing-recaptcha-token`){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let i=await Hp(e,t,n,n===`getOobCode`);return r(e,i)}else return Promise.reject(i)});else if(i===`PHONE_PROVIDER`)if(e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)){let i=await Hp(e,t,n);return r(e,i).catch(async i=>{if(e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let i=await Hp(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}else{let i=await Hp(e,t,n,!1,!0);return r(e,i)}else return Promise.reject(i+` provider is not supported.`)}async function Wp(e){let t=kp(e),n=await Rf(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}),r=new Lf(n);t.tenantId==null?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()&&new Vp(t).verify()}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Gp(e,t){let n=sn(e,`auth`);if(n.isInitialized()){let e=n.getImmediate(),r=n.getOptions();if(Ne(r,t??{}))return e;lf(e,`already-initialized`)}return n.initialize({options:t})}function Kp(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(op);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function qp(e,t,n){let r=kp(e);Q(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=Jp(t),{host:o,port:s}=Yp(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),Q(Ne(l,r.config.emulator)&&Ne(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,w(o)?(T(`${a}//${o}${c}`),E(`Auth`,!0)):i||Zp()}function Jp(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function Yp(e){let t=Jp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:Xp(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:Xp(t)}}}function Xp(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function Zp(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Qp=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hf(`not implemented`)}_getIdTokenResponse(e){return hf(`not implemented`)}_linkToIdToken(e,t){return hf(`not implemented`)}_getReauthenticationResolver(e){return hf(`not implemented`)}};async function $p(e,t){return kf(e,`POST`,`/v1/accounts:signUp`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function em(e,t){return jf(e,`POST`,`/v1/accounts:signInWithPassword`,Of(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function tm(e,t){return jf(e,`POST`,`/v1/accounts:signInWithEmailLink`,Of(e,t))}async function nm(e,t){return jf(e,`POST`,`/v1/accounts:signInWithEmailLink`,Of(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var rm=class e extends Qp{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`};return Up(e,t,`signInWithPassword`,em,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return tm(e,{email:this._email,oobCode:this._password});default:lf(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:let n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`};return Up(e,n,`signUpPassword`,$p,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return nm(e,{idToken:t,email:this._email,oobCode:this._password});default:lf(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function im(e,t){return jf(e,`POST`,`/v1/accounts:signInWithIdp`,Of(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var am=`http://localhost`,om=class e extends Qp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):lf(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let n=typeof t==`string`?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,a=ef(n,[`providerId`,`signInMethod`]);if(!r||!i)return null;let o=new e(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return im(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,im(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,im(e,t)}buildRequest(){let e={requestUri:am,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fe(t)}return e}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function sm(e,t){return kf(e,`POST`,`/v1/accounts:sendVerificationCode`,Of(e,t))}async function cm(e,t){return jf(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Of(e,t))}async function lm(e,t){let n=await jf(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Of(e,t));if(n.temporaryProof)throw Ff(e,`account-exists-with-different-credential`,n);return n}var um={USER_NOT_FOUND:`user-not-found`};async function dm(e,t){let n=Object.assign(Object.assign({},t),{operation:`REAUTH`});return jf(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Of(e,n),um)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var fm=class e extends Qp{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return cm(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return lm(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return dm(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function pm(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function mm(e){let t=Ie(D(e)).link,n=t?Ie(D(t)).deep_link_id:null,r=Ie(D(e)).deep_link_id;return(r?Ie(D(r)).link:null)||r||n||t||e}var hm=class e{constructor(e){let t=Ie(D(e)),n=t.apiKey??null,r=t.oobCode??null,i=pm(t.mode??null);Q(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=mm(t);try{return new e(n)}catch{return null}}},gm=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return rm._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=hm.parseLink(t);return Q(n,`argument-error`),rm._fromEmailAndCode(e,n.code,n.tenantId)}};gm.PROVIDER_ID=`password`,gm.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,gm.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var _m=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},vm=class extends _m{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},ym=class e extends vm{static credentialFromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;return Q(`providerId`in t&&`signInMethod`in t,`argument-error`),om._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Q(e.idToken||e.accessToken,`argument-error`),om._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return e.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return e.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:o,providerId:s}=t;if(!r&&!i&&!n&&!a||!s)return null;try{return new e(s)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:a})}catch{return null}}},bm=class e extends vm{constructor(){super(`facebook.com`)}static credential(t){return om._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};bm.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,bm.PROVIDER_ID=`facebook.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var xm=class e extends vm{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return om._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};xm.GOOGLE_SIGN_IN_METHOD=`google.com`,xm.PROVIDER_ID=`google.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Sm=class e extends vm{constructor(){super(`github.com`)}static credential(t){return om._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Sm.GITHUB_SIGN_IN_METHOD=`github.com`,Sm.PROVIDER_ID=`github.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Cm=class e extends vm{constructor(){super(`twitter.com`)}static credential(t,n){return om._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};Cm.TWITTER_SIGN_IN_METHOD=`twitter.com`,Cm.PROVIDER_ID=`twitter.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function wm(e,t){return jf(e,`POST`,`/v1/accounts:signUp`,Of(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Tm=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){let a=await ip._fromIdTokenResponse(t,r,i),o=Em(r);return new e({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);let i=Em(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})}};function Em(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Dm=class e extends Oe{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function Om(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?Dm._fromErrorAndOperation(e,n,t,r):n})}async function km(e,t,n=!1){let r=await Kf(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Tm._forOperation(e,`link`,r)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Am(e,t,n=!1){let{auth:r}=e;if(cn(r.app))return Promise.reject(ff(r));let i=`reauthenticate`;try{let a=await Kf(e,Om(r,i,t,e),n);Q(a.idToken,r,`internal-error`);let o=Wf(a.idToken);Q(o,r,`internal-error`);let{sub:s}=o;return Q(e.uid===s,r,`user-mismatch`),Tm._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&lf(r,`user-mismatch`),e}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function jm(e,t,n=!1){if(cn(e.app))return Promise.reject(ff(e));let r=`signIn`,i=await Om(e,r,t),a=await Tm._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function Mm(e,t){return jm(kp(e),t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Nm(e){let t=kp(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Pm(e,t,n){if(cn(e.app))return Promise.reject(ff(e));let r=kp(e),i=await Up(r,{returnSecureToken:!0,email:t,password:n,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,wm,`EMAIL_PASSWORD_PROVIDER`).catch(t=>{throw t.code===`auth/password-does-not-meet-requirements`&&Nm(e),t}),a=await Tm._fromIdTokenResponse(r,`signIn`,i);return await r._updateCurrentUser(a.user),a}function Fm(e,t,n){return cn(e.app)?Promise.reject(ff(e)):Mm(Ve(e),gm.credential(t,n)).catch(async t=>{throw t.code===`auth/password-does-not-meet-requirements`&&Nm(e),t})}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Im(e,t){return kf(e,`POST`,`/v1/accounts:update`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Lm(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;let r=Ve(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},a=await Kf(r,Im(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;let o=r.providerData.find(({providerId:e})=>e===`password`);o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Rm(e,t,n,r){return Ve(e).onIdTokenChanged(t,n,r)}function zm(e,t,n){return Ve(e).beforeAuthStateChanged(t,n)}function Bm(e,t,n,r){return Ve(e).onAuthStateChanged(t,n,r)}function Vm(e){return Ve(e).signOut()}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Hm(e,t){return kf(e,`POST`,`/v2/accounts/mfaEnrollment:start`,Of(e,t))}function Um(e,t){return kf(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,Of(e,t))}function Wm(e,t){return kf(e,`POST`,`/v2/accounts/mfaEnrollment:start`,Of(e,t))}function Gm(e,t){return kf(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,Of(e,t))}var Km=`__sak`,qm=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Km,`1`),this.storage.removeItem(Km),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},Jm=1e3,Ym=10,Xm=class extends qm{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);xp()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Ym):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},Jm)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};Xm.type=`LOCAL`;var Zm=Xm,Qm=1e3;function $m(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function eh(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var th=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=eh(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:$m(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=eh(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=eh(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=$m(n),i=setInterval(()=>{let e=$m(n);e!==r&&(t(e),r=e)},Qm);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};th.type=`COOKIE`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var nh=class extends qm{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};nh.type=`SESSION`;var rh=nh;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ih(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ah=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=Array.from(a).map(async e=>e(t.origin,i)),s=await ih(o);t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:s})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};ah.receivers=[];
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function oh(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var sh=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=oh(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ch(){return window}function lh(e){ch().location.href=e}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function uh(){return ch().WorkerGlobalScope!==void 0&&typeof ch().importScripts==`function`}async function dh(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fh(){return(navigator==null?void 0:navigator.serviceWorker)?.controller||null}function ph(){return uh()?self:null}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var mh=`firebaseLocalStorageDb`,hh=1,gh=`firebaseLocalStorage`,_h=`fbase_key`,vh=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function yh(e,t){return e.transaction([gh],t?`readwrite`:`readonly`).objectStore(gh)}function bh(){let e=indexedDB.deleteDatabase(mh);return new vh(e).toPromise()}function xh(){let e=indexedDB.open(mh,hh);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(gh,{keyPath:_h})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(gh)?t(n):(n.close(),await bh(),t(await xh()))})})}async function Sh(e,t,n){let r=yh(e,!0).put({[_h]:t,value:n});return new vh(r).toPromise()}async function Ch(e,t){let n=yh(e,!1).get(t),r=await new vh(n).toPromise();return r===void 0?null:r.value}function wh(e,t){let n=yh(e,!0).delete(t);return new vh(n).toPromise()}var Th=800,Eh=3,Dh=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await xh(),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>Eh)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return uh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ah._getInstance(ph()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await dh(),!this.activeServiceWorker)return;this.sender=new sh(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fh()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await xh();return await Sh(e,Km,`1`),await wh(e,Km),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sh(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>Ch(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let t=yh(e,!1).getAll();return new vh(t).toPromise()});if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Th)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Dh.type=`LOCAL`;var Oh=Dh;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function kh(e,t){return kf(e,`POST`,`/v2/accounts/mfaSignIn:start`,Of(e,t))}function Ah(e,t){return kf(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,Of(e,t))}function jh(e,t){return kf(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,Of(e,t))}Ip(`rcb`),new Sf(3e4,6e4);
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Mh=`recaptcha`;async function Nh(e,t,n){if(!e._getRecaptchaConfig())try{await Wp(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r){Q(t.type===`enroll`,e,`internal-error`);let i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}};return(await Up(e,i,`mfaSmsEnrollment`,async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Bp){Q(n?.type===Mh,e,`argument-error`);let r=await Ph(e,t,n);return Hm(e,r)}return Hm(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}else{Q(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;Q(i,e,`missing-multi-factor-info`);let a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}};return(await Up(e,a,`mfaSmsSignIn`,async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Bp){Q(n?.type===Mh,e,`argument-error`);let r=await Ph(e,t,n);return kh(e,r)}return kh(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else{let t={phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`};return(await Up(e,t,`sendVerificationCode`,async(e,t)=>{if(t.captchaResponse===Bp){Q(n?.type===Mh,e,`argument-error`);let r=await Ph(e,t,n);return sm(e,r)}return sm(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Ph(e,t,n){Q(n.type===Mh,e,`argument-error`);let r=await n.verify();Q(typeof r==`string`,e,`argument-error`);let i=Object.assign({},t);if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Fh=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=kp(t)}verifyPhoneNumber(e,t){return Nh(this.auth,e,Ve(t))}static credential(e,t){return fm._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?fm._fromTokenResponse(t,n):null}};Fh.PROVIDER_ID=`phone`,Fh.PHONE_SIGN_IN_METHOD=`phone`;
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ih(e,t){return t?op(t):(Q(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Lh=class extends Qp{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return im(e,this._buildIdpRequest())}_linkToIdToken(e,t){return im(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return im(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Rh(e){return jm(e.auth,new Lh(e),e.bypassAuthState)}function zh(e){let{auth:t,user:n}=e;return Q(n,t,`internal-error`),Am(n,new Lh(e),e.bypassAuthState)}async function Bh(e){let{auth:t,user:n}=e;return Q(n,t,`internal-error`),km(n,new Lh(e),e.bypassAuthState)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Vh=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return Rh;case`linkViaPopup`:case`linkViaRedirect`:return Bh;case`reauthViaPopup`:case`reauthViaRedirect`:return zh;default:lf(this.auth,`internal-error`)}}resolve(e){gf(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gf(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},Hh=new Sf(2e3,1e4);async function Uh(e,t,n){if(cn(e.app))return Promise.reject(uf(e,`operation-not-supported-in-this-environment`));let r=kp(e);pf(e,t,_m);let i=Ih(r,n);return new Wh(r,`signInViaPopup`,t,i).executeNotNull()}var Wh=class e extends Vh{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return Q(e,this.auth,`internal-error`),e}async onExecution(){gf(this.filter.length===1,`Popup operations only handle one event`);let e=oh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(uf(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(uf(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(uf(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,Hh.get())};e()}};Wh.currentPopupAction=null;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Gh=`pendingRedirect`,Kh=new Map,qh=class extends Vh{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=Kh.get(this.auth._key());if(!e){try{let t=await Jh(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Kh.set(this.auth._key(),e)}return this.bypassAuthState||Kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Jh(e,t){let n=Zh(t),r=Xh(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function Yh(e,t){Kh.set(e._key(),t)}function Xh(e){return op(e._redirectPersistence)}function Zh(e){return lp(Gh,e.config.apiKey,e.name)}async function Qh(e,t,n=!1){if(cn(e.app))return Promise.reject(ff(e));let r=kp(e),i=Ih(r,t),a=await new qh(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var $h=600*1e3,eg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rg(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!ng(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(uf(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$h&&this.cachedEventUids.clear(),this.cachedEventUids.has(tg(e))}saveEventToCache(e){this.cachedEventUids.add(tg(e)),this.lastProcessedEventTime=Date.now()}};function tg(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function ng({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function rg(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return ng(e);default:return!1}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function ig(e,t={}){return kf(e,`GET`,`/v1/projects`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ag=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,og=/^https?/;async function sg(e){if(e.config.emulator)return;let{authorizedDomains:t}=await ig(e);for(let e of t)try{if(cg(e))return}catch{}lf(e,`unauthorized-domain`)}function cg(e){let t=_f(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!og.test(n))return!1;if(ag.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var lg=new Sf(3e4,6e4);function ug(){let e=ch().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function dg(e){return new Promise((t,n)=>{function r(){ug(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ug(),n(uf(e,`network-request-failed`))},timeout:lg.get()})}if(ch().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ch().gapi?.load)r();else{let t=Ip(`iframefcb`);return ch()[t]=()=>{gapi.load?r():n(uf(e,`network-request-failed`))},Np(`${Fp()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw fg=null,e})}var fg=null;function pg(e){return fg||=dg(e),fg}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var mg=new Sf(5e3,15e3),hg=`__/auth/iframe`,gg=`emulator/auth/iframe`,_g={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},vg=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function yg(e){let t=e.config;Q(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?Cf(t,gg):`https://${e.config.authDomain}/${hg}`,r={apiKey:t.apiKey,appName:e.name,v:dn},i=vg.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${Fe(r).slice(1)}`}async function bg(e){let t=await pg(e),n=ch().gapi;return Q(n,e,`internal-error`),t.open({where:document.body,url:yg(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_g,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=uf(e,`network-request-failed`),a=ch().setTimeout(()=>{r(i)},mg.get());function o(){ch().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var xg={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},Sg=500,Cg=600,wg=`_blank`,Tg=`http://localhost`,Eg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Dg(e,t,n,r=Sg,i=Cg){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c=Object.assign(Object.assign({},xg),{width:r.toString(),height:i.toString(),top:a,left:o}),l=_e().toLowerCase();n&&(s=mp(l)?wg:n),fp(l)&&(t||=Tg,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(bp(l)&&s!==`_self`)return Og(t||``,s),new Eg(null);let d=window.open(t||``,s,u);Q(d,e,`popup-blocked`);try{d.focus()}catch{}return new Eg(d)}function Og(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var kg=`__/auth/handler`,Ag=`emulator/auth/handler`,jg=`fac`;async function Mg(e,t,n,r,i,a){Q(e.config.authDomain,e,`auth-domain-config-required`),Q(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:dn,eventId:i};if(t instanceof _m){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,Me(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof vm){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${jg}=${encodeURIComponent(c)}`:``;return`${Ng(e)}?${Fe(s).slice(1)}${l}`}function Ng({config:e}){return e.emulator?Cf(e,Ag):`https://${e.authDomain}/${kg}`}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Pg=`webStorageSupport`,Fg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rh,this._completeRedirectFn=Qh,this._overrideRedirectResult=Yh}async _openPopup(e,t,n,r){gf(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`);let i=await Mg(e,t,n,_f(),r);return Dg(e,i,oh())}async _openRedirect(e,t,n,r){await this._originValidation(e);let i=await Mg(e,t,n,_f(),r);return lh(i),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(gf(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await bg(e),n=new eg(e);return t.register(`authEvent`,t=>(Q(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pg,{type:Pg},n=>{let r=n?.[0]?.[Pg];r!==void 0&&t(!!r),lf(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sg(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Sp()||pp()||yp()}},Ig=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return hf(`unexpected MultiFactorSessionType`)}}},Lg=class e extends Ig{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return Um(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Ah(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},Rg=class{constructor(){}static assertion(e){return Lg._fromCredential(e)}};Rg.FACTOR_ID=`phone`;var zg=class{static assertionForEnrollment(e,t){return Bg._fromSecret(e,t)}static assertionForSignIn(e,t){return Bg._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;Q(t.user?.auth!==void 0,`internal-error`);let n=await Wm(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return Vg._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};zg.FACTOR_ID=`totp`;var Bg=class e extends Ig{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return Q(this.secret!==void 0,e,`argument-error`),Gm(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){Q(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return jh(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},Vg=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(Hg(e)||Hg(t))&&(n=!0),n&&(Hg(e)&&(e=this.auth.currentUser?.email||`unknownuser`),Hg(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function Hg(e){return e===void 0||e?.length===0}var Ug=`@firebase/auth`,Wg=`1.10.8`,Gg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Kg(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function qg(e){on(new He(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;Q(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c={apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:Cp(e)},l=new Op(r,i,a,c);return Kp(l,n),l},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),on(new He(`auth-internal`,e=>(e=>new Gg(e))(kp(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),hn(Ug,Wg,Kg(e)),hn(Ug,Wg,`esm2017`)}var Jg=ue(`authIdTokenMaxAge`)||300,Yg=null,Xg=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Jg)return;let i=n?.token;Yg!==i&&(Yg=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Zg(e=pn()){let t=sn(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=Gp(e,{popupRedirectResolver:Fg,persistence:[Oh,Zm,rh]}),r=ue(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=Xg(e.toString());zm(n,t,()=>t(n.currentUser)),Rm(n,e=>t(e))}}let i=ce(`auth`);return i&&qp(n,`http://${i}`),n}function Qg(){return document.getElementsByTagName(`head`)?.[0]??document}Mp({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=uf(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,Qg().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),qg(`Browser`);function $g({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:1.5,stroke:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25`}))}var e_=_.forwardRef($g);function t_({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:1.5,stroke:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z`}))}var n_=_.forwardRef(t_);function r_({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:1.5,stroke:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z`}))}var i_=_.forwardRef(r_);function a_({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:1.5,stroke:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z`}),_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z`}))}var o_=_.forwardRef(a_);function s_({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:1.5,stroke:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z`}))}var c_=_.forwardRef(s_);function l_({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:1.5,stroke:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25`}))}var u_=_.forwardRef(l_);function d_({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:1.5,stroke:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z`}))}var f_=_.forwardRef(d_);function p_({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:1.5,stroke:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z`}))}var m_=_.forwardRef(p_);function h_({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:1.5,stroke:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z`}))}var g_=_.forwardRef(h_);function __({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:1.5,stroke:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M6 18 18 6M6 6l12 12`}))}var v_=_.forwardRef(__),y_=`/enso.svg`,b_=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=c(o(((e,t)=>{t.exports=b_()}))()),x_=[{id:`home`,label:``,Icon:u_},{id:`explore`,label:``,Icon:f_},{id:`saved`,label:``,Icon:g_},{id:`upload`,label:``,Icon:m_,bordered:!0}],S_=76;function C_({children:e,activeSection:t=`home`,onNavigate:n=()=>{},onToggleNotifications:r=()=>{},onToggleMessages:i=()=>{},showNotifications:a=!1,showMessages:o=!1,searchValue:s=``,onSearchChange:c=()=>{},onSearchSubmit:l=()=>{},onSearchFocus:u=()=>{},onCloseSearchSuggestions:d=()=>{},showSearchSuggestions:f=!1,searchHistory:p=[],onSuggestionClick:m=()=>{},popularKeywords:h=[],searchPlaceholder:g=``,searchEnabled:v=!0,user:y=null,authReady:b=!1,onRequestAuth:x=()=>{},onLogout:ee=()=>{},onClearSearch:te=()=>{},onHomeClick:S=()=>{}}){let ne=(0,_.useRef)(null),re=f&&v,[ie,ae]=(0,_.useState)(!1),[oe,se]=(0,_.useState)(!1),[ce,le]=(0,_.useState)(`terms`),C=e=>{m(e),ne.current?.focus()},ue=y?.displayName?.[0]||y?.email?.[0]||(y?`U`:``),de=y?.displayName||y?.email||``,w=()=>{b&&(y?ae(!0):x())},T=()=>{ae(!1)};return(0,$.jsxs)(`div`,{className:`flex min-h-screen bg-gradient-to-b from-slate-50 to-slate-100`,children:[(0,$.jsxs)(`aside`,{className:`fixed inset-y-0 left-0 z-50 flex w-16 flex-col items-center gap-6 border-r bg-white/95 py-4`,children:[(0,$.jsx)(`button`,{type:`button`,className:`flex h-11 w-11 items-center justify-center rounded-full border border-gray-200 bg-white shadow-sm`,title:`enso`,"aria-label":`enso `,onClick:()=>{T(),t===`home`?S():n(`home`)},children:(0,$.jsx)(`img`,{src:y_,alt:`enso`,className:`h-9 w-9 rounded-full object-cover`,draggable:`false`})}),x_.map(e=>{let r=e.Icon;return(0,$.jsx)(`button`,{type:`button`,className:`flex h-9 w-9 items-center justify-center rounded-full transition ${e.bordered?`border border-gray-300 hover:bg-gray-50`:`hover:bg-gray-100`} ${t===e.id?`bg-gradient-to-br from-gray-900 to-slate-900 text-white shadow-lg`:`text-gray-900 hover:text-gray-900`}`,title:e.label,onClick:()=>{if(T(),e.id===`home`){t===`home`?S():n(`home`);return}n(e.id)},children:(0,$.jsx)(r,{className:`h-6 w-6`})},e.id)}),(0,$.jsx)(`div`,{className:`mt-auto space-y-2`,children:(0,$.jsx)(`button`,{type:`button`,className:`flex h-9 w-9 items-center justify-center rounded-full hover:bg-gray-100`,title:``,onClick:()=>{le(`terms`),se(!0)},children:(0,$.jsx)(o_,{className:`h-6 w-6 text-gray-700`})})})]}),(0,$.jsxs)(`div`,{className:`ml-16 flex min-h-screen flex-1 flex-col`,children:[(0,$.jsx)(`header`,{className:`fixed left-16 right-0 top-0 z-40 h-[76px] border-b bg-white/90 backdrop-blur`,children:(0,$.jsxs)(`div`,{className:`mx-auto flex h-full w-full max-w-7xl items-center gap-4 px-6 py-3`,children:[(0,$.jsxs)(`form`,{onSubmit:l,className:`relative flex-1`,children:[(0,$.jsxs)(`div`,{className:`flex items-center rounded-full bg-gray-100 px-5 py-3 shadow-inner ${v?``:`opacity-60`}`,children:[(0,$.jsx)(f_,{className:`mr-3 h-5 w-5 text-gray-400`}),(0,$.jsx)(`input`,{ref:ne,type:`text`,placeholder:g,value:s,onChange:e=>v?c(e.target.value):null,onFocus:()=>v&&u(),className:`w-full bg-transparent text-sm outline-none placeholder:text-gray-400`,disabled:!v}),v&&s&&(0,$.jsx)(`button`,{type:`button`,onClick:()=>{te(),d(),ne.current?.focus()},className:`ml-2 rounded-full bg-transparent p-1 text-gray-500 hover:text-gray-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500`,"aria-label":``,children:(0,$.jsx)(v_,{className:`h-4 w-4`})})]}),re&&(0,$.jsxs)(`div`,{className:`absolute left-0 right-0 top-[calc(100%+12px)] z-50 max-h-[60vh] overflow-y-auto overscroll-contain rounded-xl border border-gray-200 bg-white shadow-lg`,children:[p.length>0&&(0,$.jsxs)(`div`,{className:`border-b border-gray-100 p-2`,children:[(0,$.jsx)(`p`,{className:`px-3 py-1 text-xs text-gray-500`,children:``}),p.map((e,t)=>(0,$.jsxs)(`button`,{type:`button`,onClick:()=>C(e),className:`flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm hover:bg-gray-50`,children:[(0,$.jsx)(i_,{className:`h-4 w-4 text-gray-400`}),e]},`${e}-${t}`))]}),(0,$.jsxs)(`div`,{className:`p-2`,children:[(0,$.jsx)(`p`,{className:`px-3 py-1 text-xs text-gray-500`,children:``}),(0,$.jsx)(`div`,{className:`flex flex-wrap gap-2 px-3 pb-2`,children:h.map(e=>(0,$.jsx)(`button`,{type:`button`,onClick:()=>C(e),className:`rounded-full bg-gray-100 px-3 py-1.5 text-xs transition-colors hover:bg-gray-200`,children:e},e))})]})]})]}),(0,$.jsxs)(`button`,{type:`button`,className:`relative ml-2 flex h-10 items-center gap-2 rounded-full bg-gray-900 px-3 py-1 text-sm font-semibold text-white shadow-sm transition hover:bg-gray-800 disabled:opacity-60`,title:y?``:` / `,onClick:w,disabled:!b,children:[(0,$.jsx)(`span`,{className:`flex h-8 w-8 items-center justify-center rounded-full bg-white/15 text-base font-bold uppercase`,children:y?ue:``}),(0,$.jsxs)(`div`,{className:`flex flex-col items-start leading-tight`,children:[(0,$.jsx)(`span`,{className:`text-xs text-white/70`,children:y?``:` / `}),(0,$.jsx)(`span`,{className:`text-xs font-semibold`,children:y?de:`Firebase Auth`})]})]})]})}),(0,$.jsx)(`main`,{className:`flex-1`,style:{paddingTop:`${S_}px`},children:e})]}),re&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-30`,onClick:()=>{d(),T()}}),y&&ie&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`fixed inset-0 z-40 bg-black/30`,onClick:T}),(0,$.jsxs)(`div`,{className:`fixed right-4 top-16 z-50 w-96 rounded-3xl bg-white shadow-2xl ring-1 ring-gray-200`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-4 border-b border-gray-100 px-6 py-5`,children:[(0,$.jsx)(`div`,{className:`flex h-14 w-14 items-center justify-center rounded-full bg-gray-900 text-lg font-bold text-white`,children:ue}),(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`p`,{className:`text-sm font-semibold text-gray-900`,children:de}),y?.email&&(0,$.jsx)(`p`,{className:`text-xs text-gray-500`,children:y.email})]}),(0,$.jsx)(`button`,{type:`button`,className:`rounded-full border border-gray-200 px-3 py-1 text-xs font-semibold text-gray-700 hover:bg-gray-50`,onClick:()=>{t===`home`?S():n(`home`),T()},children:``})]}),(0,$.jsxs)(`div`,{className:`space-y-3 px-6 py-4`,children:[(0,$.jsx)(`p`,{className:`text-sm font-semibold text-gray-800`,children:``}),(0,$.jsx)(`div`,{className:`rounded-2xl border border-dashed border-gray-200 bg-gray-50 px-4 py-6 text-center text-sm text-gray-600`,children:``}),(0,$.jsx)(`button`,{type:`button`,className:`w-full rounded-full bg-gray-900 px-4 py-3 text-sm font-semibold text-white hover:bg-gray-800`,onClick:()=>{T(),ee()},children:``})]})]})]}),(0,$.jsx)(E_,{open:oe,tab:ce,onClose:()=>se(!1),onTabChange:le})]})}var w_=[{title:`1`,content:[`Enso  3D URL Pinterest`,` APIThingiverse API / NASA API URL `,``],list:[` 3D `,``,` URL `,`API`,`AI`,`Google AdSense `]},{title:`2`,content:[``,`3DSTL`,`Thingiverse APINASASmithsonian `,`32 API `,``,`API`]},{title:`3`,list:[` URL `,` URL `,` URL `,``]},{title:`4AI`,content:[` OpenAI  AI API `],list:[`title_ja`,`tags_ja / tags_en`,``,`AI`]},{title:`5`,content:[``,``]},{title:`6`,list:[`Google `,`Apple `,``,``]},{title:`7`,list:[``,``,``]},{title:`8`,list:[` URL `,``,``,``,``,``,``,``]},{title:`9`,content:[` Google AdSense `,`Google `]},{title:`10`,list:[``,``,`AI`,``,``]},{title:`11`,list:[`Firebase URL`,``]},{title:`12`,content:[``,``]},{title:`13`,content:[``]}],T_=[{title:`1`,content:[``],list:[`GoogleAppleID//`,`URL`,`IPOS`,`AI API //`]},{title:`2`,list:[`/`,`/UX`,``,`Google AdSense `,``]},{title:`3`,list:[``,``,``,`GoogleOpenAIFirebase `]},{title:`4Cookie`,list:[`Cookie / Google AdSense / Google Analytics / Firebase Analytics `,``,`Cookie `]},{title:`5`,content:[`Thingiverse / Cults3D / Printables `,``,``]},{title:`6`,list:[``,``,``,`Firebase `]},{title:`7`,list:[``,``,``,``]},{title:`8`,content:[``,``]},{title:`9`,list:[`Firebase Security Rules `,`HTTPS `,``,`API`]},{title:`10`,content:[``,``]},{title:`11`,content:[` enso.corporation11@gmail.com`]}];function E_({open:e,tab:t,onClose:n,onTabChange:r}){if(!e)return null;let i=t===`privacy`?T_:w_,a=e=>`rounded-full px-4 py-2 text-sm font-semibold ${t===e?`bg-gray-900 text-white`:`bg-gray-100 text-gray-600 hover:bg-gray-50`}`;return(0,$.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/30 px-4 py-6`,children:(0,$.jsxs)(`div`,{className:`relative w-full max-w-4xl overflow-hidden rounded-3xl bg-white p-6 shadow-2xl ring-1 ring-black/10`,children:[(0,$.jsx)(`button`,{type:`button`,className:`absolute right-4 top-4 text-gray-400 transition hover:text-gray-600`,onClick:n,"aria-label":``,children:``}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`h2`,{className:`text-2xl font-semibold text-gray-900`,children:`Enso `}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`button`,{type:`button`,className:a(`terms`),onClick:()=>r(`terms`),children:``}),(0,$.jsx)(`button`,{type:`button`,className:a(`privacy`),onClick:()=>r(`privacy`),children:``})]})]}),(0,$.jsx)(`p`,{className:`mt-2 text-sm text-gray-500`,children:``}),(0,$.jsx)(`div`,{className:`mt-5 space-y-5 overflow-y-auto pr-3`,style:{maxHeight:`70vh`},children:i.map(e=>(0,$.jsxs)(`article`,{className:`space-y-3`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold text-gray-900`,children:e.title}),e.content?.map(e=>(0,$.jsx)(`p`,{className:`text-sm leading-relaxed text-gray-600`,children:e},e)),e.list&&(0,$.jsx)(`ul`,{className:`list-disc space-y-1 pl-6 text-sm text-gray-600`,children:e.list.map(e=>(0,$.jsx)(`li`,{children:e},e))})]},e.title))}),(0,$.jsx)(`p`,{className:`mt-5 text-xs text-gray-400`,children:``})]})})}function D_({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{fillRule:`evenodd`,d:`M6.32 2.577a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 0 1-1.085.67L12 18.089l-7.165 3.583A.75.75 0 0 1 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93Z`,clipRule:`evenodd`}))}var O_=_.forwardRef(D_);function k_({title:e,titleId:t,...n},r){return _.createElement(`svg`,Object.assign({xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`currentColor`,"aria-hidden":`true`,"data-slot":`icon`,ref:r,"aria-labelledby":t},n),e?_.createElement(`title`,{id:t},e):null,_.createElement(`path`,{d:`m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z`}))}var A_=_.forwardRef(k_);function j_(e,t){if(e==null)return{};var n=M_(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function M_(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function N_(){return N_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N_.apply(this,arguments)}function P_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?P_(Object(n),!0).forEach(function(t){I_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L_={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},R_=2,z_=class extends _.Component{constructor(e){super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let t;t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||R_,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener(`resize`,this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener(`resize`,this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;typeof t!=`object`&&(t={default:parseInt(t)||R_});let n=1/0,r=t.default||R_;for(let i in t){let a=parseInt(i);a>0&&e<=a&&a<n&&(n=a,r=t[i])}r=Math.max(1,parseInt(r)||1),this.state.columnCount!==r&&this.setState({columnCount:r})}itemsInColumns(){let e=this.state.columnCount,t=Array(e),n=_.Children.toArray(this.props.children);for(let r=0;r<n.length;r++){let i=r%e;t[i]||(t[i]=[]),t[i].push(n[r])}return t}renderColumns(){let{column:e,columnAttrs:t={},columnClassName:n}=this.props,r=this.itemsInColumns(),i=`${100/r.length}%`,a=n;a&&typeof a!=`string`&&(this.logDeprecated(`The property "columnClassName" requires a string`),a===void 0&&(a=`my-masonry-grid_column`));let o=F_(F_(F_({},e),t),{},{style:F_(F_({},t.style),{},{width:i}),className:a});return r.map((e,t)=>_.createElement(`div`,N_({},o,{key:t}),e))}logDeprecated(e){console.error(`[Masonry]`,e)}render(){let e=this.props,{children:t,breakpointCols:n,columnClassName:r,columnAttrs:i,column:a,className:o}=e,s=j_(e,[`children`,`breakpointCols`,`columnClassName`,`columnAttrs`,`column`,`className`]),c=o;return typeof o!=`string`&&(this.logDeprecated(`The property "className" requires a string`),o===void 0&&(c=`my-masonry-grid`)),_.createElement(`div`,N_({},s,{className:c}),this.renderColumns())}};z_.defaultProps=L_;var B_=z_;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
hn(`firebase`,`11.10.0`,`app`);var V_=null,H_=null,U_=null;function W_(){let e={apiKey:`AIzaSyA2jIsxWk0SVUbzERDfpOT2d2rAtmGLo4E`,authDomain:`enso-official-app.firebaseapp.com`,projectId:`enso-official-app`,storageBucket:`enso-official-app.firebasestorage.app`,messagingSenderId:`135852280008`,appId:`1:135852280008:web:2c68a9b3a6c35503847dfd`};return Object.values(e).every(e=>typeof e==`string`&&e.length>0)?e:null}function G_(){if(V_)return V_;let e=W_();return e?(V_=mn().length?mn()[0]:fn(e),V_):(console.warn(`Firebase config is missing. Set VITE_FIREBASE_* env vars.`),null)}function K_(){if(H_)return H_;let e=G_();return e?(H_=nd(e),H_):null}function q_(){if(U_)return U_;let e=G_();return e?(U_=Zg(e),U_.languageCode=`ja`,U_):null}var J_={INDEX_CREATION_FAILED:`index_creation_failed`,MISSING_INDEX_UID:`missing_index_uid`,INDEX_ALREADY_EXISTS:`index_already_exists`,INDEX_NOT_FOUND:`index_not_found`,INVALID_INDEX_UID:`invalid_index_uid`,INDEX_NOT_ACCESSIBLE:`index_not_accessible`,INVALID_INDEX_OFFSET:`invalid_index_offset`,INVALID_INDEX_LIMIT:`invalid_index_limit`,INVALID_STATE:`invalid_state`,PRIMARY_KEY_INFERENCE_FAILED:`primary_key_inference_failed`,INDEX_PRIMARY_KEY_ALREADY_EXISTS:`index_primary_key_already_exists`,INVALID_INDEX_PRIMARY_KEY:`invalid_index_primary_key`,DOCUMENTS_FIELDS_LIMIT_REACHED:`document_fields_limit_reached`,MISSING_DOCUMENT_ID:`missing_document_id`,INVALID_DOCUMENT_ID:`invalid_document_id`,INVALID_CONTENT_TYPE:`invalid_content_type`,MISSING_CONTENT_TYPE:`missing_content_type`,INVALID_DOCUMENT_FIELDS:`invalid_document_fields`,INVALID_DOCUMENT_LIMIT:`invalid_document_limit`,INVALID_DOCUMENT_OFFSET:`invalid_document_offset`,INVALID_DOCUMENT_FILTER:`invalid_document_filter`,MISSING_DOCUMENT_FILTER:`missing_document_filter`,INVALID_DOCUMENT_VECTORS_FIELD:`invalid_document_vectors_field`,PAYLOAD_TOO_LARGE:`payload_too_large`,MISSING_PAYLOAD:`missing_payload`,MALFORMED_PAYLOAD:`malformed_payload`,NO_SPACE_LEFT_ON_DEVICE:`no_space_left_on_device`,INVALID_STORE_FILE:`invalid_store_file`,INVALID_RANKING_RULES:`missing_document_id`,INVALID_REQUEST:`invalid_request`,INVALID_DOCUMENT_GEO_FIELD:`invalid_document_geo_field`,INVALID_SEARCH_Q:`invalid_search_q`,INVALID_SEARCH_OFFSET:`invalid_search_offset`,INVALID_SEARCH_LIMIT:`invalid_search_limit`,INVALID_SEARCH_PAGE:`invalid_search_page`,INVALID_SEARCH_HITS_PER_PAGE:`invalid_search_hits_per_page`,INVALID_SEARCH_ATTRIBUTES_TO_RETRIEVE:`invalid_search_attributes_to_retrieve`,INVALID_SEARCH_ATTRIBUTES_TO_CROP:`invalid_search_attributes_to_crop`,INVALID_SEARCH_CROP_LENGTH:`invalid_search_crop_length`,INVALID_SEARCH_ATTRIBUTES_TO_HIGHLIGHT:`invalid_search_attributes_to_highlight`,INVALID_SEARCH_SHOW_MATCHES_POSITION:`invalid_search_show_matches_position`,INVALID_SEARCH_FILTER:`invalid_search_filter`,INVALID_SEARCH_SORT:`invalid_search_sort`,INVALID_SEARCH_FACETS:`invalid_search_facets`,INVALID_SEARCH_HIGHLIGHT_PRE_TAG:`invalid_search_highlight_pre_tag`,INVALID_SEARCH_HIGHLIGHT_POST_TAG:`invalid_search_highlight_post_tag`,INVALID_SEARCH_CROP_MARKER:`invalid_search_crop_marker`,INVALID_SEARCH_MATCHING_STRATEGY:`invalid_search_matching_strategy`,INVALID_SEARCH_VECTOR:`invalid_search_vector`,INVALID_SEARCH_ATTRIBUTES_TO_SEARCH_ON:`invalid_search_attributes_to_search_on`,BAD_REQUEST:`bad_request`,DOCUMENT_NOT_FOUND:`document_not_found`,INTERNAL:`internal`,INVALID_API_KEY:`invalid_api_key`,INVALID_API_KEY_DESCRIPTION:`invalid_api_key_description`,INVALID_API_KEY_ACTIONS:`invalid_api_key_actions`,INVALID_API_KEY_INDEXES:`invalid_api_key_indexes`,INVALID_API_KEY_EXPIRES_AT:`invalid_api_key_expires_at`,API_KEY_NOT_FOUND:`api_key_not_found`,IMMUTABLE_API_KEY_UID:`immutable_api_key_uid`,IMMUTABLE_API_KEY_ACTIONS:`immutable_api_key_actions`,IMMUTABLE_API_KEY_INDEXES:`immutable_api_key_indexes`,IMMUTABLE_API_KEY_EXPIRES_AT:`immutable_api_key_expires_at`,IMMUTABLE_API_KEY_CREATED_AT:`immutable_api_key_created_at`,IMMUTABLE_API_KEY_UPDATED_AT:`immutable_api_key_updated_at`,MISSING_AUTHORIZATION_HEADER:`missing_authorization_header`,UNRETRIEVABLE_DOCUMENT:`unretrievable_document`,MAX_DATABASE_SIZE_LIMIT_REACHED:`database_size_limit_reached`,TASK_NOT_FOUND:`task_not_found`,DUMP_PROCESS_FAILED:`dump_process_failed`,DUMP_NOT_FOUND:`dump_not_found`,INVALID_SWAP_DUPLICATE_INDEX_FOUND:`invalid_swap_duplicate_index_found`,INVALID_SWAP_INDEXES:`invalid_swap_indexes`,MISSING_SWAP_INDEXES:`missing_swap_indexes`,MISSING_MASTER_KEY:`missing_master_key`,INVALID_TASK_TYPES:`invalid_task_types`,INVALID_TASK_UIDS:`invalid_task_uids`,INVALID_TASK_STATUSES:`invalid_task_statuses`,INVALID_TASK_LIMIT:`invalid_task_limit`,INVALID_TASK_FROM:`invalid_task_from`,INVALID_TASK_CANCELED_BY:`invalid_task_canceled_by`,MISSING_TASK_FILTERS:`missing_task_filters`,TOO_MANY_OPEN_FILES:`too_many_open_files`,IO_ERROR:`io_error`,INVALID_TASK_INDEX_UIDS:`invalid_task_index_uids`,IMMUTABLE_INDEX_UID:`immutable_index_uid`,IMMUTABLE_INDEX_CREATED_AT:`immutable_index_created_at`,IMMUTABLE_INDEX_UPDATED_AT:`immutable_index_updated_at`,INVALID_SETTINGS_DISPLAYED_ATTRIBUTES:`invalid_settings_displayed_attributes`,INVALID_SETTINGS_SEARCHABLE_ATTRIBUTES:`invalid_settings_searchable_attributes`,INVALID_SETTINGS_FILTERABLE_ATTRIBUTES:`invalid_settings_filterable_attributes`,INVALID_SETTINGS_SORTABLE_ATTRIBUTES:`invalid_settings_sortable_attributes`,INVALID_SETTINGS_RANKING_RULES:`invalid_settings_ranking_rules`,INVALID_SETTINGS_STOP_WORDS:`invalid_settings_stop_words`,INVALID_SETTINGS_SYNONYMS:`invalid_settings_synonyms`,INVALID_SETTINGS_DISTINCT_ATTRIBUTE:`invalid_settings_distinct_attribute`,INVALID_SETTINGS_TYPO_TOLERANCE:`invalid_settings_typo_tolerance`,INVALID_SETTINGS_FACETING:`invalid_settings_faceting`,INVALID_SETTINGS_PAGINATION:`invalid_settings_pagination`,INVALID_SETTINGS_SEARCH_CUTOFF_MS:`invalid_settings_search_cutoff_ms`,INVALID_SETTINGS_LOCALIZED_ATTRIBUTES:`invalid_settings_localized_attributes`,INVALID_TASK_BEFORE_ENQUEUED_AT:`invalid_task_before_enqueued_at`,INVALID_TASK_AFTER_ENQUEUED_AT:`invalid_task_after_enqueued_at`,INVALID_TASK_BEFORE_STARTED_AT:`invalid_task_before_started_at`,INVALID_TASK_AFTER_STARTED_AT:`invalid_task_after_started_at`,INVALID_TASK_BEFORE_FINISHED_AT:`invalid_task_before_finished_at`,INVALID_TASK_AFTER_FINISHED_AT:`invalid_task_after_finished_at`,MISSING_API_KEY_ACTIONS:`missing_api_key_actions`,MISSING_API_KEY_INDEXES:`missing_api_key_indexes`,MISSING_API_KEY_EXPIRES_AT:`missing_api_key_expires_at`,INVALID_API_KEY_LIMIT:`invalid_api_key_limit`,INVALID_API_KEY_OFFSET:`invalid_api_key_offset`,INVALID_FACET_SEARCH_FACET_NAME:`invalid_facet_search_facet_name`,MISSING_FACET_SEARCH_FACET_NAME:`missing_facet_search_facet_name`,INVALID_FACET_SEARCH_FACET_QUERY:`invalid_facet_search_facet_query`,INVALID_SEARCH_RANKING_SCORE_THRESHOLD:`invalid_search_ranking_score_threshold`,INVALID_SIMILAR_RANKING_SCORE_THRESHOLD:`invalid_similar_ranking_score_threshold`},Y_=class extends Error{name=`MeiliSearchError`},X_=class extends Y_{name=`MeiliSearchApiError`;cause;response;constructor(e,t){super(t?.message??`${e.status}: ${e.statusText}`),this.response=e,t!==void 0&&(this.cause=t)}},Z_=class extends Y_{name=`MeiliSearchRequestError`;constructor(e,t){super(`Request to ${e} has failed`,{cause:t})}},Q_=class extends Y_{name=`MeiliSearchRequestTimeOutError`;cause;constructor(e,t){super(`request timed out after ${e}ms`),this.cause={timeout:e,requestInit:t}}},$_=class extends Y_{name=`MeiliSearchTaskTimeOutError`;cause;constructor(e,t){super(`timeout of ${t}ms has exceeded on task ${e} when waiting for it to be resolved.`),this.cause={taskUid:e,timeout:t}}},ev={version:`0.54.0`};function tv(e){return e.startsWith(`https://`)||e.startsWith(`http://`)?e:`http://${e}`}function nv(e){return e.endsWith(`/`)||(e+=`/`),e}function rv(e,t){for(let[n,r]of Object.entries(t))r!=null&&e.set(n,Array.isArray(r)?r.join():r instanceof Date?r.toISOString():String(r))}function iv(e,t){let n=`X-Meilisearch-Client`,r=`Meilisearch JavaScript (v${ev.version})`,i=`Content-Type`,a=`Authorization`,o=new Headers(t);if(e.apiKey&&!o.has(a)&&o.set(a,`Bearer ${e.apiKey}`),o.has(i)||o.set(i,`application/json`),e.clientAgents!==void 0){let t=e.clientAgents.concat(r);o.set(n,t.join(` ; `))}else o.set(n,r);return o}var av=Symbol(`<timeout>`);function ov(e,t){let{signal:n}=e,r=new AbortController;if(n!=null){let e=null;if(n.aborted)r.abort(n.reason);else{let t=()=>r.abort(n.reason);n.addEventListener(`abort`,t,{once:!0}),e=()=>n.removeEventListener(`abort`,t),r.signal.addEventListener(`abort`,e,{once:!0})}return()=>{if(n.aborted)return;let i=setTimeout(()=>r.abort(av),t),a=()=>{clearTimeout(i),e!==null&&r.signal.removeEventListener(`abort`,e)};return n.addEventListener(`abort`,a,{once:!0}),()=>{n.removeEventListener(`abort`,a),a()}}}return e.signal=r.signal,()=>{let e=setTimeout(()=>r.abort(av),t);return()=>clearTimeout(e)}}var sv=class{#url;#requestInit;#customRequestFn;#requestTimeout;constructor(e){let t=nv(tv(e.host));try{this.#url=new URL(t)}catch(e){throw new Y_(`The provided host is not valid`,{cause:e})}this.#requestInit={...e.requestInit,headers:iv(e,e.requestInit?.headers)},this.#customRequestFn=e.httpClient,this.#requestTimeout=e.timeout}#getHeaders(e,t){if(e===void 0&&t===void 0)return this.#requestInit.headers;let n=new Headers(e);t!==void 0&&!n.has(`Content-Type`)&&n.set(`Content-Type`,t);for(let[e,t]of this.#requestInit.headers)n.has(e)||n.set(e,t);return n}#prepareRequest({path:e,method:t,params:n,contentType:r,body:i,extraRequestInit:a}){let o=new URL(e,this.#url);n!==void 0&&rv(o.searchParams,n);let s={method:t,body:r===void 0||typeof i!=`string`?JSON.stringify(i):i,...a,...this.#requestInit,headers:this.#getHeaders(a?.headers,r)};return{url:o,init:s}}async#request(e){let{url:t,init:n}=this.#prepareRequest(e),r=(this.#requestTimeout===void 0?null:ov(n,this.#requestTimeout))?.(),i,a;try{if(this.#customRequestFn!==void 0)return await this.#customRequestFn(t,n);i=await fetch(t,n),a=await i.text()}catch(e){throw new Z_(t.toString(),Object.is(e,av)?new Q_(this.#requestTimeout,n):e)}finally{r?.()}let o=a===``?void 0:JSON.parse(a);if(!i.ok)throw new X_(i,o);return o}get(e){return this.#request(e)}post(e){return this.#request({...e,method:`POST`})}put(e){return this.#request({...e,method:`PUT`})}patch(e){return this.#request({...e,method:`PATCH`})}delete(e){return this.#request({...e,method:`DELETE`})}postStream(e){return this.#requestStream({...e,method:`POST`})}async#requestStream(e){let{url:t,init:n}=this.#prepareRequest(e),r=(this.#requestTimeout===void 0?null:ov(n,this.#requestTimeout))?.(),i;try{if(this.#customRequestFn!==void 0){let e=await this.#customRequestFn(t,n);if(!(e instanceof ReadableStream))throw new Y_(`Custom HTTP client must return a ReadableStream for streaming requests`);return e}i=await fetch(t,n)}catch(e){throw new Z_(t.toString(),Object.is(e,av)?new Q_(this.#requestTimeout,n):e)}finally{r?.()}if(!i.ok){let e=await i.text(),t=e===``?void 0:JSON.parse(e);throw new X_(i,t)}if(!i.body)throw new Y_(`Response body is null - server did not return a readable stream`);return i.body}},cv=Symbol(`<task timeout>`);function lv(e){return function(t){return Object.defineProperty(t,`waitTask`,{async value(n){return await e.waitForTask(await t,n)}})}}var uv=e=>typeof e==`number`?e:e.taskUid,dv=class{#httpRequest;#defaultTimeout;#defaultInterval;#applyWaitTask;constructor(e,t){this.#httpRequest=e,this.#defaultTimeout=t?.timeout??5e3,this.#defaultInterval=t?.interval??50,this.#applyWaitTask=lv(this)}async getTask(e,t){return await this.#httpRequest.get({path:`tasks/${e}`,extraRequestInit:t})}async getTasks(e){return await this.#httpRequest.get({path:`tasks`,params:e})}async waitForTask(e,t){let n=uv(e),r=t?.timeout??this.#defaultTimeout,i=t?.interval??this.#defaultInterval,a=r>0?new AbortController:null,o=a===null?void 0:setTimeout(()=>void a.abort(cv),r);try{for(;;){let e=await this.getTask(n,{signal:a?.signal});if(e.status!==`enqueued`&&e.status!==`processing`)return clearTimeout(o),e;i>0&&await new Promise(e=>setTimeout(e,i))}}catch(e){throw Object.is(e.cause,cv)?new $_(n,r):e}}async*waitForTasksIter(e,t){for await(let n of e)yield await this.waitForTask(n,t)}async waitForTasks(...e){let t=[];for await(let n of this.waitForTasksIter(...e))t.push(n);return t}cancelTasks(e){return this.#applyWaitTask(this.#httpRequest.post({path:`tasks/cancel`,params:e}))}deleteTasks(e){return this.#applyWaitTask(this.#httpRequest.delete({path:`tasks`,params:e}))}};function fv(e,t){let n=lv(t);return{post:(...t)=>n(e.post(...t)),put:(...t)=>n(e.put(...t)),patch:(...t)=>n(e.patch(...t)),delete:(...t)=>n(e.delete(...t))}}var pv=class{uid;primaryKey;createdAt;updatedAt;httpRequest;tasks;#httpRequestsWithTask;constructor(e,t,n){this.uid=t,this.primaryKey=n,this.httpRequest=new sv(e),this.tasks=new dv(this.httpRequest,e.defaultWaitOptions),this.#httpRequestsWithTask=fv(this.httpRequest,this.tasks)}async search(e,t,n){return await this.httpRequest.post({path:`indexes/${this.uid}/search`,body:{q:e,...t},extraRequestInit:n})}async searchGet(e,t,n){let r=e=>{if(typeof e==`string`)return e;if(Array.isArray(e))throw new Y_(`The filter query parameter should be in string format when using searchGet`)},i={q:e,...t,filter:r(t?.filter),sort:t?.sort?.join(`,`),facets:t?.facets?.join(`,`),attributesToRetrieve:t?.attributesToRetrieve?.join(`,`),attributesToCrop:t?.attributesToCrop?.join(`,`),attributesToHighlight:t?.attributesToHighlight?.join(`,`),vector:t?.vector?.join(`,`),attributesToSearchOn:t?.attributesToSearchOn?.join(`,`)};return await this.httpRequest.get({path:`indexes/${this.uid}/search`,params:i,extraRequestInit:n})}async searchForFacetValues(e,t){return await this.httpRequest.post({path:`indexes/${this.uid}/facet-search`,body:e,extraRequestInit:t})}async searchSimilarDocuments(e){return await this.httpRequest.post({path:`indexes/${this.uid}/similar`,body:e})}async getRawInfo(){let e=await this.httpRequest.get({path:`indexes/${this.uid}`});return this.primaryKey=e.primaryKey,this.updatedAt=new Date(e.updatedAt),this.createdAt=new Date(e.createdAt),e}async fetchInfo(){return await this.getRawInfo(),this}async fetchPrimaryKey(){return this.primaryKey=(await this.getRawInfo()).primaryKey,this.primaryKey}static create(e,t={},n){let r=new sv(n);return fv(r,new dv(r)).post({path:`indexes`,body:{...t,uid:e}})}update(e){return this.#httpRequestsWithTask.patch({path:`indexes/${this.uid}`,body:e})}delete(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}`})}async getStats(){return await this.httpRequest.get({path:`indexes/${this.uid}/stats`})}async getDocuments(e){let t=`indexes/${this.uid}/documents`;return e?.filter===void 0?await this.httpRequest.get({path:t,params:e}):await this.httpRequest.post({path:`${t}/fetch`,body:e})}async getDocument(e,t){let n=Array.isArray(t?.fields)?t.fields.join():void 0;return await this.httpRequest.get({path:`indexes/${this.uid}/documents/${e}`,params:{...t,fields:n}})}addDocuments(e,t){return this.#httpRequestsWithTask.post({path:`indexes/${this.uid}/documents`,params:t,body:e})}addDocumentsFromString(e,t,n){return this.#httpRequestsWithTask.post({path:`indexes/${this.uid}/documents`,body:e,params:n,contentType:t})}addDocumentsInBatches(e,t=1e3,n){let r=[];for(let i=0;i<e.length;i+=t)r.push(this.addDocuments(e.slice(i,i+t),n));return r}updateDocuments(e,t){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/documents`,params:t,body:e})}updateDocumentsInBatches(e,t=1e3,n){let r=[];for(let i=0;i<e.length;i+=t)r.push(this.updateDocuments(e.slice(i,i+t),n));return r}updateDocumentsFromString(e,t,n){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/documents`,body:e,params:n,contentType:t})}deleteDocument(e){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/documents/${e}`})}deleteDocuments(e){let t=!Array.isArray(e)&&typeof e==`object`?`documents/delete`:`documents/delete-batch`;return this.#httpRequestsWithTask.post({path:`indexes/${this.uid}/${t}`,body:e})}deleteAllDocuments(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/documents`})}updateDocumentsByFunction(e){return this.#httpRequestsWithTask.post({path:`indexes/${this.uid}/documents/edit`,body:e})}async getSettings(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings`})}updateSettings(e){return this.#httpRequestsWithTask.patch({path:`indexes/${this.uid}/settings`,body:e})}resetSettings(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings`})}async getPagination(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/pagination`})}updatePagination(e){return this.#httpRequestsWithTask.patch({path:`indexes/${this.uid}/settings/pagination`,body:e})}resetPagination(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/pagination`})}async getSynonyms(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/synonyms`})}updateSynonyms(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/synonyms`,body:e})}resetSynonyms(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/synonyms`})}async getStopWords(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/stop-words`})}updateStopWords(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/stop-words`,body:e})}resetStopWords(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/stop-words`})}async getRankingRules(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/ranking-rules`})}updateRankingRules(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/ranking-rules`,body:e})}resetRankingRules(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/ranking-rules`})}async getDistinctAttribute(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/distinct-attribute`})}updateDistinctAttribute(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/distinct-attribute`,body:e})}resetDistinctAttribute(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/distinct-attribute`})}async getFilterableAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/filterable-attributes`})}updateFilterableAttributes(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/filterable-attributes`,body:e})}resetFilterableAttributes(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/filterable-attributes`})}async getSortableAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/sortable-attributes`})}updateSortableAttributes(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/sortable-attributes`,body:e})}resetSortableAttributes(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/sortable-attributes`})}async getSearchableAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/searchable-attributes`})}updateSearchableAttributes(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/searchable-attributes`,body:e})}resetSearchableAttributes(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/searchable-attributes`})}async getDisplayedAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/displayed-attributes`})}updateDisplayedAttributes(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/displayed-attributes`,body:e})}resetDisplayedAttributes(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/displayed-attributes`})}async getTypoTolerance(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/typo-tolerance`})}updateTypoTolerance(e){return this.#httpRequestsWithTask.patch({path:`indexes/${this.uid}/settings/typo-tolerance`,body:e})}resetTypoTolerance(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/typo-tolerance`})}async getFaceting(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/faceting`})}updateFaceting(e){return this.#httpRequestsWithTask.patch({path:`indexes/${this.uid}/settings/faceting`,body:e})}resetFaceting(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/faceting`})}async getSeparatorTokens(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/separator-tokens`})}updateSeparatorTokens(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/separator-tokens`,body:e})}resetSeparatorTokens(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/separator-tokens`})}async getNonSeparatorTokens(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/non-separator-tokens`})}updateNonSeparatorTokens(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/non-separator-tokens`,body:e})}resetNonSeparatorTokens(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/non-separator-tokens`})}async getDictionary(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/dictionary`})}updateDictionary(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/dictionary`,body:e})}resetDictionary(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/dictionary`})}async getProximityPrecision(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/proximity-precision`})}updateProximityPrecision(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/proximity-precision`,body:e})}resetProximityPrecision(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/proximity-precision`})}async getEmbedders(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/embedders`})}updateEmbedders(e){return this.#httpRequestsWithTask.patch({path:`indexes/${this.uid}/settings/embedders`,body:e})}resetEmbedders(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/embedders`})}async getSearchCutoffMs(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/search-cutoff-ms`})}updateSearchCutoffMs(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/search-cutoff-ms`,body:e})}resetSearchCutoffMs(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/search-cutoff-ms`})}async getLocalizedAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/localized-attributes`})}updateLocalizedAttributes(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/localized-attributes`,body:e})}resetLocalizedAttributes(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/localized-attributes`})}async getFacetSearch(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/facet-search`})}updateFacetSearch(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/facet-search`,body:e})}resetFacetSearch(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/facet-search`})}async getPrefixSearch(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/prefix-search`})}updatePrefixSearch(e){return this.#httpRequestsWithTask.put({path:`indexes/${this.uid}/settings/prefix-search`,body:e})}resetPrefixSearch(){return this.#httpRequestsWithTask.delete({path:`indexes/${this.uid}/settings/prefix-search`})}async getChat(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/chat`})}updateChat(e){return this.#httpRequestsWithTask.patch({path:`indexes/${this.uid}/settings/chat`,body:e})}},mv=class{#httpRequest;constructor(e){this.#httpRequest=e}async getBatch(e){return await this.#httpRequest.get({path:`batches/${e}`})}async getBatches(e){return await this.#httpRequest.get({path:`batches`,params:e})}},hv=class{#httpRequest;#workspace;constructor(e,t){this.#httpRequest=e,this.#workspace=t}async get(){return await this.#httpRequest.get({path:`chats/${this.#workspace}/settings`})}async update(e){return await this.#httpRequest.patch({path:`chats/${this.#workspace}/settings`,body:e})}async reset(){await this.#httpRequest.delete({path:`chats/${this.#workspace}/settings`})}async streamCompletion(e){if(!e.stream)throw Error(`The SDK only supports streaming`);return await this.#httpRequest.postStream({path:`chats/${this.#workspace}/chat/completions`,body:e})}},gv=class{config;httpRequest;#taskClient;get tasks(){return this.#taskClient}#batchClient;get batches(){return this.#batchClient}#httpRequestsWithTask;constructor(e){this.config=e,this.httpRequest=new sv(e),this.#taskClient=new dv(this.httpRequest,e.defaultWaitOptions),this.#batchClient=new mv(this.httpRequest),this.#httpRequestsWithTask=fv(this.httpRequest,this.tasks)}index(e){return new pv(this.config,e)}async getIndex(e){return new pv(this.config,e).fetchInfo()}async getRawIndex(e){return new pv(this.config,e).getRawInfo()}async getIndexes(e){let t=await this.getRawIndexes(e),n=t.results.map(e=>new pv(this.config,e.uid,e.primaryKey));return{...t,results:n}}async getRawIndexes(e){return await this.httpRequest.get({path:`indexes`,params:e})}createIndex(e,t){return pv.create(e,t,this.config)}updateIndex(e,t){return new pv(this.config,e).update(t)}deleteIndex(e){return new pv(this.config,e).delete()}async deleteIndexIfExists(e){try{return await this.deleteIndex(e),!0}catch(e){if(e?.cause?.code===J_.INDEX_NOT_FOUND)return!1;throw e}}swapIndexes(e){return this.#httpRequestsWithTask.post({path:`swap-indexes`,body:e})}async multiSearch(e,t){return await this.httpRequest.post({path:`multi-search`,body:e,extraRequestInit:t})}chat(e){return new hv(this.httpRequest,e)}async getChatWorkspaces(){return await this.httpRequest.get({path:`chats`})}async getWebhooks(){return await this.httpRequest.get({path:`webhooks`})}async getWebhook(e){return await this.httpRequest.get({path:`webhooks/${e}`})}async createWebhook(e){return await this.httpRequest.post({path:`webhooks`,body:e})}async updateWebhook(e,t){return await this.httpRequest.patch({path:`webhooks/${e}`,body:t})}async deleteWebhook(e){await this.httpRequest.delete({path:`webhooks/${e}`})}async getNetwork(){return await this.httpRequest.get({path:`network`})}async updateNetwork(e){return await this.httpRequest.patch({path:`network`,body:e})}async getKeys(e){let t=await this.httpRequest.get({path:`keys`,params:e});return t.results=t.results.map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)})),t}async getKey(e){return await this.httpRequest.get({path:`keys/${e}`})}async createKey(e){return await this.httpRequest.post({path:`keys`,body:e})}async updateKey(e,t){return await this.httpRequest.patch({path:`keys/${e}`,body:t})}async deleteKey(e){await this.httpRequest.delete({path:`keys/${e}`})}async health(){return await this.httpRequest.get({path:`health`})}async isHealthy(){try{let{status:e}=await this.health();return e===`available`}catch{return!1}}async getStats(){return await this.httpRequest.get({path:`stats`})}async getVersion(){return await this.httpRequest.get({path:`version`})}createDump(){return this.#httpRequestsWithTask.post({path:`dumps`})}createSnapshot(){return this.#httpRequestsWithTask.post({path:`snapshots`})}async getExperimentalFeatures(){return await this.httpRequest.get({path:`experimental-features`})}async updateExperimentalFeatures(e){return await this.httpRequest.patch({path:`experimental-features`,body:e})}},_v=`http://127.0.0.1:7700`,vv=``,yv=`enso-models`,bv=!!yv,xv=bv?new gv({host:_v,apiKey:vv}):null;const Sv=()=>bv;async function Cv(e,t={}){return!bv||!xv||!e.trim()?{hits:[]}:xv.index(yv).search(e,{limit:200,attributesToRetrieve:[`*`],...t})}function wv(e){if(Array.isArray(e))return Array.from(new Set(e.map(e=>typeof e==`string`?e.trim():``).map(e=>e.replace(/^#+/,``)).filter(Boolean)));if(typeof e!=`string`)return[];let t=e.match(/#[^\s#,\n]+/g);return t&&t.length>0?Array.from(new Set(t.map(e=>e.trim().replace(/^#+/,``)).filter(Boolean))):Array.from(new Set(e.replace(/[,\uFF0C\n]+/g,` `).split(/\s+/g).map(e=>e.trim().replace(/^#+/,``)).filter(Boolean)))}var Tv={},Ev={},Dv=Tv[`./data/cults_creations_preview.json`]?.default??[],Ov=null,kv=async()=>{if(Ov)return Ov;let e=Ev[`./data/cults_creations.json`];return e?(Ov=e().then(e=>e?.default??null).catch(e=>(console.error(`Failed to load bundled cults dataset:`,e),null)),Ov):(Ov=Promise.resolve(null),Ov)},Av=1,jv=50,Mv=24,Nv=24,Pv=Nv*3,Fv=3,Iv=1200,Lv=1e3,Rv=70,zv=60,Bv=`https://placehold.co/600x800?text=No+Image`,Vv=`https://placehold.co/800x800?text=No+Image`,Hv=[{id:`cat-animals`,label:``,accent:`from-blue-50 to-blue-100`},{id:`cat-art`,label:``,accent:`from-pink-50 to-pink-100`},{id:`cat-design`,label:``,accent:`from-purple-50 to-purple-100`},{id:`cat-diy`,label:`DIY / `,accent:`from-amber-50 to-amber-100`},{id:`cat-food`,label:``,accent:`from-orange-50 to-orange-100`},{id:`cat-interior`,label:``,accent:`from-lime-50 to-lime-100`},{id:`cat-fashion`,label:``,accent:`from-rose-50 to-rose-100`},{id:`cat-travel`,label:``,accent:`from-cyan-50 to-cyan-100`}],Uv=[`#print-in-place`,`#miniature`,`#lighting`,`#figure`,`#organizer`,`#gadget`,`#robotics`],Wv=e=>e?.id||e?.source_url||e?.image_url||null,Gv=e=>Array.isArray(e)?e:[],Kv=e=>{let t=Array.from(new Set([...Gv(e?.tags_ja),...Gv(e?.tags_en)]));return{id:e?.id??null,title:e?.title_ja||e?.title||e?.name||`Untitled`,titleEn:e?.title_en||e?.title||e?.name||``,tags:Array.from(new Set([...t,...wv(e?.tags)])),source:e?.site||e?.source||`Unknown`,image_url:e?.image_url||e?.thumbnail||e?.preview||Bv,source_url:e?.source_url||e?.url||null,isCustom:!!e?.isCustom}},qv=e=>{let t=[...e];for(let e=t.length-1;e>0;--e){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},Jv=e=>{let t=e?.source_url||e?.image_url||e?.id;return t?encodeURIComponent(t):null},Yv=[`3 / 4`,`3 / 5`,`4 / 6`,`4 / 7`,`2 / 3`],Xv=15,Zv=new Map,Qv=[`Maker World`,`Thingiverse`,`Printables`,`Thangs`,`Cults3D`,`MyMiniFactory`],$v=`__custom__`,ey=``,ty=e=>{if(!e)return Yv[0];if(Zv.has(e))return Zv.get(e);let t=0;for(let n=0;n<e.length;n+=1)t=t*31+e.charCodeAt(n)>>>0;let n=Yv[t%Yv.length];return Zv.set(e,n),n},ny=(e,t)=>{if(!e||e.length===0)return null;let n=t.split(``).reduce((e,t)=>e*31+t.charCodeAt(0)>>>0,0);return e[n%e.length]};function ry({item:e,onExpand:t,onSave:n,onLike:r,isSaved:i=!1,isLiked:a=!1,likeCount:o=0}){let{id:s,title:c,source:l,image_url:u}=e,[d,f]=(0,_.useState)(!1),[p,m]=(0,_.useState)(u||Bv),h=(0,_.useMemo)(()=>ty(s),[s]);return(0,$.jsxs)(`div`,{onClick:t,className:`group relative overflow-hidden rounded-2xl bg-white shadow-sm transition-shadow duration-300 hover:shadow-xl cursor-pointer`,children:[(0,$.jsxs)(`div`,{className:`relative w-full`,style:{aspectRatio:h},children:[(0,$.jsx)(`img`,{src:p,alt:c,className:`absolute inset-0 h-full w-full rounded-2xl object-cover transition-opacity duration-300 ${d?`opacity-100`:`opacity-0`}`,loading:`lazy`,referrerPolicy:`no-referrer`,onLoad:()=>f(!0),onError:()=>{p===Bv?f(!0):m(Bv)}}),!d&&(0,$.jsx)(`div`,{className:`absolute inset-0 rounded-2xl bg-gray-100 animate-pulse`}),(0,$.jsxs)(`div`,{className:`pointer-events-none absolute inset-0 z-10 flex flex-col justify-between bg-gradient-to-t from-black/60 via-black/10 to-transparent opacity-0 transition-opacity duration-200 group-hover:opacity-100`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between gap-2 p-2`,children:[(0,$.jsxs)(`button`,{type:`button`,className:`pointer-events-auto flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold shadow transition ${a?`bg-white text-red-500`:`bg-white/90 text-gray-700 hover:bg-white`}`,onClick:t=>{t.stopPropagation(),r?.(e)},"aria-label":``,children:[a?(0,$.jsx)(A_,{className:`h-4 w-4`}):(0,$.jsx)(c_,{className:`h-4 w-4`}),(0,$.jsx)(`span`,{className:`text-[11px]`,children:typeof o==`number`?o:0})]}),(0,$.jsx)(`button`,{type:`button`,className:`pointer-events-auto rounded-full px-3 py-1 text-xs font-semibold shadow-md transition ${i?`bg-gray-200 text-gray-700`:`bg-white/90 text-gray-700 hover:bg-white`}`,onClick:t=>{t.stopPropagation(),n?.(e)},"aria-label":``,children:i?(0,$.jsx)(O_,{className:`h-4 w-4`}):(0,$.jsx)(n_,{className:`h-4 w-4`})})]}),(0,$.jsxs)(`div`,{className:`flex items-end justify-between gap-3 p-3`,children:[(0,$.jsxs)(`div`,{className:`max-w-[70%] text-left text-white`,children:[(0,$.jsx)(`p`,{className:`text-sm font-semibold leading-snug line-clamp-2`,children:c}),(0,$.jsx)(`p`,{className:`text-xs text-white/80`,children:l})]}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`button`,{type:`button`,className:`pointer-events-auto flex h-8 w-8 items-center justify-center rounded-full bg-white/90 text-xs shadow hover:bg-white`,onClick:e=>{e.stopPropagation(),window.alert(``)},children:``}),(0,$.jsx)(`button`,{type:`button`,className:`pointer-events-auto flex h-8 w-8 items-center justify-center rounded-full bg-white/90 text-xs shadow hover:bg-white`,onClick:e=>{e.stopPropagation(),window.alert(``)},children:``})]})]})]})]}),(0,$.jsx)(`div`,{className:`h-0`})]})}function iy({index:e}){let t=Yv[e%Yv.length];return(0,$.jsxs)(`div`,{className:`overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm`,style:{contain:`content`},children:[(0,$.jsxs)(`div`,{className:`relative w-full bg-gray-100`,style:{aspectRatio:t},children:[(0,$.jsx)(`div`,{className:`absolute inset-0 animate-pulse bg-gradient-to-br from-gray-100 via-gray-200 to-gray-100`}),(0,$.jsx)(`div`,{className:`absolute left-3 top-3 h-8 w-16 rounded-full bg-white/80 shadow-sm`}),(0,$.jsx)(`div`,{className:`absolute right-3 top-3 h-8 w-8 rounded-full bg-white/80 shadow-sm`})]}),(0,$.jsxs)(`div`,{className:`space-y-2 p-4`,children:[(0,$.jsx)(`div`,{className:`h-3 w-3/4 rounded bg-gray-100`}),(0,$.jsx)(`div`,{className:`h-3 w-1/2 rounded bg-gray-100`})]})]})}function ay({activeTab:e=`home`,savedItems:t=[],savedItemsLoaded:n=!1,onSaveItem:r=()=>{},likedDocIds:i=new Set,onLikeItem:a=()=>{},getLikeCountForItem:o=()=>0,customItems:s=[],onAddCustomItem:c=()=>{},query:l=``,homeClearToken:u=0,user:d=null}){let[f,p]=(0,_.useState)(null);(0,_.useEffect)(()=>{let e=!0,t=async()=>{if(!e)return;let t=await kv();if(t){p(t);return}p([])};return(async()=>{let n=K_();if(!n){console.info(`Firebase config missing; falling back to local cults data.`),await t();return}try{let r=await Hd(Yu(n,`cults_creations`));if(!e)return;if(!r.size){console.info(`Firestore cults_creations collection is empty; using the bundled dataset.`),await t();return}let i=r.docs.map(e=>e.data());p(i)}catch(n){console.error(`Failed to load cults data from Firestore:`,n),e&&await t()}})(),()=>{e=!1}},[]);let m=(0,_.useMemo)(()=>Dv.map((e,t)=>{let n=Kv(e),r=n.id||n.source_url||n.image_url||`preview-${t}`;return{...n,id:r}}),[]),[h,g]=(0,_.useState)(null),[v,y]=(0,_.useState)([]),[b,x]=(0,_.useState)(()=>m),ee=(0,_.useRef)(0),te=(0,_.useRef)(0),[S,ne]=(0,_.useState)([]),re=(0,_.useRef)([]),[ie,ae]=(0,_.useState)(m.length===0),[oe,se]=(0,_.useState)(!1),[ce,le]=(0,_.useState)(!1),[C,ue]=(0,_.useState)(!0),[de,w]=(0,_.useState)(null),T=(0,_.useRef)(!1);ee.current=b.length;let[fe,pe]=(0,_.useState)(Xv),me=(0,_.useRef)(new Set),he=(0,_.useRef)(0),ge=(0,_.useRef)(!1),E=f?`full`:`preview`,_e=(0,_.useRef)(``),ve=(0,_.useRef)(null),[ye,be]=(0,_.useState)(null),[xe,Se]=(0,_.useState)(!1),[Ce,we]=(0,_.useState)(``),[Te,Ee]=(0,_.useState)(!1),De=Sv(),Oe=(0,_.useRef)(!0),ke=(0,_.useRef)(null),Ae=(0,_.useRef)(null),je=(0,_.useRef)(!1),Me=(0,_.useRef)(!1),Ne=(0,_.useRef)(0),Pe=(0,_.useRef)(null),Fe=(0,_.useRef)(!1);(0,_.useEffect)(()=>{let e=me.current;m.forEach(t=>{let n=Wv(t);n&&e.add(n)})},[m]);let[Ie,D]=(0,_.useState)(Rv),[Le,Re]=(0,_.useState)(!1),ze=(0,_.useRef)(null),[Be,Ve]=(0,_.useState)(``),He=(0,_.useRef)(t.length),Ue=(0,_.useRef)(!1),We=(e,t)=>!e||!t?!1:!!(e.id&&t.id&&e.id===t.id||e.source_url&&t.source_url&&e.source_url===t.source_url),Ge=e=>t.some(t=>We(t,e)),Ke=e=>{let t=Jv(e);return t?i.has(t):!1},[qe,Je]=(0,_.useState)({title:``,sourceChoice:$v,sourceCustom:ey,image_url:``,source_url:``,description:``,tags:[]}),[O,Ye]=(0,_.useState)(``),Xe=(0,_.useRef)(!1),[Ze,Qe]=(0,_.useState)(``),[$e,et]=(0,_.useState)(``),[tt,nt]=(0,_.useState)(!1),[rt,it]=(0,_.useState)(!1),[at,ot]=(0,_.useState)(``),st=(0,_.useMemo)(()=>new Date().toISOString().slice(0,10),[]),ct=(0,_.useRef)(null),lt=(0,_.useRef)(null),ut=(0,_.useRef)(0),dt=(0,_.useRef)(!1),ft=(0,_.useRef)(null),pt=(0,_.useRef)(null),mt=e=>e?typeof window<`u`&&window.CSS&&window.CSS.escape?window.CSS.escape(e):e.replace(/["\\]/g,`\\$&`):``,ht=({cardId:e,scrollY:t})=>{if(typeof window>`u`||typeof document>`u`)return!1;if(e){let t=mt(e),n=document.querySelector(`[data-card-id="${t}"]`);if(n)return n.scrollIntoView({block:`center`}),!0}return typeof t==`number`?(window.scrollTo({top:t}),!0):!1},k=(0,_.useMemo)(()=>{let e=f??Dv,t=[...Gv(s),...Gv(e)].map(Kv),n=Array.from({length:Av}).flatMap((e,n)=>t.map((e,t)=>{let r=e.id||e.source_url||e.image_url||`${e.source||`item`}-${e.title||t}-${t}`;return{...e,id:`${r}--${n}`}}));return qv(n)},[s,f]);(0,_.useEffect)(()=>{if(!l.trim()){be(null),we(``),Ee(!1),Se(!1);return}if(!De){be(null),we(``),Ee(!1),Se(!1);return}let e=!1;return Se(!0),we(``),Cv(l,{limit:200}).then(({hits:t})=>{e||(be(t.map(e=>Kv(e))),Ee(!0))}).catch(t=>{e||(we(t?.message||`Meilisearch `),be(null),Ee(!0))}).finally(()=>{e||Se(!1)}),()=>{e=!0}},[l,De]),(0,_.useEffect)(()=>{pe(Xv)},[l]);let gt=(0,_.useCallback)(e=>{ne(t=>{let n=typeof e==`function`?e(t):e;return re.current=n,n})},[]),_t=(0,_.useCallback)(e=>{gt(t=>[...t,e])},[gt]),vt=(0,_.useCallback)(()=>{let e=()=>{if(Oe.current=!0,ke.current=null,je.current&&Ne.current<Fv&&re.current.length>=Nv){(Ae.current??yt)?.();return}je.current=!1,Ne.current=0,Me.current=!0};ke.current&&typeof window<`u`&&window.clearTimeout(ke.current),typeof window<`u`?ke.current=window.setTimeout(e,Iv):e()},[]),yt=(0,_.useCallback)(()=>{if(!Oe.current)return!1;let e=re.current;if(!e.length)return!1;if(je.current&&Ne.current>=Fv)return je.current=!1,Ne.current=0,Me.current=!0,!1;let t=C?Nv:1;if(e.length<t)return je.current&&(je.current=!1,Ne.current=0,Me.current=!0),!1;let n=Math.min(Nv,e.length),r=e.slice(0,n);return gt(e.slice(n)),x(e=>T.current?(T.current=!1,typeof window<`u`&&window.scrollTo({top:0}),r):[...e,...r]),ie&&ae(!1),je.current&&(Ne.current+=1),Oe.current=!1,vt(),!0},[C,ie,vt,gt]);(0,_.useEffect)(()=>(Ae.current=yt,()=>{Ae.current=null}),[yt]),(0,_.useEffect)(()=>()=>{ke.current&&typeof window<`u`&&window.clearTimeout(ke.current)},[]);let bt=(0,_.useCallback)(()=>{je.current||Me.current||Oe.current&&(re.current.length<Mv||(je.current=!0,Ne.current=0,yt()))},[yt]);(0,_.useEffect)(()=>{if(S.length<Mv){Me.current=!1;return}bt()},[S.length,bt]),(0,_.useEffect)(()=>{!C&&S.length>0&&yt()},[C,S.length,yt]);let xt=(0,_.useCallback)(()=>{if(ge.current||!k.length)return;let e=Pv-re.current.length;if(!(e<=0)){w(null),ge.current=!0;try{let t=[],n=he.current,r=me.current,i=Math.min(jv,e);for(;n<k.length&&t.length<i;){let e=k[n];n+=1;let i=Wv(e);!i||r.has(i)||(r.add(i),t.push(e))}if(he.current=n,!t.length){ge.current=!1;return}let a=0,o=()=>{a+=1,a===t.length&&(ge.current=!1,re.current.length<Mv&&he.current<k.length&&xt())};t.forEach(e=>{let t=e?.image_url;if(!t){o();return}let n=new Image;n.onload=()=>{_t(e),o()},n.onerror=()=>{o()},n.src=t})}catch(e){console.error(`Failed to prefetch items`,e),w(``),ge.current=!1}}},[k,_t]);(0,_.useEffect)(()=>{if(!(_e.current!==E||ve.current!==k))return;_e.current=E,ve.current=k;let e=new Set;b.forEach(t=>{let n=Wv(t);n&&e.add(n)}),me.current=e,re.current=[],ne([]),he.current=0,ge.current=!1,ae(b.length===0),w(null),xt()},[k,E,xt,b]),(0,_.useEffect)(()=>{yt()},[S.length,C,yt]),(0,_.useEffect)(()=>{!C||S.length>=Mv||xt()},[C,S.length,xt]),(0,_.useEffect)(()=>{if(typeof window>`u`)return;let e=()=>{Pe.current&&window.clearTimeout(Pe.current),Pe.current=window.setTimeout(()=>{Fe.current=!1,C&&re.current.length<Pv&&xt(),re.current.length>=Mv&&bt()},Lv)},t=()=>{Fe.current=!0,je.current=!1,Ne.current=0,Me.current=!1,e()};return window.addEventListener(`scroll`,t,{passive:!0}),e(),()=>{window.removeEventListener(`scroll`,t),Pe.current&&=(window.clearTimeout(Pe.current),null)}},[C,xt,bt]),(0,_.useEffect)(()=>{if(!k.length){ue(!1);return}let e=he.current>=k.length,t=S.length>0;ue(!(e&&!t))},[k.length,S.length]),(0,_.useEffect)(()=>{se(C&&S.length<Mv)},[C,S.length]);let St=(0,_.useCallback)(()=>{oe||(w(null),te.current=ee.current,le(!0),xt())},[oe,xt]);(0,_.useEffect)(()=>{let t=ct.current;if(e!==`home`||!t||!C)return;let n=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)&&(!T.current&&!ie&&!l.trim()&&(T.current=!0),te.current=ee.current,le(!0),xt())},{rootMargin:`400px 0px 400px 0px`,threshold:0});return n.observe(t),()=>{n.disconnect()}},[e,C,xt,ie,l]),(0,_.useEffect)(()=>{if(ce){if(e!==`home`||l.trim()){le(!1);return}if(de||!C){le(!1);return}b.length>te.current&&le(!1)}},[ce,e,l,de,C,b.length]);let Ct=(0,_.useMemo)(()=>{if(!l)return b;if(Te&&!Ce&&ye!==null)return ye;let e=l.toLowerCase();return k.filter(t=>[t.title,t.titleEn,t.source,...Gv(t.tags)].join(` `).toLowerCase().includes(e))},[b,l,k,ye,Ce,Te]),wt=l?Ct.slice(0,fe):Ct,Tt=Ct.length>fe,Et=(0,_.useMemo)(()=>{if(!C&&!ie)return 0;let e=Mv-S.length;return e<=0?0:Math.min(Nv,e)},[C,ie,S.length]),Dt=(0,_.useMemo)(()=>Et<=0||b.length>0?[]:Array.from({length:Et},(e,t)=>(0,$.jsx)(`div`,{className:`mb-4`,children:(0,$.jsx)(iy,{index:t})},`skeleton-${t}`)),[Et,b.length]),Ot=l.trim()&&!xe&&Ct.length===0,kt=e=>{let{name:t,value:n}=e.target;Je(t===`sourceChoice`?e=>{let t={...e,sourceChoice:n};return n===$v&&!e.sourceCustom?.trim()&&(t.sourceCustom=ey),t}:e=>({...e,[t]:n})),Ze&&Qe(``)},At=(0,_.useCallback)(e=>{let t=wv(e);t.length&&Je(e=>({...e,tags:Array.from(new Set([...e.tags||[],...t]))}))},[]),jt=(0,_.useCallback)(e=>{Je(t=>({...t,tags:(t.tags||[]).filter((t,n)=>n!==e)}))},[]),Mt=(0,_.useCallback)(e=>{let t=wv(e);t.length&&At(t),Ye(``)},[At]),Nt=(0,_.useCallback)(e=>{let t=[];for(let n=0;n<e.length;n+=1)e[n]===`#`&&t.push(n);if(t.length>=2){let n=t[t.length-1],r=e.slice(0,n),i=e.slice(n);At(r),Ye(i);return}if(/[,\uFF0C\n\s]$/.test(e)&&/#/.test(e)){At(e),Ye(``);return}Ye(e)},[At]),Pt=(0,_.useCallback)(e=>{let t=e.target.value;if(Xe.current){Ye(t);return}Nt(t)},[Nt]),Ft=(0,_.useCallback)(e=>{if(!Xe.current){if(e.key===`Enter`){e.preventDefault(),Mt(O);return}if(e.key===`Backspace`){!O&&qe.tags?.length&&(e.preventDefault(),jt(qe.tags.length-1));return}if(e.key===`#`){let t=O.trim();t&&t!==`#`&&(e.preventDefault(),At(t),Ye(`#`))}}},[At,Mt,jt,qe.tags,O]),It=e=>{if(e.preventDefault(),O.trim()&&Mt(O),!d){Qe(``);return}if(!qe.title.trim()||!qe.image_url.trim()){Qe(`URL`);return}let t=wv(qe.tags),n=qe.sourceChoice===$v?qe.sourceCustom?.trim()||ey:qe.sourceChoice;c({...qe,description:qe.description.trim(),source:n,tags:t,author:d.displayName||d.email||`Anonymous`,authorUid:d.uid}),Je({title:``,sourceChoice:$v,sourceCustom:ey,image_url:``,source_url:``,description:``,tags:[]}),Ye(``),Qe(``)},Lt=async t=>{t?.preventDefault();let n=$e.trim();if(!n||tt)return;ot(``),it(!1);let r=K_();if(!r){ot(``);return}nt(!0);try{await Gd(Yu(r,`feedback`),{message:n,createdAt:$d(),source:`enso-web`,section:e,query:l?.trim()||``,user:d?{uid:d.uid||``,email:d.email||``,displayName:d.displayName||``}:null}),et(``),it(!0),window.setTimeout(()=>it(!1),2500)}catch(e){console.error(`Failed to submit feedback:`,e),ot(``)}finally{nt(!1)}},Rt={default:5,1280:4,1024:3,768:2,480:1},zt=(0,_.useMemo)(()=>{if(!h)return[];let e=k.filter(e=>e.source===h.source&&e.id!==h.id),t=k.filter(e=>e.source!==h.source&&e.id!==h.id),n=[...e,...t];return Array.from(new Map(n.map(e=>[e.id,e])).values())},[h,k]),Bt=(0,_.useMemo)(()=>zt.slice(0,Ie),[zt,Ie]),Vt=(0,_.useMemo)(()=>qv(Bt).slice(0,12),[Bt]),Ht=h?Ge(h):!1,Ut=h?Ke(h):!1,Wt=h?o(h):0,Gt=Ie<zt.length;(0,_.useEffect)(()=>{h&&D(Rv)},[h]),(0,_.useEffect)(()=>{if(!h||!lt.current)return;let e=lt.current,t=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)&&Gt&&D(e=>Math.min(e+zv,zt.length))},{rootMargin:`400px 0px 400px 0px`,threshold:0});return t.observe(e),()=>t.disconnect()},[h,Gt,zt.length]),(0,_.useEffect)(()=>{h&&Xt()},[e]),(0,_.useEffect)(()=>{if(!u)return;let e=dt.current,t=ut.current;pt.current=e&&typeof t==`number`?{cardId:ft.current,scrollY:t}:null,Xt(),xt()},[u,xt]);let Kt=(0,_.useRef)(0);(0,_.useEffect)(()=>{if(h)return;let e=pt.current;if(!e)return;pt.current=null;let t=requestAnimationFrame(()=>{ht(e)});return()=>cancelAnimationFrame(t)},[h,b.length]);let qt=e=>{Ve(e||``),ze.current&&clearTimeout(ze.current),Re(!0),ze.current=setTimeout(()=>{Re(!1)},1800)},A=e=>{let t=Ge(e);r(e),t?Re(!1):qt(e?.title)};(0,_.useEffect)(()=>()=>{ze.current&&clearTimeout(ze.current)},[]),(0,_.useEffect)(()=>{n&&(He.current=t.length,Ue.current=!0)},[n,t.length]),(0,_.useEffect)(()=>{if(Ue.current){if(t.length>He.current){let e=t[t.length-1];qt(e?.title)}He.current=t.length}},[t]);let Jt=e=>{Kt.current=b.length;let t=window.scrollY;h||(ut.current=t),ft.current=e?.id||null,dt.current=!0,y(e=>[...e,{item:h,scrollY:t}]),g(e),window.scrollTo({top:0})},Yt=()=>{if(v.length===0){let e={cardId:ft.current,scrollY:ut.current};Xt(),ht(e);return}let e=v[v.length-1];y(e=>e.slice(0,-1));let t=e?.item||null;if(!t){let t={cardId:ft.current,scrollY:e?.scrollY};Xt(),ht(t);return}ft.current=t.id||null,g(t),dt.current=!0},Xt=()=>{g(null),y([]),dt.current=!1,ut.current=0,ft.current=null},Zt=(0,_.useRef)(l);(0,_.useEffect)(()=>{Zt.current!==l&&h&&l.trim()&&(Xt(),window.scrollTo({top:0})),Zt.current=l},[l,h]);let Qt=Vt.slice(0,6),$t=Vt.slice(6),en=h?(0,$.jsxs)(`div`,{className:`fixed bottom-0 left-16 right-0 top-[76px] z-50`,onClick:Yt,role:`dialog`,"aria-modal":`true`,children:[(0,$.jsx)(`div`,{className:`absolute inset-0 bg-black/60`,"aria-hidden":`true`}),(0,$.jsx)(`div`,{className:`relative h-full overflow-y-auto px-4 py-6 sm:px-8`,children:(0,$.jsxs)(`div`,{className:`mx-auto w-full max-w-7xl`,children:[(0,$.jsx)(`div`,{className:`flex items-center justify-between`,children:(0,$.jsxs)(`button`,{type:`button`,className:`flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow transition hover:bg-gray-100`,onClick:Yt,children:[(0,$.jsx)(`span`,{children:``}),(0,$.jsx)(`span`,{children:``})]})}),(0,$.jsxs)(`div`,{className:`mt-6 rounded-3xl bg-white p-6 shadow-xl`,onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`grid gap-8 lg:grid-cols-5`,children:[(0,$.jsxs)(`div`,{className:`lg:col-span-3`,children:[(0,$.jsxs)(`div`,{className:`relative rounded-2xl bg-gray-50 p-4 shadow-sm`,children:[(0,$.jsx)(`img`,{src:h.image_url||Vv,alt:h.title,className:`w-full rounded-2xl object-contain`,referrerPolicy:`no-referrer`,loading:`lazy`,onError:e=>{e.currentTarget.onerror=null,e.currentTarget.src=Vv}}),(0,$.jsx)(`div`,{className:`absolute left-3 top-4`,children:(0,$.jsxs)(`button`,{type:`button`,onClick:e=>{e.stopPropagation(),a?.(h)},className:`flex h-11 w-11 flex-col items-center justify-center gap-0.5 rounded-full border border-white bg-white/90 p-1 text-gray-600 shadow transition ${Ut?`text-red-500`:`text-gray-600`}`,"aria-label":``,children:[Ut?(0,$.jsx)(A_,{className:`h-5 w-5`}):(0,$.jsx)(c_,{className:`h-5 w-5`}),(0,$.jsx)(`span`,{className:`text-[11px] font-semibold`,children:Wt})]})}),(0,$.jsx)(`div`,{className:`absolute right-3 top-4`,children:(0,$.jsx)(`button`,{type:`button`,onClick:()=>A(h),className:`flex h-11 w-11 items-center justify-center rounded-full border border-white bg-white/90 p-1 text-gray-600 shadow transition hover:border-gray-300 ${Ht?`text-gray-700`:`text-gray-600`}`,"aria-label":``,children:Ht?(0,$.jsx)(O_,{className:`h-5 w-5`}):(0,$.jsx)(n_,{className:`h-5 w-5`})})}),(0,$.jsxs)(`div`,{className:`mt-4 flex items-center justify-between gap-4`,children:[(0,$.jsx)(`span`,{className:`text-sm text-gray-500`,children:h.source||`Unknown`}),h.source_url&&(0,$.jsxs)(`button`,{type:`button`,onClick:e=>{e.stopPropagation(),window.open(h.source_url,`_blank`,`noreferrer`)},className:`flex items-center gap-2 rounded-full bg-gray-100 px-3 py-1.5 text-xs font-semibold text-gray-800 shadow-sm transition hover:bg-gray-200`,"aria-label":``,children:[(0,$.jsx)(e_,{className:`h-4 w-4`}),(0,$.jsx)(`span`,{children:``})]})]}),(0,$.jsx)(`div`,{className:`mt-2 space-y-2`,children:(0,$.jsx)(`h3`,{className:`text-2xl font-semibold text-gray-900`,children:h.title})})]}),(0,$.jsx)(`div`,{className:`mt-6 grid gap-4 lg:grid-cols-3`,children:$t.map(e=>(0,$.jsx)(`div`,{className:`h-full rounded-2xl bg-white p-3 shadow-sm`,"data-card-id":e.id,children:(0,$.jsx)(ry,{item:e,onExpand:()=>Jt(e),onSave:A,onLike:a,isSaved:Ge(e),isLiked:Ke(e),likeCount:o(e)})},e.id))})]}),(0,$.jsx)(`div`,{className:`flex flex-col gap-4 lg:col-span-2`,children:(0,$.jsx)(`div`,{className:`grid grid-cols-2 gap-4`,children:Qt.map(e=>(0,$.jsx)(`div`,{className:`h-full rounded-2xl bg-white p-3 shadow-sm`,"data-card-id":e.id,children:(0,$.jsx)(ry,{item:e,onExpand:()=>Jt(e),onSave:A,onLike:a,isSaved:Ge(e),isLiked:Ke(e),likeCount:o(e)})},e.id))})})]}),(0,$.jsx)(`div`,{className:`mt-6 flex flex-wrap gap-3`,children:(0,$.jsx)(`button`,{type:`button`,className:`rounded-full border border-gray-300 px-5 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50`,onClick:()=>A(h),children:Ge(h)?``:``})}),Gt&&(0,$.jsx)(`div`,{ref:lt,className:`h-8`})]})]})})]}):null;if(e===`saved`)return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{className:`mx-auto max-w-6xl px-4 py-8`,children:[(0,$.jsxs)(`div`,{className:`mb-6`,children:[(0,$.jsx)(`h2`,{className:`text-2xl font-semibold`,children:``}),(0,$.jsx)(`p`,{className:`text-sm text-gray-500`,children:``})]}),t.length===0?(0,$.jsx)(`div`,{className:`rounded-2xl bg-white p-10 text-center text-sm text-gray-500 shadow-sm`,children:``}):(0,$.jsx)(B_,{breakpointCols:{default:4,1280:3,1024:3,768:2,640:1},className:`my-masonry-grid`,columnClassName:`my-masonry-grid_column`,children:t.map(e=>(0,$.jsx)(`div`,{className:`mb-4`,"data-card-id":e.id,children:(0,$.jsx)(ry,{item:e,onExpand:()=>Jt(e),onSave:A,onLike:a,isSaved:Ge(e),isLiked:Ke(e),likeCount:o(e)})},e.id))})]}),en]});if(e===`upload`)return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`mx-auto max-w-3xl px-4 py-10`,children:(0,$.jsxs)(`div`,{className:`rounded-2xl bg-white p-8 shadow-sm`,children:[(0,$.jsx)(`h2`,{className:`text-2xl font-semibold`,children:``}),(0,$.jsx)(`p`,{className:`mt-2 text-sm text-gray-500`,children:`3Denso`}),(0,$.jsxs)(`form`,{onSubmit:It,className:`mt-8 space-y-5`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold text-gray-700`,children:``}),(0,$.jsx)(`input`,{type:`text`,name:`title`,value:qe.title,onChange:kt,className:`mt-2 w-full rounded-2xl border border-gray-200 px-4 py-3 text-sm outline-none focus:border-gray-400`,placeholder:`3DBenchy`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold text-gray-700`,children:`URL`}),(0,$.jsx)(`input`,{type:`url`,name:`image_url`,value:qe.image_url,onChange:kt,className:`mt-2 w-full rounded-2xl border border-gray-200 px-4 py-3 text-sm outline-none focus:border-gray-400`,placeholder:`https://example.com/image.jpg`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold text-gray-700`,children:``}),(0,$.jsx)(`textarea`,{name:`description`,value:qe.description,onChange:kt,className:`mt-2 w-full rounded-2xl border border-gray-200 px-4 py-3 text-sm outline-none focus:border-gray-400`,placeholder:``,rows:3}),(0,$.jsx)(`p`,{className:`mt-1 text-xs text-gray-500`,children:``})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold text-gray-700`,children:``}),(0,$.jsx)(`div`,{className:`mt-2 w-full rounded-2xl border border-gray-200 bg-white px-4 py-3 text-sm outline-none focus-within:border-gray-400`,children:(0,$.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[(qe.tags||[]).map((e,t)=>(0,$.jsxs)(`button`,{type:`button`,className:`inline-flex items-center gap-1 rounded-full bg-gray-100 px-3 py-1 text-xs font-semibold text-gray-700 hover:bg-gray-200`,onClick:()=>jt(t),"aria-label":` ${e} `,title:``,children:[(0,$.jsx)(`span`,{className:`text-gray-500`,children:`#`}),(0,$.jsx)(`span`,{children:e}),(0,$.jsx)(`span`,{className:`text-gray-400`,children:``})]},`${e}-${t}`)),(0,$.jsx)(`input`,{type:`text`,inputMode:`text`,autoComplete:`off`,value:O,onChange:Pt,onKeyDown:Ft,onCompositionStart:()=>{Xe.current=!0},onCompositionEnd:e=>{Xe.current=!1,Nt(e.currentTarget.value)},onBlur:()=>{O.trim()&&Mt(O)},className:`min-w-[12ch] flex-1 border-0 bg-transparent p-0 text-sm outline-none`,placeholder:qe.tags?.length?`#`:`#miniature #drone #organizer`})]})}),(0,$.jsx)(`p`,{className:`mt-2 text-xs text-gray-500`,children:"`#` EnterBackspace"})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold text-gray-700`,children:``}),(0,$.jsx)(`input`,{type:`url`,name:`source_url`,value:qe.source_url,onChange:kt,className:`mt-2 w-full rounded-2xl border border-gray-200 px-4 py-3 text-sm outline-none focus:border-gray-400`,placeholder:`https://www.thingiverse.com/...`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold text-gray-700`,children:``}),(0,$.jsxs)(`select`,{name:`sourceChoice`,value:qe.sourceChoice,onChange:kt,className:`mt-2 w-full rounded-2xl border border-gray-200 px-4 py-3 text-sm outline-none focus:border-gray-400`,children:[(0,$.jsx)(`option`,{value:$v,children:``}),Qv.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]}),qe.sourceChoice===$v&&(0,$.jsx)(`input`,{type:`text`,name:`sourceCustom`,value:qe.sourceCustom,onChange:kt,className:`mt-3 w-full rounded-2xl border border-gray-200 px-4 py-3 text-sm outline-none focus:border-gray-400`,placeholder:ey})]}),(0,$.jsx)(`button`,{type:`submit`,className:`w-full rounded-full bg-gray-900 py-3 text-sm font-semibold text-white shadow hover:bg-gray-800`,children:``})]}),Ze&&(0,$.jsx)(`p`,{className:`mt-4 text-center text-sm text-emerald-600`,children:Ze})]})}),en]});if(e===`explore`){if(l.trim()){let e=xe?`Meilisearch ...`:Te&&!Ce&&ye!==null?`Meilisearch `:Ce?`Meilisearch `:De?`Meilisearch `:``;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{className:`mx-auto max-w-7xl px-4 py-8`,children:[(0,$.jsx)(`div`,{className:`mb-6 flex flex-wrap items-end justify-between gap-3`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-sm font-semibold uppercase text-gray-400`,children:`Explore Search`}),(0,$.jsxs)(`h2`,{className:`text-3xl font-semibold`,children:[``,l,``]}),(0,$.jsxs)(`p`,{className:`flex flex-wrap items-center gap-3 text-sm text-gray-500`,children:[(0,$.jsxs)(`span`,{children:[Ct.length,` `]}),(0,$.jsx)(`span`,{className:`text-xs font-medium text-gray-400`,children:e})]}),Ce&&(0,$.jsx)(`p`,{className:`mt-1 text-xs text-red-500`,children:`Meilisearch `})]})}),Ct.length===0?(0,$.jsx)(`div`,{className:`rounded-2xl bg-white p-10 text-center text-sm text-gray-500 shadow-sm`,children:``}):(0,$.jsxs)(B_,{breakpointCols:Rt,className:`my-masonry-grid`,columnClassName:`my-masonry-grid_column`,children:[wt.map(e=>(0,$.jsx)(`div`,{className:`mb-4`,"data-card-id":e.id,children:(0,$.jsx)(ry,{item:e,onExpand:()=>Jt(e),onSave:A,onLike:a,isSaved:Ge(e),isLiked:Ke(e),likeCount:o(e)})},e.id)),Dt]}),Tt&&(0,$.jsx)(`div`,{className:`mt-8 flex justify-center`,children:(0,$.jsxs)(`button`,{type:`button`,className:`rounded-full border border-gray-200 bg-white px-6 py-2 text-sm font-semibold text-gray-700 shadow-sm transition hover:border-gray-300 hover:bg-gray-50`,onClick:()=>pe(e=>Math.min(e+Xv,Ct.length)),children:[` `,Xv,` `]})})]}),en]})}let e=Ct.slice(0,8),t=ny(Ct,st),n=Ct.slice(1,4);return Ct.slice(4,7),(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{className:`mx-auto max-w-6xl px-4 py-10 space-y-12`,children:[(0,$.jsxs)(`div`,{className:`space-y-2`,children:[(0,$.jsx)(`p`,{className:`text-sm font-semibold uppercase text-gray-400`,children:`Explore`}),(0,$.jsx)(`h1`,{className:`text-3xl font-semibold text-gray-900`,children:`enso`}),(0,$.jsx)(`p`,{className:`text-sm text-gray-500`,children:``})]}),(0,$.jsxs)(`div`,{className:`grid gap-6 lg:grid-cols-3`,children:[(0,$.jsxs)(`div`,{className:`lg:col-span-2 rounded-3xl border border-gray-100 bg-white/80 p-5 shadow-sm`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-xs font-semibold uppercase text-gray-400`,children:``}),(0,$.jsx)(`p`,{className:`text-xl font-semibold text-gray-900`,children:`1`})]}),(0,$.jsx)(`button`,{type:`button`,className:`rounded-full border border-gray-200 px-4 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-50`,children:``})]}),t?(0,$.jsxs)(`button`,{type:`button`,onClick:()=>Jt(t),className:`mt-4 flex w-full items-center gap-5 rounded-3xl bg-gradient-to-br from-gray-50 to-white p-6 text-left transition hover:-translate-y-0.5 hover:shadow-2xl`,children:[(0,$.jsx)(`div`,{className:`h-40 w-40 overflow-hidden rounded-3xl bg-gray-100 lg:h-44 lg:w-44`,children:(0,$.jsx)(`img`,{src:t.image_url||Bv,alt:t.title,className:`h-full w-full object-cover`,loading:`lazy`})}),(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`span`,{className:`inline-flex items-center rounded-full bg-gray-100 px-4 py-1 text-xs font-semibold text-gray-600`,children:``}),(0,$.jsx)(`p`,{className:`mt-2 text-2xl font-semibold text-gray-900 leading-snug line-clamp-2`,children:t.title}),(0,$.jsx)(`p`,{className:`text-xs text-gray-500`,children:t.source})]})]}):(0,$.jsx)(`div`,{className:`mt-6 h-32 rounded-2xl bg-gray-50`})]}),(0,$.jsxs)(`div`,{className:`space-y-4 rounded-3xl border border-gray-100 bg-white/80 p-5 shadow-sm`,children:[(0,$.jsx)(`div`,{className:`flex items-center justify-between`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-xs font-semibold uppercase text-gray-400`,children:``}),(0,$.jsx)(`p`,{className:`text-sm text-gray-600`,children:``})]})}),(0,$.jsx)(`div`,{className:`space-y-3`,children:n.map(e=>(0,$.jsxs)(`button`,{type:`button`,onClick:()=>Jt(e),className:`flex w-full items-center gap-3 rounded-2xl bg-gray-50 px-3 py-2 text-left transition hover:-translate-y-0.5 hover:shadow-sm`,children:[(0,$.jsx)(`div`,{className:`h-14 w-14 overflow-hidden rounded-xl bg-white`,children:(0,$.jsx)(`img`,{src:e.image_url||Bv,alt:e.title,className:`h-full w-full object-cover`,loading:`lazy`})}),(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`p`,{className:`text-[13px] font-semibold text-gray-900 line-clamp-2`,children:e.title}),(0,$.jsx)(`p`,{className:`text-[11px] text-gray-500`,children:e.source})]})]},e.id))})]})]}),(0,$.jsxs)(`div`,{className:`space-y-4`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{className:`text-xl font-semibold`,children:``}),(0,$.jsx)(`p`,{className:`text-sm text-gray-500`,children:``})]}),(0,$.jsx)(`button`,{type:`button`,className:`rounded-full border border-gray-300 px-4 py-1.5 text-sm text-gray-600 transition hover:bg-gray-50`,children:``})]}),(0,$.jsx)(`div`,{className:`grid gap-4 sm:grid-cols-2 lg:grid-cols-3`,children:Hv.slice(0,3).map(e=>(0,$.jsxs)(`button`,{type:`button`,className:`flex h-32 flex-col justify-between rounded-3xl border border-gray-100 bg-gradient-to-br ${e.accent} p-4 text-left text-gray-800 shadow-sm transition hover:-translate-y-0.5`,children:[(0,$.jsx)(`span`,{className:`text-xs uppercase text-gray-500`,children:`Category`}),(0,$.jsx)(`span`,{className:`text-2xl font-semibold`,children:e.label}),(0,$.jsx)(`span`,{className:`text-xs text-gray-600`,children:``})]},e.id))}),(0,$.jsx)(`div`,{className:`flex flex-wrap gap-2 rounded-3xl border border-gray-100 bg-white/70 p-4 shadow-sm`,children:Uv.map(e=>(0,$.jsx)(`button`,{type:`button`,className:`rounded-full border border-gray-200 px-3 py-1 text-xs font-semibold text-gray-700 transition hover:-translate-y-0.5 hover:border-gray-300 hover:bg-gray-50`,children:e},e))})]}),e.length>0&&(0,$.jsxs)(`div`,{className:`space-y-4`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-sm font-semibold uppercase text-gray-400`,children:`Trending`}),(0,$.jsx)(`h2`,{className:`text-xl font-semibold`,children:``})]}),(0,$.jsx)(`button`,{type:`button`,className:`rounded-full border border-gray-900 px-4 py-1.5 text-sm font-semibold text-gray-900 shadow hover:bg-gray-900 hover:text-white`,onClick:()=>window.scrollTo({top:0,behavior:`smooth`}),children:``})]}),(0,$.jsx)(B_,{breakpointCols:{default:4,1280:3,1024:3,768:2,640:1},className:`my-masonry-grid`,columnClassName:`my-masonry-grid_column`,children:e.map(e=>(0,$.jsx)(`div`,{className:`mb-4`,"data-card-id":e.id,children:(0,$.jsx)(ry,{item:e,onExpand:()=>Jt(e),onSave:A,onLike:a,isSaved:Ge(e),isLiked:Ke(e),likeCount:o(e)})},e.id))})]})]}),en]})}return Ot?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`mx-auto max-w-[1400px] px-3 sm:px-4`,children:(0,$.jsx)(`div`,{className:`py-4`,children:(0,$.jsxs)(`div`,{className:`rounded-2xl border border-dashed border-gray-300 bg-white/70 px-6 py-8 text-center text-sm text-gray-500 shadow-sm`,children:[``,l,``]})})}),en]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`mx-auto max-w-[1400px] px-3 sm:px-4`,children:(0,$.jsxs)(`div`,{className:`py-4`,children:[e===`home`&&!l.trim()&&(0,$.jsxs)(`div`,{className:`mb-6 rounded-3xl border border-gray-200 bg-white/80 p-5 shadow-sm`,children:[(0,$.jsxs)(`div`,{className:`flex flex-wrap items-end justify-between gap-3`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-xs font-semibold uppercase text-gray-400`,children:`Feedback`}),(0,$.jsx)(`h2`,{className:`text-lg font-semibold text-gray-900`,children:``}),(0,$.jsx)(`p`,{className:`text-sm text-gray-500`,children:``})]}),rt&&(0,$.jsx)(`div`,{className:`rounded-full bg-emerald-50 px-4 py-2 text-xs font-semibold text-emerald-700`,children:``})]}),(0,$.jsxs)(`form`,{onSubmit:Lt,className:`mt-4 space-y-3`,children:[(0,$.jsx)(`textarea`,{value:$e,onChange:e=>{et(e.target.value),at&&ot(``)},rows:3,maxLength:1e3,className:`w-full resize-none rounded-2xl border border-gray-200 bg-white px-4 py-3 text-sm text-gray-800 outline-none focus:border-gray-400`,placeholder:` /  / UI `}),(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center justify-between gap-3`,children:[(0,$.jsxs)(`p`,{className:`text-xs text-gray-400`,children:[$e.length,`/1000`]}),(0,$.jsx)(`button`,{type:`submit`,disabled:tt||!$e.trim(),className:`rounded-full bg-gray-900 px-5 py-2 text-sm font-semibold text-white shadow transition hover:bg-gray-800 disabled:cursor-not-allowed disabled:bg-gray-400`,children:tt?`...`:``})]}),at&&(0,$.jsx)(`p`,{className:`text-xs font-medium text-red-600`,children:at})]})]}),(0,$.jsx)(B_,{breakpointCols:Rt,className:`my-masonry-grid`,columnClassName:`my-masonry-grid_column`,children:Ct.map(e=>(0,$.jsx)(`div`,{className:`mb-4`,"data-card-id":e.id,children:(0,$.jsx)(ry,{item:e,onExpand:()=>Jt(e),onSave:A,onLike:a,isSaved:Ge(e),isLiked:Ke(e),likeCount:o(e)})},e.id))}),!ie&&C&&(0,$.jsx)(`div`,{ref:ct,className:`h-10`}),de&&(0,$.jsxs)(`div`,{className:`mt-4 flex flex-col items-center gap-2 rounded-2xl border border-red-200 bg-red-50 px-6 py-4 text-sm text-red-700`,children:[(0,$.jsx)(`p`,{children:de}),(0,$.jsx)(`button`,{type:`button`,onClick:St,className:`rounded-full border border-red-300 px-4 py-1 text-xs font-semibold text-red-700 hover:bg-red-100`,children:``})]}),!ie&&!C&&(0,$.jsx)(`div`,{className:`mt-3 text-center text-sm text-gray-500`,children:``}),Ct.length===0&&l.trim()&&(0,$.jsxs)(`div`,{className:`mt-8 rounded-2xl border border-dashed border-gray-300 bg-white/70 px-6 py-8 text-center text-sm text-gray-500 shadow-sm`,children:[``,(0,$.jsx)(`br`,{}),``]})]})}),(0,$.jsx)(`div`,{className:`pointer-events-none fixed inset-0 z-50 flex items-end justify-end px-4 pb-6 sm:px-6`,children:(0,$.jsx)(`div`,{className:`transition-all duration-300 ${Le?`opacity-100 translate-y-0`:`opacity-0 translate-y-4`}`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-3 rounded-2xl bg-gray-900/95 px-5 py-3 text-sm font-semibold text-white shadow-2xl ring-1 ring-white/10 backdrop-blur`,children:[(0,$.jsx)(`span`,{className:`flex h-9 w-9 items-center justify-center rounded-full bg-white/10 text-lg`,children:``}),(0,$.jsxs)(`div`,{className:`leading-tight`,children:[(0,$.jsx)(`p`,{className:`text-[11px] uppercase tracking-[0.15em] text-gray-300`,children:``}),(0,$.jsx)(`p`,{className:`text-sm`,children:Be})]})]})})}),en]})}function oy({open:e=!1,mode:t=`login`,onModeChange:n=()=>{},onClose:r=()=>{},onSubmit:i=()=>{},loading:a=!1,error:o=``,onSocialLogin:s=()=>{}}){let[c,l]=(0,_.useState)(``),[u,d]=(0,_.useState)(``),[f,p]=(0,_.useState)(``);if((0,_.useEffect)(()=>{e&&(l(``),d(``),p(``))},[t,e]),!e)return null;let m=e=>{e.preventDefault(),i({mode:t,email:c.trim(),password:u,displayName:f.trim()})};return(0,$.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4`,children:(0,$.jsxs)(`div`,{className:`relative w-full max-w-md overflow-hidden rounded-3xl bg-white shadow-2xl`,children:[(0,$.jsx)(`button`,{type:`button`,className:`absolute right-4 top-4 text-gray-400 transition hover:text-gray-600`,onClick:r,"aria-label":``,children:``}),(0,$.jsxs)(`div`,{className:`border-b border-gray-100 px-6 pt-6 pb-4`,children:[(0,$.jsxs)(`div`,{className:`flex gap-2 text-xs font-semibold text-gray-500`,children:[(0,$.jsx)(`button`,{type:`button`,className:`rounded-full px-3 py-1 transition ${t===`login`?`bg-gray-900 text-white`:`bg-gray-100 text-gray-600 hover:bg-gray-200`}`,onClick:()=>n(`login`),children:``}),(0,$.jsx)(`button`,{type:`button`,className:`rounded-full px-3 py-1 transition ${t===`signup`?`bg-gray-900 text-white`:`bg-gray-100 text-gray-600 hover:bg-gray-200`}`,onClick:()=>n(`signup`),children:``})]}),(0,$.jsx)(`h2`,{className:`mt-3 text-xl font-semibold text-gray-900`,children:t===`login`?``:``}),(0,$.jsx)(`p`,{className:`text-sm text-gray-500`,children:``})]}),(0,$.jsxs)(`div`,{className:`space-y-3 px-6 pb-2 pt-4`,children:[(0,$.jsxs)(`button`,{type:`button`,disabled:a,onClick:()=>s(`google`),className:`flex w-full items-center justify-center gap-3 rounded-xl border border-gray-200 px-4 py-3 text-sm font-semibold text-gray-800 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:bg-gray-100`,children:[(0,$.jsx)(`span`,{className:`flex h-6 w-6 items-center justify-center rounded-full bg-white text-gray-700`,children:`G`}),`Google `]}),(0,$.jsxs)(`button`,{type:`button`,disabled:a,onClick:()=>s(`apple`),className:`flex w-full items-center justify-center gap-3 rounded-xl border border-gray-200 px-4 py-3 text-sm font-semibold text-gray-800 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:bg-gray-100`,children:[(0,$.jsx)(`span`,{className:`flex h-6 w-6 items-center justify-center rounded-full bg-black text-xs font-bold text-white`,children:`A`}),`Apple `]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 text-xs text-gray-400`,children:[(0,$.jsx)(`div`,{className:`h-[1px] flex-1 bg-gray-200`}),(0,$.jsx)(`span`,{children:``}),(0,$.jsx)(`div`,{className:`h-[1px] flex-1 bg-gray-200`})]})]}),(0,$.jsxs)(`form`,{onSubmit:m,className:`space-y-4 px-6 pb-6`,children:[t===`signup`&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`mb-1 block text-sm font-medium text-gray-700`,children:` ()`}),(0,$.jsx)(`input`,{type:`text`,value:f,onChange:e=>p(e.target.value),className:`w-full rounded-xl border border-gray-200 px-3 py-2 text-sm outline-none transition focus:border-gray-400 focus:ring-1 focus:ring-gray-200`,placeholder:`: Yaggi `})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`mb-1 block text-sm font-medium text-gray-700`,children:``}),(0,$.jsx)(`input`,{type:`email`,required:!0,value:c,onChange:e=>l(e.target.value),className:`w-full rounded-xl border border-gray-200 px-3 py-2 text-sm outline-none transition focus:border-gray-400 focus:ring-1 focus:ring-gray-200`,placeholder:`you@example.com`,autoComplete:t===`login`?`email`:`new-email`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`mb-1 block text-sm font-medium text-gray-700`,children:``}),(0,$.jsx)(`input`,{type:`password`,required:!0,minLength:6,value:u,onChange:e=>d(e.target.value),className:`w-full rounded-xl border border-gray-200 px-3 py-2 text-sm outline-none transition focus:border-gray-400 focus:ring-1 focus:ring-gray-200`,placeholder:`6`,autoComplete:t===`login`?`current-password`:`new-password`}),(0,$.jsx)(`p`,{className:`mt-1 text-xs text-gray-400`,children:` 6 `})]}),o&&(0,$.jsx)(`div`,{className:`rounded-xl bg-red-50 px-3 py-2 text-sm text-red-600`,children:o}),(0,$.jsx)(`button`,{type:`submit`,className:`w-full rounded-xl bg-gray-900 px-4 py-3 text-sm font-semibold text-white transition hover:bg-gray-800 disabled:cursor-not-allowed disabled:bg-gray-500`,disabled:a,children:a?`...`:t===`login`?``:``}),(0,$.jsx)(`p`,{className:`text-center text-xs text-gray-400`,children:`Firebase Authentication `})]})]})})}var sy=`yaggi3d_search_history`,cy=10,ly=[`iphone stand`,`drone`,`figure`,`gadget`,`toy`,`holder`,`organizer`];function uy(){try{let e=localStorage.getItem(sy);return e?JSON.parse(e):[]}catch{return[]}}function dy(e){if(e.trim())try{let t=uy().filter(t=>t.toLowerCase()!==e.toLowerCase()),n=[e,...t].slice(0,cy);localStorage.setItem(sy,JSON.stringify(n))}catch{}}function fy(){return[]}var py=(e,t)=>{let n=new Map,r=e=>{if(!e)return;let t=e.source_url||e.id;t&&n.set(t,{...e,tags:wv(e.tags),isCustom:!0})};return e.forEach(r),t.forEach(r),Array.from(n.values())},my=(e,t)=>!e||!t?!1:!!(e.id&&t.id&&e.id===t.id||e.source_url&&t.source_url&&e.source_url===t.source_url),hy=e=>e?.source_url||e?.image_url||e?.id||null,gy=e=>{let t=hy(e);return t?encodeURIComponent(t):null},_y=`enso_guest_likes`,vy=()=>{if(typeof window>`u`)return[];try{let e=localStorage.getItem(_y);return e?JSON.parse(e):[]}catch{return[]}},yy=e=>{if(!(typeof window>`u`))try{localStorage.setItem(_y,JSON.stringify(e))}catch{}},by={"/home":`home`,"/explore":`explore`,"/saved":`saved`,"/upload":`upload`};function xy(e){return by[e]||`home`}function Sy(e){return Object.entries(by).find(([,t])=>t===e)?.[0]||`/home`}function Cy(){let[e,t]=(0,_.useState)(()=>xy(window.location.pathname)),[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(()=>fy()),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(``),[m,h]=(0,_.useState)(``),[g,v]=(0,_.useState)(!1),[y,b]=(0,_.useState)(()=>uy()),[x,ee]=(0,_.useState)(null),[te,S]=(0,_.useState)(!1),[ne,re]=(0,_.useState)(!1),[ie,ae]=(0,_.useState)(`login`),[oe,se]=(0,_.useState)(!1),[ce,le]=(0,_.useState)(``),[C,ue]=(0,_.useState)(0),[de,w]=(0,_.useState)([]),[T,fe]=(0,_.useState)({}),[pe,me]=(0,_.useState)(()=>vy());(0,_.useEffect)(()=>{document.title=`enso`},[]),(0,_.useEffect)(()=>{let e=q_();if(!e){S(!0);return}let t=Bm(e,e=>{ee(e),S(!0)});return()=>t()},[]),(0,_.useEffect)(()=>{r([]),a(!1);let e=K_();if(!e||!x)return;let t=Yu(e,`users`,x.uid,`savedItems`),n=Kd(t,e=>{a(!0);let t=e.docs.map(e=>({...e.data(),id:e.id}));r(t)},e=>{console.error(`Firestore savedItems onSnapshot error:`,e),a(!0)});return()=>n?.()},[x]),(0,_.useEffect)(()=>{w([]);let e=K_();if(!e||!x)return;let t=Yu(e,`users`,x.uid,`likedItems`),n=Kd(t,e=>{let t=e.docs.map(e=>({...e.data(),id:e.id}));w(t)},e=>{console.error(`Firestore likedItems onSnapshot error:`,e)});return()=>n?.()},[x]),(0,_.useEffect)(()=>{let e=K_();if(!e){console.warn(`Firestore config not found. Falling back to local storage only.`);return}let t=!1;(async()=>{try{let n=await Hd(Yu(e,`customItems`));if(t)return;let r=n.docs.map(e=>({...e.data(),id:e.id,isCustom:!0}))||[];r.length>0&&s(e=>py(e,r))}catch{}})();let n=Kd(Yu(e,`customItems`),e=>{let t=e.docs.map(e=>({...e.data(),id:e.id,isCustom:!0}))||[];s(e=>py(e,t))},e=>{console.error(`Firestore onSnapshot error:`,e)});return()=>{t=!0,n?.()}},[]),(0,_.useEffect)(()=>{let e=K_();if(!e){console.warn(`Firestore config not found. Falling back to local storage only.`);return}let t=Yu(e,`likeCounts`),n=Kd(t,e=>{let t={};e.docs.forEach(e=>{let n=e.data();typeof n?.count==`number`&&(t[e.id]=Math.max(0,n.count))}),fe(t)},e=>{console.error(`Firestore likeCounts onSnapshot error:`,e)});return()=>n?.()},[]);let he=e=>{if(!x){ke(`login`);return}let t=K_(),i=gy(e);if(!t||!i)return;r(t=>t.some(t=>my(t,e))?t.filter(t=>!my(t,e)):[{...e,savedBy:x.uid},...t]);let a=Xu(t,`users`,x.uid,`savedItems`,i),o=n.some(t=>my(t,e));(async()=>{try{o?await Wd(a):await Ud(a,{...e,savedBy:x.uid,savedAt:$d()},{merge:!0})}catch(e){console.error(`Failed to toggle saved item:`,e)}})()},ge=async(e,t)=>{if(!t)return;let n=K_();if(!n)return;let r=gy(e);if(!r)return;let i=Xu(n,`likeCounts`,r);try{await Qd(n,async n=>{let r=await n.get(i),a=r.exists()&&typeof r.data()?.count==`number`?r.data().count:0,o=Math.max(0,a+t);n.set(i,{count:o,title:e.title||`Untitled`,source:e.source||`Unknown`,source_url:e.source_url||``,image_url:e.image_url||``,updatedAt:$d()},{merge:!0})})}catch(e){console.error(`Failed to sync like count to Firestore:`,e)}},E=e=>{let t=K_(),n=gy(e);if(!n)return;let r=de.some(t=>my(t,e)),i=pe.includes(n),a=r||i,o=a?-1:1;if(x?w(t=>a?t.filter(t=>!my(t,e)):[{...e,likedBy:x.uid},...t]):me(e=>{let t=a?e.filter(e=>e!==n):[...e,n];return yy(t),t}),fe(e=>{let t=Math.max(0,(e[n]||0)+o);return{...e,[n]:t}}),ge(e,o),!t||!x)return;let s=Xu(t,`users`,x.uid,`likedItems`,n);(async()=>{try{a?await Wd(s):await Ud(s,{...e,likedBy:x.uid,likedAt:$d()},{merge:!0})}catch(e){console.error(`Failed to toggle liked item:`,e)}})()},_e=e=>{let t=gy(e);return t&&T[t]||0},ve=(0,_.useMemo)(()=>{let e=new Set;return de.forEach(t=>{let n=gy(t);n&&e.add(n)}),pe.forEach(t=>{t&&e.add(t)}),e},[de,pe]),ye=async e=>{let n=e.title?.trim();if(!n)return;let r=e.image_url?.trim()||``,i=e.source?.trim()||``,a=e.source_url?.trim()||``,o=`custom-${Date.now()}`,c=a||r||`custom://${o}`,l={...e,id:o,title:n,source:i,image_url:r,source_url:c,tags:wv(e.tags),isCustom:!0};s(e=>[l,...e]);let u=K_();if(u)try{let e=await Gd(Yu(u,`customItems`),l);s(t=>py(t.filter(e=>e.id!==o),[{...l,id:e.id}]))}catch(e){console.error(`Failed to add custom item to Firestore:`,e)}t(`home`)},be=(e,n={})=>{let r=Sy(e);n.skipHistory||window.history.pushState({section:e},``,r),e===`home`&&(p(``),h(``),window.scrollTo({top:0,behavior:`smooth`}),ue(e=>e+1)),t(e),l(!1),d(!1),e!==`explore`&&v(!1)};(0,_.useEffect)(()=>{let e=e=>{let t=e.state?.section&&e.state.section||xy(window.location.pathname);be(t,{skipHistory:!0})};return window.addEventListener(`popstate`,e),()=>window.removeEventListener(`popstate`,e)},[]);let xe=()=>{l(e=>!e),d(!1)},Se=()=>{d(e=>!e),l(!1)},Ce=e=>{e?.preventDefault();let t=f.trim();if(!t){h(``),v(!1);return}h(t),dy(t),b(uy()),v(!1)},we=e=>{p(e),h(e),dy(e),b(uy()),v(!1)},Te=e=>{p(e),e.trim()||h(``),v(!0)},Ee=()=>{v(!0)},De=()=>{v(!1)},Oe=()=>{p(``),h(``),v(!1)},ke=(e=`login`)=>{ae(e),le(``),re(!0)},Ae=async({mode:e,email:t,password:n,displayName:r})=>{let i=q_();if(!i){le(`Firebase VITE_FIREBASE_* `);return}se(!0),le(``);try{if(e===`signup`){let e=await Pm(i,t,n);r&&e?.user&&await Lm(e.user,{displayName:r.slice(0,30)})}else await Fm(i,t,n);re(!1)}catch(e){le(e?.message||``)}finally{se(!1)}},je=async()=>{let e=q_();if(e)try{await Vm(e)}catch(e){console.error(`Failed to sign out:`,e)}},Me=async e=>{let t=q_();if(!t){le(`Firebase VITE_FIREBASE_* `);return}se(!0),le(``);try{let n;if(e===`google`)n=new xm,n.setCustomParameters({prompt:`select_account`});else if(e===`apple`)n=new ym(`apple.com`),n.addScope(`email`),n.addScope(`name`);else throw Error(`Unsupported provider`);await Uh(t,n),re(!1)}catch(e){le(e?.message||``)}finally{se(!1)}},Ne=e===`explore`||e===`home`;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(C_,{activeSection:e,onNavigate:be,onToggleNotifications:xe,onToggleMessages:Se,showNotifications:c,showMessages:u,searchValue:f,onSearchChange:Te,onSearchSubmit:Ce,onSearchFocus:Ee,onCloseSearchSuggestions:De,showSearchSuggestions:g&&Ne,searchHistory:y,onSuggestionClick:we,onClearSearch:Oe,popularKeywords:ly,searchEnabled:Ne,searchPlaceholder:`3D`,user:x,authReady:te,onRequestAuth:()=>ke(`login`),onLogout:je,onHomeClick:()=>{if(typeof window<`u`&&window.location){window.location.reload();return}p(``),h(``),ue(e=>e+1)},children:(0,$.jsx)(ay,{activeTab:e,savedItems:n,savedItemsLoaded:i,onSaveItem:he,likedDocIds:ve,onLikeItem:E,getLikeCountForItem:_e,customItems:o,onAddCustomItem:ye,query:m,homeClearToken:C,user:x})}),(0,$.jsx)(oy,{open:ne,mode:ie,onModeChange:e=>{ae(e),le(``)},onClose:()=>{re(!1),le(``)},onSubmit:Ae,loading:oe,error:ce,onSocialLogin:Me})]})}var wy=Cy;(0,g.createRoot)(document.getElementById(`root`)).render((0,$.jsx)(_.StrictMode,{children:(0,$.jsx)(wy,{})}));